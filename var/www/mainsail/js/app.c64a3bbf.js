(function(t){function e(e){for(var i,s,o=e[0],c=e[1],l=e[2],u=0,m=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&m.push(n[s][0]),n[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(m.length)m.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],i=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(i=!1)}i&&(r.splice(e--,1),t=s(s.s=a[0]))}return t}var i={},n={app:0},r=[];function s(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=i,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(a,i,function(e){return t[e]}.bind(null,i));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var d=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var i=a("9085"),n=a.n(i);n.a},"07df":function(t,e,a){"use strict";var i=a("8e81"),n=a.n(i);n.a},"0a9e":function(t,e,a){"use strict";var i=a("b0cf"),n=a.n(i);n.a},"0fe4":function(t,e,a){},1:function(t,e){},"1a1e":function(t,e,a){"use strict";var i=a("1a2b"),n=a.n(i);n.a},"1a2b":function(t,e,a){},"24e8":function(t,e,a){},"2a78":function(t,e,a){},"2d37":function(t,e,a){"use strict";var i=a("bb8a"),n=a.n(i);n.a},3296:function(t,e,a){},4611:function(t,e,a){"use strict";var i=a("e04a"),n=a.n(i);n.a},4625:function(t,e,a){"use strict";var i=a("3296"),n=a.n(i);n.a},4681:function(t,e,a){"use strict";var i=a("5664"),n=a.n(i);n.a},4739:function(t,e,a){"use strict";var i=a("6ed4"),n=a.n(i);n.a},"55b4":function(t,e,a){"use strict";var i=a("6aeb"),n=a.n(i);n.a},5664:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("d3b7"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),n=(a("4de4"),a("7db0"),a("2ca0"),a("d4ec")),r=a("bee2"),s=function(){function t(e,a){Object(n["a"])(this,t),this.instance=null,this.url=e,this.reconnects=0,this.maxReconnects=a.maxReconnects||10,this.reconnectInterval=a.reconnectInterval||1e3,this.store=a.store,this.wsData=[],this.timerId=0,this.keepAliveTimeout=1e3,this.onOpen=null,this.onMessage=null,this.onClose=null,this.onError=null,this.blacklistMessages=["Metadata not available for","Klippy Request Timed Out","Klippy Host not connected"],this.blacklistFunctions=["getPowerDevices"]}return Object(r["a"])(t,[{key:"setUrl",value:function(t){this.url=t}},{key:"createMessage",value:function(t,e,a){var i={jsonrpc:"2.0",method:t,params:e,id:a};return JSON.stringify(i)}},{key:"passToStore",value:function(t,e){if(t.startsWith("socket/")){var a="dispatch",i=t,n=e;e&&e.data&&(n=JSON.parse(e.data)),this.store[a](i,n)}}},{key:"connect",value:function(){var t=this;this.store.dispatch("socket/setData",{isConnecting:!0}),this.instance=new WebSocket(this.url),this.instance.onopen=function(){t.reconnects=0,t.store&&t.passToStore("socket/onOpen",event)},this.instance.onclose=function(e){t.passToStore("socket/onClose",e),!e.wasClean&&t.reconnects<t.maxReconnects?(t.reconnects++,setTimeout((function(){t.connect()}),t.reconnectInterval)):t.store.dispatch("socket/setData",{isConnecting:!1,connectingFailed:!0})},this.instance.onerror=function(){t.instance.close()},this.instance.onmessage=function(e){var a=JSON.parse(e.data);if(t.store)if(t.wsData.filter((function(t){return t.id===a.id})).length>0&&""!==t.wsData.filter((function(t){return t.id===a.id}))[0].action){var i=t.wsData.filter((function(t){return t.id===a.id}))[0];if(a.error&&a.error.message)t.blacklistMessages.find((function(t){return a.error.message.startsWith(t)}))||t.blacklistFunctions.find((function(t){return i.action.startsWith(t)}))||(window.console.error("Response Error: "+i.action+" > "+a.error.message),t.store.dispatch(i.action,Object.assign(i.actionPreload||{},{error:a.error,requestParams:i.params})));else{var n=a.result;"ok"===n&&(n={result:n}),"string"===typeof n&&(n={result:n});var r={},s=t.wsData.filter((function(t){return t.id===a.id}))[0];s.actionPreload&&Object.assign(r,s.actionPreload),Object.assign(r,{requestParams:s.params}),Object.assign(r,n),t.store.dispatch(s.action,r)}}else t.passToStore("socket/onMessage",a)}}},{key:"close",value:function(){this.instance&&this.instance.close()}},{key:"sendObj",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this.instance.readyState===WebSocket.OPEN){var n=Math.floor(1e4*Math.random())+1;this.wsData.push({id:n,action:a,params:e,actionPreload:i}),this.instance.send(this.createMessage(t,e,n))}}}]),t}(),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("vue-headful",{attrs:{title:t.getTitle}}),a("v-navigation-drawer",{staticClass:"sidebar-wrapper",attrs:{persistent:"","enable-resize-watcher":"",fixed:"",app:"",src:t.sidebarBackground},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("div",{attrs:{id:"nav-header"}},[a("img",{attrs:{src:t.sidebarLogo}}),a("v-toolbar-title",[t._v(t._s(""!==t.printername?t.printername:t.hostname))])],1),a("ul",{staticClass:"navi",attrs:{expand:t.$vuetify.breakpoint.mdAndUp}},[a("printer-selecter"),t._l(t.routes,(function(e,i){return a("li",{key:i,class:["/"!==e.path&&t.currentPage.includes(e.path)?"active":"","nav-item"],attrs:{"prepend-icon":e.icon,value:!0}},["Webcam"===e.title&&t.boolNaviWebcam||"Heightmap"===e.title&&t.boolNaviHeightmap||"Webcam"!==e.title&&"Heightmap"!==e.title&&("error"!==t.klippy_state||e.alwaysShow)?a("router-link",{staticClass:"nav-link",staticStyle:{position:"relative"},attrs:{slot:"activator",exact:"",to:e.path},on:{click:function(t){t.preventDefault()}},slot:"activator"},[a("v-icon",[t._v("mdi-"+t._s(e.icon))]),"Settings"===e.title&&t.isUpdateAvailable?a("v-icon",{staticStyle:{top:"11px",left:"32px",position:"absolute"},attrs:{small:"",color:"warning"}},[t._v("mdi-progress-upload")]):t._e(),a("span",{staticClass:"nav-title"},[t._v(" "+t._s(e.title)+" ")]),e.children&&e.children.length>0?a("v-icon",{staticClass:"nav-arrow"},[t._v("mdi-chevron-down")]):t._e()],1):t._e(),a("ul",{staticClass:"child"},t._l(e.children,(function(e,n){return a("li",{key:i+"-"+n,staticClass:"nav-item"},["error"!==t.klippy_state||e.alwaysShow?a("router-link",{staticClass:"nav-link",attrs:{to:e.path},on:{click:function(t){t.preventDefault()}}},[a("v-icon",[t._v("mdi-"+t._s(e.icon))]),a("span",{staticClass:"nav-title"},[t._v(t._s(e.title))])],1):t._e()],1)})),0)],1)}))],2),a("p",{staticClass:"mb-0 text-body-2 pl-3 pb-2",attrs:{id:"sidebarVersions"}},[t._v(" v"+t._s(t.getVersion)),t.klipperVersion?a("span",{},[t._v(" - "+t._s(t.klipperVersion.substr(0,t.klipperVersion.lastIndexOf("-"))))]):t._e()])]),a("v-app-bar",{attrs:{app:"","elevate-on-scroll":""}},[a("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),a("v-spacer"),a("input",{ref:"fileUploadAndStart",staticStyle:{display:"none"},attrs:{type:"file",accept:".gcode, .ufp"},on:{change:t.uploadAndStart}}),t.isConnected&&t.save_config_pending?a("v-btn",{staticClass:"mr-5 d-none d-sm-flex",attrs:{color:"primary",disabled:["printing","paused"].includes(t.printer_state),loading:t.loadings.includes["topbarSaveConfig"]},on:{click:t.clickSaveConfig}},[t._v("SAVE CONFIG")]):t._e(),t.isConnected&&["standby","complete"].includes(t.printer_state)?a("v-btn",{staticClass:"mr-5 d-none d-sm-flex",attrs:{color:"primary",loading:t.loadings.includes["btnUploadAndStart"]},on:{click:t.btnUploadAndStart}},[a("v-icon",{staticClass:"mr-2"},[t._v("mdi-file-upload")]),t._v("Upload & Print")],1):t._e(),t.isConnected?a("v-btn",{staticClass:"button-min-width-auto px-3",attrs:{color:"error",loading:t.loadings.includes["topbarEmergencyStop"]},on:{click:t.clickEmergencyStop}},[a("v-icon",{staticClass:"mr-sm-2"},[t._v("mdi-alert-circle-outline")]),a("span",{staticClass:"d-none d-sm-flex"},[t._v("Emergency Stop")])],1):t._e(),a("top-corner-menu")],1),a("v-main",{attrs:{id:"content"}},[a("v-scroll-y-transition",[a("v-container",{staticClass:"container px-3 px-sm-6 py-sm-6 mx-auto",attrs:{fluid:"",id:"page-container"}},[a("keep-alive",[a("router-view")],1)],1)],1)],1),a("v-snackbar",{attrs:{timeout:-1,value:!0,fixed:"",right:"",bottom:"",dark:""},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({staticStyle:{"min-width":"auto"},attrs:{color:"red",text:""},on:{click:t.cancelUpload}},"v-btn",i,!1),[a("v-icon",{staticClass:"0"},[t._v("mdi-close")])],1)]}}]),model:{value:t.uploadSnackbar.status,callback:function(e){t.$set(t.uploadSnackbar,"status",e)},expression:"uploadSnackbar.status"}},[a("strong",[t._v("Uploading "+t._s(t.uploadSnackbar.filename))]),a("br"),t._v(" "+t._s(Math.round(t.uploadSnackbar.percent))+" % @ "+t._s(t.formatFilesize(Math.round(t.uploadSnackbar.speed)))+"/s"),a("br"),a("v-progress-linear",{staticClass:"mt-2",attrs:{value:t.uploadSnackbar.percent}})],1),t.remoteMode?a("select-printer-dialog"):t._e(),t.remoteMode?t._e():a("connecting-dialog"),a("update-dialog")],1)},c=[],l=(a("cb29"),a("b0c0"),a("b680"),a("ac1f"),a("5319"),a("3835")),d=a("b85c"),u=(a("96cf"),a("1da1")),m=a("5530"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",[a("v-col",{staticClass:"col-sm-12 col-md-5"},["ready"===t.klippy_state&&t.existsPrinterConfig?a("min-settings-panel"):t._e(),t.moonrakerFailedPlugins.length?a("moonraker-failed-plugins-panel"):t._e(),t.socket_connected&&"ready"!==t.klippy_state?a("klippy-state-panel"):t._e(),"ready"===t.klippy_state?a("status-panel"):t._e(),t.showDashboardWebcam?a("webcam-panel",{staticClass:"mt-6"}):t._e(),"ready"===t.klippy_state?a("z-offset-panel",{staticClass:"mt-6"}):t._e(),"ready"===t.klippy_state?a("control-panel",{staticClass:"mt-6"}):t._e(),"ready"===t.klippy_state?a("extruder-panel",{staticClass:"mt-6"}):t._e(),"ready"===t.klippy_state?a("miscellaneous-panel"):t._e()],1),t.klippy_connected?a("v-col",{staticClass:"col-sm-12 col-md-7"},[t.socket_connected&&t.klippy_connected?a("tools-panel"):t._e(),"ready"===t.klippy_state&&t.showDashboardConsole?a("miniconsole-panel",{staticClass:"mt-6"}):t._e()],1):t._e()],1)},f=[],h=a("2f62"),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return["printing","paused"].includes(t.printer_state)?a("v-card",[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{staticClass:"mdi mdi-arrow-collapse-vertical",attrs:{left:""}}),t._v("Z Baby Stepping")],1)])],1),a("v-card-text",{staticClass:"px-0 py-0"},[a("v-container",[a("v-row",{staticClass:"py-0"},[a("v-col",{staticClass:"col text-center"},[a("p",{staticClass:"mb-0"},[t._v("Current Offset: "+t._s(t.homing_origin.length>1?t.homing_origin[2].toFixed(2):0)+"mm")])])],1),a("v-row",[a("v-col",{staticClass:"col text-center d-flex flex-column align-center flex-sm-row justify-center"},[a("v-btn-toggle",{staticClass:"mx-2 mt-3 mt-sm-0 order-last flex-nowrap order-sm-first",attrs:{dense:"","no-gutters":""}},[a("v-btn",{attrs:{small:"",loading:t.loadings.includes("babySteppingDownFine")},on:{click:function(e){return t.sendBabySteppingDownFine()}}},[a("v-icon",{staticClass:"mr-2",attrs:{small:""}},[t._v("mdi-arrow-collapse-down")]),t._v(" -0.01mm")],1),a("v-btn",{attrs:{small:"",loading:t.loadings.includes("babySteppingDown")},on:{click:function(e){return t.sendBabySteppingDown()}}},[t._v("-0.05mm")])],1),a("v-btn-toggle",{staticClass:"mx-2 order-first flex-nowrap order-sm-last",attrs:{dense:"","no-gutters":""}},[a("v-btn",{attrs:{small:"",loading:t.loadings.includes("babySteppingUpFine")},on:{click:function(e){return t.sendBabySteppingUpFine()}}},[a("v-icon",{staticClass:"mr-2",attrs:{small:""}},[t._v("mdi-arrow-expand-up")]),t._v(" +0.01mm")],1),a("v-btn",{attrs:{small:"",loading:t.loadings.includes("babySteppingUp")},on:{click:function(e){return t.sendBabySteppingUp()}}},[t._v("+0.05mm")])],1)],1)],1)],1)],1)],1):t._e()},g=[],b={components:{},data:function(){return{}},computed:Object(m["a"])({},Object(h["e"])({loadings:function(t){return t.socket.loadings},homing_origin:function(t){return t.printer.gcode_move.homing_origin},printer_state:function(t){return t.printer.print_stats.state},homed_axis:function(t){return t.printer.toolhead.homed_axes}})),methods:{sendBabySteppingDownFine:function(){var t="SET_GCODE_OFFSET Z_ADJUST=-0.01"+("xyz"===this.homed_axis?" MOVE=1":"");this.$store.commit("socket/addLoading",{name:"babySteppingDownFine"}),this.$store.commit("server/addEvent",{message:t,type:"command"}),i["a"].prototype.$socket.sendObj("printer.gcode.script",{script:t},"socket/removeLoading",{name:"babySteppingDownFine"})},sendBabySteppingDown:function(){var t="SET_GCODE_OFFSET Z_ADJUST=-0.05"+("xyz"===this.homed_axis?" MOVE=1":"");this.$store.commit("socket/addLoading",{name:"babySteppingDown"}),this.$store.commit("server/addEvent",{message:t,type:"command"}),i["a"].prototype.$socket.sendObj("printer.gcode.script",{script:t},"socket/removeLoading",{name:"babySteppingDown"})},sendBabySteppingUpFine:function(){var t="SET_GCODE_OFFSET Z_ADJUST=0.01"+("xyz"===this.homed_axis?" MOVE=1":"");this.$store.commit("socket/addLoading",{name:"babySteppingUpFine"}),this.$store.commit("server/addEvent",{message:t,type:"command"}),i["a"].prototype.$socket.sendObj("printer.gcode.script",{script:t},"socket/removeLoading",{name:"babySteppingUpFine"})},sendBabySteppingUp:function(){var t="SET_GCODE_OFFSET Z_ADJUST=0.05"+("xyz"===this.homed_axis?" MOVE=1":"");this.$store.commit("socket/addLoading",{name:"babySteppingUp"}),this.$store.commit("server/addEvent",{message:t,type:"command"}),i["a"].prototype.$socket.sendObj("printer.gcode.script",{script:t},"socket/removeLoading",{name:"babySteppingUp"})}}},_=b,y=a("2877"),C=a("6544"),k=a.n(C),x=a("8336"),w=a("a609"),S=a("b0af"),P=a("99d9"),O=a("62ad"),D=a("a523"),V=a("132d"),j=a("0fd9"),T=a("71d9"),$=a("2a7f"),M=Object(y["a"])(_,v,g,!1,null,null,null),F=M.exports;k()(M,{VBtn:x["a"],VBtnToggle:w["a"],VCard:S["a"],VCardText:P["c"],VCol:O["a"],VContainer:D["a"],VIcon:V["a"],VRow:j["a"],VToolbar:T["a"],VToolbarTitle:$["b"]});var E={components:{ZOffsetPanel:F},data:function(){return{}},computed:Object(m["a"])(Object(m["a"])({},Object(h["e"])({socket_connected:function(t){return t.socket.isConnected},klippy_connected:function(t){return t.server.klippy_connected},klippy_state:function(t){return t.server.klippy_state},moonrakerFailedPlugins:function(t){return t.server.failed_plugins},showDashboardWebcam:function(t){return t.gui.dashboard.boolWebcam},showDashboardConsole:function(t){return t.gui.dashboard.boolConsole},config:function(t){return t.printer.configfile.config}})),{},{existsPrinterConfig:{get:function(){return this.$store.getters["printer/existPrinterConfig"]}}})},R=E,A=Object(y["a"])(R,p,f,!1,null,null,null),L=A.exports;k()(A,{VCol:O["a"],VRow:j["a"]});var I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",[a("v-col",{attrs:{"col-12":""}},[a("webcam-panel")],1)],1)],1)},H=[],U={data:function(){return{}},computed:{},methods:{}},N=U,B=Object(y["a"])(N,I,H,!1,null,null,null),q=B.exports;k()(B,{VCol:O["a"],VRow:j["a"]});var W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",t._l(t.printers,(function(t,e){return a("v-col",{key:e,staticClass:"col-12 col-sm-6 col-md-4"},[a("farm-printer-panel",{attrs:{printer:t}})],1)})),1)},G=[],z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{class:t.printer.socket.isConnected||t.printer.socket.isConnecting?"":"disabledPrinter",attrs:{loading:t.printer.socket.isConnecting},on:{click:t.clickPrinter}},[a("v-toolbar",{attrs:{flat:"",dense:"",color:t.isCurrentPrinter?"primary":""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{attrs:{left:""}},[t._v("mdi-printer-3d")]),t._v(t._s(t.printer_name))],1)])],1),a("v-img",{staticClass:"d-flex align-end",attrs:{height:"200px",src:t.printer_image}},[a("v-card-title",{staticClass:"white--text py-2",staticStyle:{"background-color":"rgba(0,0,0,0.3)","backdrop-filter":"blur(3px)"}},[a("v-row",[a("v-col",{staticClass:"col-auto pr-0 d-flex align-center",staticStyle:{width:"58px"}},[a("img",{staticClass:"my-auto",staticStyle:{width:"100%"},attrs:{src:t.printer_logo}})]),a("v-col",{staticClass:"col",staticStyle:{width:"100px"}},[a("h3",{staticClass:"font-weight-regular"},[t._v(t._s(t.printer_status))]),""!==t.printer_current_filename?a("span",{staticClass:"subtitle-2 text-truncate px-0 text--disabled d-block"},[a("v-icon",{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-file-outline")]),t._v(t._s(t.printer_current_filename))],1):t._e()])],1)],1)],1),t.printer_preview.length?a("v-card-text",{staticClass:"px-0 py-2"},[a("v-container",{staticClass:"py-0"},[a("v-row",t._l(t.printer_preview,(function(e){return a("v-col",{key:e.name,class:"ETA"===e.name?"col-auto":"col px-2"},[a("strong",{staticClass:"d-block text-center"},[t._v(t._s(e.name))]),a("span",{staticClass:"d-block text-center"},[t._v(t._s(e.value))])])})),1)],1)],1):t._e()],1)},Y=[],Z={components:{},props:{printer:{type:Object,required:!0}},computed:Object(m["a"])(Object(m["a"])({},Object(h["e"])({remoteMode:function(t){return t.socket.remoteMode}})),{},{isCurrentPrinter:{get:function(){return this.$store.getters["farm/"+this.printer._namespace+"/isCurrentPrinter"]}},printer_name:{get:function(){return this.$store.getters["farm/"+this.printer._namespace+"/getPrinterName"]}},printer_status:{get:function(){return this.$store.getters["farm/"+this.printer._namespace+"/getStatus"]}},printer_current_filename:{get:function(){return this.$store.getters["farm/"+this.printer._namespace+"/getCurrentFilename"]}},printer_image:{get:function(){return this.$store.getters["farm/"+this.printer._namespace+"/getImage"]}},printer_logo:{get:function(){return this.$store.getters["farm/"+this.printer._namespace+"/getLogo"]}},printer_position:{get:function(){return this.$store.getters["farm/"+this.printer._namespace+"/getPosition"]}},printer_preview:{get:function(){return this.$store.getters["farm/"+this.printer._namespace+"/getPrinterPreview"]}}}),methods:{clickPrinter:function(){this.printer.socket.isConnected?this.changePrinter():this.reconnectPrinter()},changePrinter:function(){this.remoteMode?this.$store.dispatch("changePrinter",{printer:this.printer._namespace}):window.location.href="//"+this.printer.socket.hostname+(80!==parseInt(this.printer.socket.webPort)?":"+this.printer.socket.webPort:"")},reconnectPrinter:function(){this.$store.dispatch("farm/"+this.printer._namespace+"/reconnect")}}},X=Z,J=(a("dc88"),a("adda")),K=Object(y["a"])(X,z,Y,!1,null,null,null),Q=K.exports;k()(K,{VCard:S["a"],VCardText:P["c"],VCardTitle:P["d"],VCol:O["a"],VContainer:D["a"],VIcon:V["a"],VImg:J["a"],VRow:j["a"],VToolbar:T["a"],VToolbarTitle:$["b"]});var tt={components:{FarmPrinterPanel:Q},data:function(){return{}},computed:{printers:{get:function(){return this.$store.getters["farm/getPrinters"]}}},methods:{}},et=tt,at=Object(y["a"])(et,W,G,!1,null,null,null),it=at.exports;k()(at,{VCol:O["a"],VRow:j["a"]});var nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",[a("v-col",{staticClass:"col"},[a("v-text-field",{ref:"gcodeCommandField",staticClass:"gcode-command-field",attrs:{items:t.items,label:"Send code...",solo:"",autocomplete:"off"},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.doSend(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:t.onKeyUp(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:t.onKeyDown(e)}],keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab")?null:t.getAutocomplete(e)}},model:{value:t.gcode,callback:function(e){t.gcode=e},expression:"gcode"}})],1),a("v-col",{staticClass:"col-auto align-content-center"},[a("v-btn",{staticClass:"gcode-command-btn",attrs:{color:"info",loading:t.loadings.includes("sendGcode"),disabled:t.loadings.includes("sendGcode")},on:{click:t.doSend}},[a("v-icon",{staticClass:"mr-2"},[t._v("mdi-send")]),t._v(" send ")],1)],1),a("v-col",{staticClass:"col-auto align-content-center"},[a("v-menu",{attrs:{"offset-y":!0,"close-on-content-click":!1,title:"Setup Console"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"gcode-command-btn px-2 minwidth-0",attrs:{color:"lightgray"}},"v-btn",n,!1),i),[a("v-icon",[t._v("mdi-cog")])],1)]}}])},[a("v-list",[a("v-list-item",{staticClass:"minHeight36"},[a("v-checkbox",{staticClass:"mt-0",attrs:{"hide-details":"",label:"Hide temperatures"},model:{value:t.hideWaitTemperatures,callback:function(e){t.hideWaitTemperatures=e},expression:"hideWaitTemperatures"}})],1),a("v-list-item",{staticClass:"minHeight36"},[a("v-checkbox",{staticClass:"mt-0",attrs:{"hide-details":"",label:"Custom filters"},model:{value:t.boolCustomFilters,callback:function(e){t.boolCustomFilters=e},expression:"boolCustomFilters"}})],1)],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{xs12:""}},[a("v-data-table",{staticClass:"event-table",attrs:{headers:t.headers,options:t.options,"sort-by":t.sortBy,items:t.events,"item-key":"date","hide-default-footer":"","disable-pagination":"","custom-sort":t.customSort,"mobile-breakpoint":"0"},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e}},scopedSlots:t._u([{key:"no-data",fn:function(){return[a("div",{staticClass:"text-center"},[t._v("empty")])]},proxy:!0},{key:"item",fn:function(e){var i=e.item;return[a("tr",[a("td",{staticClass:"log-cell title-cell py-2 flex-grow-0 pr-0 d-none d-sm-table-cell"},[t._v(" "+t._s(i.date.toLocaleString())+" ")]),a("td",{staticClass:"log-cell title-cell py-2 flex-grow-0 pr-0 d-sm-none"},[t._v(" "+t._s(t.formatTimeMobile(i.date))+" ")]),a("td",{staticClass:"log-cell content-cell py-2",attrs:{colspan:"2"}},[i.message?a("span",{class:"message "+t.colorConsoleMessage(i),domProps:{innerHTML:t._s(t.formatConsoleMessage(i.message))}}):t._e()])])]}}])})],1)],1)],1)},rt=[];a("a4d3"),a("e01a"),a("4160"),a("caad"),a("c975"),a("25f0"),a("2532"),a("159b"),a("fb6a"),a("1276");function st(t,e){if(void 0!==t&&e.length){t.childrens&&(t=t.childrens);var a=t.find((function(t){return t.isDirectory&&t.filename===e[0]}));return a?(e.shift(),e.length?st(a,e):a.childrens):t}}function ot(t,e){var a=t.name.toUpperCase(),i=e.name.toUpperCase();return a<i?-1:a>i?1:0}function ct(t){return t.message.startsWith("!! ")?"red--text":"type"in t&&"command"===t.type?"blue--text":""}function lt(t){return t=t.replaceAll("!! ",""),t=t.replaceAll("// ",""),t=t.replace("\n// ","<br>"),t=t.replace(/(?:\r\n|\r|\n)/g,"<br>"),t}function dt(t){var e="";return t=t.replaceAll("_"," "),t.split(" ").forEach((function(t){e+=" "+t.charAt(0).toUpperCase()+t.slice(1)})),e=e.slice(1),e}var ut={data:function(){return{gcode:"",sortBy:"date",headers:[{text:"Date",value:"date",width:"15%",dateType:"Date"},{text:"Event",sortable:!1,value:"message",width:"85%"}],options:{},lastCommands:[],lastCommandNumber:null,items:[]}},computed:Object(m["a"])(Object(m["a"])(Object(m["a"])({},Object(h["e"])({helplist:function(t){return t.printer.helplist},loadings:function(t){return t.socket.loadings}})),Object(h["c"])([])),{},{events:{get:function(){return this.$store.getters["server/getFilterdEvents"]}},hideWaitTemperatures:{get:function(){return this.$store.state.gui.console.hideWaitTemperatures},set:function(t){return this.$store.dispatch("gui/setSettings",{console:{hideWaitTemperatures:t}})}},boolCustomFilters:{get:function(){return this.$store.state.gui.console.boolCustomFilters},set:function(t){return this.$store.dispatch("gui/setSettings",{console:{boolCustomFilters:t}})}}}),methods:{doSend:function(){this.$store.commit("socket/addLoading",{name:"sendGcode"}),this.$store.commit("server/addEvent",{message:this.gcode,type:"command"}),i["a"].prototype.$socket.sendObj("printer.gcode.script",{script:this.gcode},"socket/removeLoading",{name:"sendGcode"}),this.lastCommands.push(this.gcode),this.gcode="",this.lastCommandNumber=null},formatTimeMobile:function(t){var e=t.getHours();e<10&&(e="0"+e.toString());var a=t.getMinutes();a<10&&(a="0"+a.toString());var i=t.getSeconds();return i<10&&(i="0"+i.toString()),e+":"+a+":"+i},colorConsoleMessage:ct,formatConsoleMessage:lt,onKeyUp:function(){null===this.lastCommandNumber&&this.lastCommands.length?(this.lastCommandNumber=this.lastCommands.length-1,this.gcode=this.lastCommands[this.lastCommandNumber]):this.lastCommandNumber>0&&(this.lastCommandNumber--,this.gcode=this.lastCommands[this.lastCommandNumber])},onKeyDown:function(){null!==this.lastCommandNumber&&this.lastCommandNumber<this.lastCommands.length-1?(this.lastCommandNumber++,this.gcode=this.lastCommands[this.lastCommandNumber]):null!==this.lastCommandNumber&&this.lastCommandNumber===this.lastCommands.length-1&&(this.lastCommandNumber=null,this.gcode="")},getAutocomplete:function(t){var e=this;if(t.preventDefault(),this.gcode.length){var a=this.helplist.filter((function(t){return 0===t.commandLow.indexOf(e.gcode.toLowerCase())}));if(a&&1===a.length)this.gcode=a[0].command;else{var i=this.helplist.filter((function(t){return t.commandLow.includes(e.gcode.toLowerCase())}));if(i&&i.length){var n="";i.forEach((function(t){return n+="<b>"+t.command+":</b> "+t.description+"<br />"})),this.$store.commit("server/addEvent",{message:n,type:"command"})}}}this.$refs.gcodeCommandField.focus()},customSort:function(t,e,a){return t.sort((function(t,i){return"date"===e[0]?a[0]?new Date(t[e])-new Date(i[e]):new Date(i[e])-new Date(t[e]):"undefined"!==typeof t[e]?a[0]?i[e].toLowerCase().localeCompare(t[e].toLowerCase()):t[e].toLowerCase().localeCompare(i[e].toLowerCase()):void 0})),t}}},mt=ut,pt=(a("07df"),a("ac7c")),ft=a("8fea"),ht=a("8860"),vt=a("da13"),gt=a("e449"),bt=a("8654"),_t=Object(y["a"])(mt,nt,rt,!1,null,null,null),yt=_t.exports;k()(_t,{VBtn:x["a"],VCheckbox:pt["a"],VCol:O["a"],VDataTable:ft["a"],VIcon:V["a"],VList:ht["a"],VListItem:vt["a"],VMenu:gt["a"],VRow:j["a"],VTextField:bt["a"]});var Ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",[a("v-col",{staticClass:"col-12 col-md-8"},[a("v-card",[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{attrs:{left:""}},[t._v("mdi-grid")]),t._v(" Heightmap ")],1),a("v-btn",{staticClass:"ml-1 d-none d-sm-inline-flex",attrs:{text:"",color:"primary"},on:{click:function(e){return t.openRenameProfile()}}},[t._v(t._s(this.bed_mesh&&this.bed_mesh.profile_name?this.bed_mesh.profile_name:""))])],1),a("v-spacer",{}),a("v-btn",{staticClass:" d-sm-none",attrs:{text:"",color:"primary"},on:{click:function(e){return t.openRenameProfile()}}},[t._v(t._s(this.bed_mesh&&this.bed_mesh.profile_name?this.bed_mesh.profile_name:""))]),a("v-item-group",{staticClass:"v-btn-toggle d-none d-sm-flex",attrs:{name:"controllers"}},[a("v-btn",{staticClass:"px-2 minwidth-0",attrs:{small:"",color:"primary",loading:t.loadings.includes("homeAll"),title:"Home All"},on:{click:t.homePrinter}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-home")])],1),this.bed_mesh&&this.bed_mesh.profile_name?a("v-btn",{staticClass:"px-2 minwidth-0",attrs:{small:"",color:"primary",loading:t.loadings.includes("bedMeshClear"),title:"Clear bed mesh"},on:{click:t.clearBedMesh}},[t._v("Clear")]):t._e(),a("v-btn",{staticClass:"px-2 minwidth-0",attrs:{small:"",color:"primary",loading:t.loadings.includes("bedMeshCalibrate"),disabled:t.is_printing,title:"Calibrate new bed mesh"},on:{click:function(e){t.calibrateDialog=!0}}},[t._v("Calibrate")])],1)],1),a("v-card-text",{staticClass:"d-sm-none text-center pb-0"},[a("v-item-group",{staticClass:"v-btn-toggle",attrs:{name:"controllers"}},[a("v-btn",{staticClass:"px-2 minwidth-0",attrs:{small:"",color:"primary",loading:t.loadings.includes("homeAll"),title:"Home All"},on:{click:t.homePrinter}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-home")])],1),this.bed_mesh&&this.bed_mesh.profile_name?a("v-btn",{staticClass:"px-2 minwidth-0",attrs:{small:"",color:"primary",loading:t.loadings.includes("bedMeshClear"),title:"Clear bed mesh"},on:{click:t.clearBedMesh}},[t._v("Clear")]):t._e(),a("v-btn",{staticClass:"px-2 minwidth-0",attrs:{small:"",color:"primary",loading:t.loadings.includes("bedMeshCalibrate"),disabled:t.is_printing,title:"Calibrate new bed mesh"},on:{click:function(e){t.calibrateDialog=!0}}},[t._v("Calibrate")])],1)],1),this.bed_mesh&&this.bed_mesh.profile_name?t._e():a("v-card-text",[t._v(" No bed_mesh has been loaded yet. ")]),this.bed_mesh&&this.bed_mesh.profile_name?a("v-card-text",{staticClass:"px-0 py-0 content"},[a("v-container",{staticClass:"px-0 py-0"},[a("v-row",[a("v-col",{staticClass:"pb-0 pt-5"},[a("Plotly",{ref:"heightmap",attrs:{data:t.data,layout:t.layout,"display-mode-bar":!1}})],1)],1)],1)],1):t._e(),this.bed_mesh&&this.bed_mesh.profile_name?a("v-card-actions",{staticClass:"py-0"},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"probed"===this.showMeshType?"primary accent-4":"grey lighten-2"},on:{click:t.switchToProbed}},[t._v("Probed")]),a("v-btn",{attrs:{text:"",color:"mesh"===this.showMeshType?"primary accent-4":"grey lighten-2"},on:{click:t.switchToMesh}},[t._v("Mesh")]),a("v-spacer"),a("v-switch",{staticClass:"mr-3",attrs:{label:"Scale"},model:{value:t.colorbarType,callback:function(e){t.colorbarType=e},expression:"colorbarType"}})],1):t._e()],1)],1),a("v-col",{staticClass:"col-12 col-md-4"},[a("v-card",[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{attrs:{left:""}},[t._v("mdi-stack-overflow")]),t._v("Profile")],1)])],1),a("v-card-text",{staticClass:"py-0 px-0"},[a("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[a("tbody",t._l(t.profiles,(function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(e.name)),"deleted"in e.data?a("small",{staticClass:"ml-2"},[t._v("(deleted)")]):t._e()]),a("td",{staticClass:"text-right"},[a("v-btn-toggle",{attrs:{dense:"","no-gutters":""}},[a("v-btn",{staticClass:"btnMinWidthAuto",attrs:{loading:t.loadings.includes("bedMeshLoad_"+e.name),disabled:"profile_name"in t.bed_mesh&&t.bed_mesh.profile_name===e.name||"deleted"in e.data},on:{click:function(a){return t.loadProfile(e.name)}}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-view-grid-plus")])],1),a("v-btn",{staticClass:"btnMinWidthAuto",attrs:{loading:t.loadings.includes("bedMeshRemove_"+e.name),disabled:"deleted"in e.data},on:{click:function(a){return t.openRemoveProfile(e.name)}}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-delete")])],1)],1)],1)])})),0)]},proxy:!0}])})],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.renameDialog,callback:function(e){t.renameDialog=e},expression:"renameDialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Rename Bed Mesh Profile")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Name",required:""},model:{value:t.newName,callback:function(e){t.newName=e},expression:"newName"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"waring darken-1",text:""},on:{click:function(e){t.renameDialog=!1}}},[t._v("abort")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.renameProfile}},[t._v("rename")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.calibrateDialog,callback:function(e){t.calibrateDialog=e},expression:"calibrateDialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Bed Mesh Calibrate")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("p",[t._v("Do you really want to start the bed calibration?")])])],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"waring darken-1",text:""},on:{click:function(e){t.calibrateDialog=!1}}},[t._v("abort")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.calibrateMesh}},[t._v("calibrate")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.removeDialog,callback:function(e){t.removeDialog=e},expression:"removeDialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Delete Bed Mesh Profile")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("p",[t._v('Do you really want to delete the profile "'+t._s(t.removeDialogProfile)+'"?')])])],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"waring darken-1",text:""},on:{click:function(e){t.removeDialog=!1}}},[t._v("abort")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.removeProfile}},[t._v("remove")])],1)],1)],1)],1)},kt=[],xt=(a("d81d"),a("04d1")),wt={components:{Plotly:xt["Plotly"]},data:function(){return{data:[{x:[],y:[],z:[],type:"surface",cmin:-.1,cmax:.1,showscale:!0,autocolorscale:!0,colorbar:{tickfont:{color:"#fff"}}}],layout:{showScale:!0,plot_bgcolor:"transparent",paper_bgcolor:"transparent",margin:{l:0,r:120,b:0,t:0},scene:{camera:{eye:{x:-1.25,y:-1.25,z:.5}},xaxis:{color:"#fff",range:[0,200]},yaxis:{color:"#fff",range:[0,200]},zaxis:{color:"#fff",range:[-.5,.5]}}},showMeshType:"probed",renameDialog:!1,removeDialogProfile:"",removeDialog:!1,calibrateDialog:!1,newName:"",colorbarType:!1}},computed:Object(m["a"])(Object(m["a"])(Object(m["a"])({},Object(h["e"])({config:function(t){return t.printer.configfile.settings},loadings:function(t){return t.socket.loadings}})),Object(h["c"])(["is_printing"])),{},{bed_mesh:{get:function(){return this.$store.state.printer.bed_mesh||null},set:function(){}},profileName:{get:function(){return this.$store.getters["printer/getBedMeshProfileName"]}},profiles:{get:function(){return this.$store.getters["printer/getBedMeshProfiles"]},set:function(){}}}),methods:{showBedMesh:function(){if(window.console.log("showBedMesh"),this.data[0].x=[],this.data[0].y=[],this.data[0].z=[],this.bed_mesh&&""!==this.bed_mesh.profile_name){var t=this.bed_mesh.mesh_min[0],e=this.bed_mesh.mesh_max[0],a=this.bed_mesh.mesh_min[1],i=this.bed_mesh.mesh_max[1];"stepper_x"in this.config&&"stepper_y"in this.config?(this.layout.scene.xaxis.range=[this.config.stepper_x.position_min,this.config.stepper_x.position_max],this.layout.scene.yaxis.range=[this.config.stepper_y.position_min,this.config.stepper_y.position_max]):(this.layout.scene.xaxis.range=[t,e],this.layout.scene.yaxis.range=[a,i]);var n="probed"===this.showMeshType?this.bed_mesh.probed_matrix:this.bed_mesh.mesh_matrix,r=n[0].length,s=n.length;this.data[0].z=n;for(var o=Math.min.apply(null,n.map((function(t){return Math.min.apply(Math,t)}))),c=Math.max.apply(null,n.map((function(t){return Math.max.apply(Math,t)}))),l=(this.bed_mesh.mesh_max[0]-this.bed_mesh.mesh_min[0])/(r-1),d=0;d<r;d++)this.data[0].x.push(parseFloat(this.bed_mesh.mesh_min[0])+parseFloat(l)*d);for(var u=(this.bed_mesh.mesh_max[1]-this.bed_mesh.mesh_min[1])/(s-1),m=0;m<s;m++)this.data[0].y.push(parseFloat(this.bed_mesh.mesh_min[1])+parseFloat(u)*m);this.colorbarType?(this.data[0].cmin=o,this.data[0].cmax=c,this.data[0].autocolorscale=!1):(this.data[0].cmin=-.1,this.data[0].cmax=.1,this.data[0].autocolorscale=!0),o>-.5&&(o=-.5),c<.5&&(c=.5),this.layout.scene.zaxis.range=[o,c]}},switchToProbed:function(){this.showMeshType="probed",this.showBedMesh()},switchToMesh:function(){this.showMeshType="mesh",this.showBedMesh()},loadProfile:function(t){this.$store.commit("socket/addLoading",{name:"bedMeshLoad_"+t}),this.$store.commit("server/addEvent",{message:"BED_MESH_PROFILE LOAD="+t,type:"command"}),this.$socket.sendObj("printer.gcode.script",{script:"BED_MESH_PROFILE LOAD="+t},"socket/removeLoading",{name:"bedMeshLoad_"+t})},openRenameProfile:function(){this.newName=this.bed_mesh.profile_name||"",this.renameDialog=!0},renameProfile:function(){this.renameDialog=!1,this.$store.commit("socket/addLoading",{name:"bedMeshRename"}),this.$store.commit("server/addEvent",{message:"BED_MESH_PROFILE SAVE="+this.newName.toUpperCase(),type:"command"}),this.$socket.sendObj("printer.gcode.script",{script:"BED_MESH_PROFILE SAVE="+this.newName.toUpperCase()},"socket/removeLoading",{name:"bedMeshRename"})},openRemoveProfile:function(t){this.newName=t,this.removeDialog=!0},removeProfile:function(){this.removeDialog=!1,this.$store.commit("socket/addLoading",{name:"bedMeshRemove_"+this.newName}),this.$store.commit("server/addEvent",{message:"BED_MESH_PROFILE REMOVE="+this.newName,type:"command"}),this.$socket.sendObj("printer.gcode.script",{script:"BED_MESH_PROFILE REMOVE="+this.newName},"printer/removeBedMeshProfile",{name:this.newName}),this.removeDialogProfile=""},homePrinter:function(){this.$store.commit("socket/addLoading",{name:"homeAll"}),this.$store.commit("server/addEvent",{message:"G28",type:"command"}),this.$socket.sendObj("printer.gcode.script",{script:"G28"},"socket/removeLoading",{name:"homeAll"})},clearBedMesh:function(){this.$store.commit("socket/addLoading",{name:"bedMeshClear"}),this.$store.commit("server/addEvent",{message:"BED_MESH_CLEAR",type:"command"}),this.$socket.sendObj("printer.gcode.script",{script:"BED_MESH_CLEAR"},"socket/removeLoading",{name:"bedMeshClear"})},calibrateMesh:function(){this.calibrateDialog=!1,this.$store.commit("socket/addLoading",{name:"bedMeshCalibrate"}),this.$store.commit("server/addEvent",{message:"BED_MESH_CALIBRATE",type:"command"}),this.$socket.sendObj("printer.gcode.script",{script:"BED_MESH_CALIBRATE"},"socket/removeLoading",{name:"bedMeshCalibrate"})}},created:function(){},mounted:function(){this.showBedMesh()},watch:{config:function(){this.profiles=this.$store.getters["printer/getBedMeshProfiles"]},bed_mesh:function(t,e){this.bed_mesh=e,this.showBedMesh()},colorbarType:function(t){this.colorbarType=t,this.showBedMesh()}}},St=wt,Pt=a("169a"),Ot=a("604c"),Dt=a("1f4f"),Vt=a("2fa4"),jt=a("b73d"),Tt=Object(y["a"])(St,Ct,kt,!1,null,null,null),$t=Tt.exports;k()(Tt,{VBtn:x["a"],VBtnToggle:w["a"],VCard:S["a"],VCardActions:P["a"],VCardText:P["c"],VCardTitle:P["d"],VCol:O["a"],VContainer:D["a"],VDialog:Pt["a"],VIcon:V["a"],VItemGroup:Ot["b"],VRow:j["a"],VSimpleTable:Dt["a"],VSpacer:Vt["a"],VSwitch:jt["a"],VTextField:bt["a"],VToolbar:T["a"],VToolbarTitle:$["b"]});var Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",{staticClass:"fileupload-card my-3",on:{dragover:t.dragOverUpload,dragleave:t.dragLeaveUpload,drop:function(e){return e.preventDefault(),e.stopPropagation(),t.dragDropUpload(e)}}},[a("v-card-title",[t._v(" G-Code Files "),a("v-spacer",{staticClass:"d-none d-sm-block"}),a("input",{ref:"fileUpload",staticStyle:{display:"none"},attrs:{type:"file",accept:".gcode, .ufp",multiple:""},on:{change:t.uploadFile}}),a("v-item-group",{staticClass:"v-btn-toggle my-5 my-sm-0 col-12 col-sm-auto px-0 py-0",attrs:{name:"controllers"}},[a("v-btn",{staticClass:"primary flex-grow-1",attrs:{title:"Upload new Gcode",loading:t.loadings.includes("gcodeUpload")},on:{click:t.clickUploadButton}},[a("v-icon",[t._v("mdi-upload")])],1),a("v-btn",{staticClass:"flex-grow-1",attrs:{title:"Create new Directory"},on:{click:t.createDirectory}},[a("v-icon",[t._v("mdi-folder-plus")])],1),a("v-btn",{staticClass:"flex-grow-1",attrs:{title:"Refresh current Directory"},on:{click:t.refreshFileList}},[a("v-icon",[t._v("mdi-refresh")])],1),a("v-menu",{attrs:{"offset-y":!0,"close-on-content-click":!1,title:"Setup current list"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"flex-grow-1"},"v-btn",n,!1),i),[a("v-icon",{},[t._v("mdi-cog")])],1)]}}])},[a("v-list",[a("v-list-item",{staticClass:"minHeight36"},[a("v-checkbox",{staticClass:"mt-0",attrs:{"hide-details":"",label:"Hidden files"},model:{value:t.showHiddenFiles,callback:function(e){t.showHiddenFiles=e},expression:"showHiddenFiles"}})],1),a("v-divider"),t._l(t.configHeaders,(function(e){return a("v-list-item",{key:e.key,staticClass:"minHeight36"},[a("v-checkbox",{staticClass:"mt-0",attrs:{"hide-details":"",label:e.text},on:{change:function(a){return t.changeMetadataVisible(e.value)}},model:{value:e.visible,callback:function(a){t.$set(e,"visible",a)},expression:"header.visible"}})],1)}))],2)],1)],1)],1),a("v-card-subtitle",[t._v(" Current path: "+t._s("gcodes"!==this.currentPath?"/"+this.currentPath.substring(7):"/")),a("br"),null!==this.disk_usage?a("div",[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("span",t._g(t._b({},"span",n,!1),i),[t._v("Free disk: "+t._s(t.formatFilesize(t.disk_usage.free)))])]}}],null,!1,2036234262)},[a("span",[t._v(" Used: "+t._s(t.formatFilesize(this.disk_usage.used))),a("br"),t._v(" Free: "+t._s(t.formatFilesize(this.disk_usage.free))),a("br"),t._v(" Total: "+t._s(t.formatFilesize(this.disk_usage.total))+" ")])])],1):t._e()]),a("v-card-text",[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{staticClass:"files-table",attrs:{items:t.files,headers:t.filteredHeaders,options:t.options,"custom-sort":t.sortFiles,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"items-per-page":t.countPerPage,"footer-props":{itemsPerPageText:"Files"},"item-key":"name",search:t.search,"custom-filter":t.advancedSearch,"mobile-breakpoint":"0"},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},"update:itemsPerPage":function(e){t.countPerPage=e},"update:items-per-page":function(e){t.countPerPage=e},pagination:t.refreshMetadata},scopedSlots:t._u([{key:"items",fn:function(e){return t._l(t.filteredHeaders,(function(i){return a("td",{key:i.text},[t._v(t._s(e.item[i.value]))])}))}},{key:"no-data",fn:function(){return[a("div",{staticClass:"text-center"},[t._v("empty")])]},proxy:!0},{key:"item",fn:function(e){var i=e.item;return[a("tr",{staticClass:"file-list-cursor",attrs:{draggable:"true","data-name":i.filename},on:{contextmenu:function(e){return t.showContextMenu(e,i)},click:function(e){return t.clickRow(i)},drag:function(e){return t.dragFile(e,i)},dragend:function(e){return t.dragendFile(e)},dragover:function(e){return t.dragOverFilelist(e,i)},dragleave:t.dragLeaveFilelist,drop:function(e){return e.preventDefault(),e.stopPropagation(),t.dragDropFilelist(e,i)}}},[a("td",{staticClass:"pr-0 text-center",staticStyle:{width:"32px"}},[i.isDirectory?a("v-icon",[t._v("mdi-folder")]):t._e(),i.isDirectory||t.existsSmallThumbnail(i)?t._e():a("v-icon",[t._v("mdi-file")]),!i.isDirectory&&t.existsSmallThumbnail(i)&&t.existsBigThumbnail(i)?a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("img",t._g(t._b({attrs:{src:"data:image/gif;base64,"+t.getSmallThumbnail(i),width:"32",height:"32"}},"img",r,!1),n))]}}],null,!0)},[a("span",[a("img",{attrs:{src:"data:image/gif;base64,"+t.getBigThumbnail(i),width:"250"}})])]):t._e(),i.isDirectory||!t.existsSmallThumbnail(i)||t.existsBigThumbnail(i)?t._e():a("img",{attrs:{src:"data:image/gif;base64,"+t.getSmallThumbnail(i),width:"32",height:"32"}})],1),a("td",{staticClass:" "},[t._v(t._s(i.filename))]),t.headers.filter((function(t){return"size"===t.value}))[0].visible?a("td",{staticClass:"text-no-wrap text-right"},[t._v(t._s(i.isDirectory?"--":t.formatFilesize(i.size)))]):t._e(),t.headers.filter((function(t){return"modified"===t.value}))[0].visible?a("td",{staticClass:"text-right"},[t._v(t._s(t.formatDate(i.modified)))]):t._e(),t.headers.filter((function(t){return"object_height"===t.value}))[0].visible?a("td",{staticClass:"text-no-wrap text-right"},[t._v(t._s(i.object_height?i.object_height.toFixed(2)+" mm":"--"))]):t._e(),t.headers.filter((function(t){return"layer_height"===t.value}))[0].visible?a("td",{staticClass:"text-no-wrap text-right"},[t._v(t._s(i.layer_height?i.layer_height.toFixed(2)+" mm":"--"))]):t._e(),t.headers.filter((function(t){return"filament_total"===t.value}))[0].visible?a("td",{staticClass:"text-no-wrap text-right"},[t._v(t._s(i.filament_total?i.filament_total.toFixed()+" mm":"--"))]):t._e(),t.headers.filter((function(t){return"estimated_time"===t.value}))[0].visible?a("td",{staticClass:"text-no-wrap text-right"},[t._v(t._s(t.formatPrintTime(i.estimated_time)))]):t._e(),t.headers.filter((function(t){return"slicer"===t.value}))[0].visible?a("td",{staticClass:"text-no-wrap text-right"},[t._v(t._s(i.slicer?i.slicer:"--")),a("br"),i.slicer_version?a("small",[t._v(t._s(i.slicer_version))]):t._e()]):t._e()])]}}])},["gcodes"!==t.currentPath?a("template",{slot:"body.prepend"},[a("tr",{staticClass:"file-list-cursor",on:{click:t.clickRowGoBack,dragover:function(e){return t.dragOverFilelist(e,{isDirectory:!0,filename:".."})},dragleave:t.dragLeaveFilelist,drop:function(e){return e.preventDefault(),e.stopPropagation(),t.dragDropFilelist(e,{isDirectory:!0,filename:".."})}}},[a("td",{staticClass:"pr-0 text-center",staticStyle:{width:"32px"}},[a("v-icon",[t._v("mdi-folder-upload")])],1),a("td",{staticClass:" ",attrs:{colspan:"8"}},[t._v("..")])])]):t._e(),a("v-data-footer",[t._v("bla bla")])],2),a("div",{staticClass:"dragzone",style:"visibility: "+t.dropzone.visibility+"; opacity: "+t.dropzone.hidden},[a("div",{staticClass:"textnode"},[t._v("Drop files to add gcode.")])])],1),a("v-menu",{attrs:{"position-x":t.contextMenu.x,"position-y":t.contextMenu.y,absolute:"","offset-y":""},model:{value:t.contextMenu.shown,callback:function(e){t.$set(t.contextMenu,"shown",e)},expression:"contextMenu.shown"}},[a("v-list",[t.contextMenu.item.isDirectory?t._e():a("v-list-item",{attrs:{disabled:t.is_printing},on:{click:function(e){return t.clickRow(t.contextMenu.item)}}},[a("v-icon",{staticClass:"mr-1"},[t._v("mdi-play")]),t._v(" Print start ")],1),"first_layer_extr_temp"in t.contextMenu.item&&t.contextMenu.item.first_layer_extr_temp>0&&"first_layer_bed_temp"in t.contextMenu.item&&t.contextMenu.item.first_layer_bed_temp>0?a("v-list-item",{attrs:{disabled:["error","printing","paused"].includes(t.printer_state)},on:{click:t.preheat}},[a("v-icon",{staticClass:"mr-1"},[t._v("mdi-fire")]),t._v(" Preheat ")],1):t._e(),t.contextMenu.item.isDirectory?t._e():a("v-list-item",{on:{click:t.downloadFile}},[a("v-icon",{staticClass:"mr-1"},[t._v("mdi-cloud-download")]),t._v(" Download ")],1),t.contextMenu.item.isDirectory?a("v-list-item",{on:{click:function(e){return t.renameDirectory(t.contextMenu.item)}}},[a("v-icon",{staticClass:"mr-1"},[t._v("mdi-rename-box")]),t._v(" Rename ")],1):t._e(),t.contextMenu.item.isDirectory?t._e():a("v-list-item",{on:{click:function(e){return t.renameFile(t.contextMenu.item)}}},[a("v-icon",{staticClass:"mr-1"},[t._v("mdi-rename-box")]),t._v(" Rename ")],1),t.contextMenu.item.isDirectory?t._e():a("v-list-item",{on:{click:t.removeFile}},[a("v-icon",{staticClass:"mr-1"},[t._v("mdi-delete")]),t._v(" Delete ")],1),t.contextMenu.item.isDirectory?a("v-list-item",{on:{click:t.deleteDirectoryAction}},[a("v-icon",{staticClass:"mr-1"},[t._v("mdi-delete")]),t._v(" Delete ")],1):t._e()],1)],1),a("v-dialog",{attrs:{"max-width":t.getThumbnailWidth(t.dialogPrintFile.item)},model:{value:t.dialogPrintFile.show,callback:function(e){t.$set(t.dialogPrintFile,"show",e)},expression:"dialogPrintFile.show"}},[a("v-card",[t.existsBigThumbnail(t.dialogPrintFile.item)?a("v-img",{attrs:{contain:"",src:"data:image/gif;base64,"+t.getBigThumbnail(t.dialogPrintFile.item)}}):t._e(),a("v-card-title",{staticClass:"headline"},[t._v("Start Job")]),a("v-card-text",[t._v("Do you want to start "+t._s(t.dialogPrintFile.item.filename)+"?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(e){t.dialogPrintFile.show=!1}}},[t._v("No")]),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){return t.startPrint(t.dialogPrintFile.item.filename)}}},[t._v("Yes")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"400"},model:{value:t.dialogCreateDirectory.show,callback:function(e){t.$set(t.dialogCreateDirectory,"show",e)},expression:"dialogCreateDirectory.show"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("New Directory")]),a("v-card-text",[t._v(" Please enter a new directory name: "),a("v-text-field",{attrs:{label:"Name",rules:t.input_rules,required:""},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.createDirectoryAction(e)}},model:{value:t.dialogCreateDirectory.name,callback:function(e){t.$set(t.dialogCreateDirectory,"name",e)},expression:"dialogCreateDirectory.name"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"",text:""},on:{click:function(e){t.dialogCreateDirectory.show=!1}}},[t._v("Cancel")]),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.createDirectoryAction}},[t._v("create")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"400"},model:{value:t.dialogRenameFile.show,callback:function(e){t.$set(t.dialogRenameFile,"show",e)},expression:"dialogRenameFile.show"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("Rename File")]),a("v-card-text",[a("v-text-field",{ref:"inputFieldNewName",attrs:{label:"Name",required:""},model:{value:t.dialogRenameFile.newName,callback:function(e){t.$set(t.dialogRenameFile,"newName",e)},expression:"dialogRenameFile.newName"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"",text:""},on:{click:function(e){t.dialogRenameFile.show=!1}}},[t._v("Cancel")]),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.renameFileAction}},[t._v("rename")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"400"},model:{value:t.dialogRenameDirectory.show,callback:function(e){t.$set(t.dialogRenameDirectory,"show",e)},expression:"dialogRenameDirectory.show"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("Rename Directory")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Name",required:""},model:{value:t.dialogRenameDirectory.newName,callback:function(e){t.$set(t.dialogRenameDirectory,"newName",e)},expression:"dialogRenameDirectory.newName"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"",text:""},on:{click:function(e){t.dialogRenameDirectory.show=!1}}},[t._v("Cancel")]),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.renameDirectoryAction}},[t._v("rename")])],1)],1)],1),a("v-snackbar",{attrs:{timeout:-1,value:!0,fixed:"",right:"",bottom:"",dark:""},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({staticStyle:{"min-width":"auto"},attrs:{color:"red",text:""},on:{click:t.cancelUpload}},"v-btn",i,!1),[a("v-icon",{staticClass:"0"},[t._v("mdi-close")])],1)]}}]),model:{value:t.uploadSnackbar.status,callback:function(e){t.$set(t.uploadSnackbar,"status",e)},expression:"uploadSnackbar.status"}},[t.uploadSnackbar.max>1?a("span",{staticClass:"mr-1"},[t._v("("+t._s(t.uploadSnackbar.number)+"/"+t._s(t.uploadSnackbar.max)+")")]):t._e(),a("strong",[t._v("Uploading "+t._s(t.uploadSnackbar.filename))]),a("br"),t._v(" "+t._s(Math.round(t.uploadSnackbar.percent))+" % @ "+t._s(t.formatFilesize(Math.round(t.uploadSnackbar.speed)))+"/s"),a("br"),a("v-progress-linear",{staticClass:"mt-2",attrs:{value:t.uploadSnackbar.percent}})],1)],1)},Ft=[],Et=(a("c740"),a("baa5"),a("13d5"),a("4fad"),a("53ca")),Rt=a("bc3a"),At=a.n(Rt),Lt={data:function(){return{search:"",sortBy:"modified",sortDesc:!0,selected:[],hideHeaderColums:[],dialogPrintFile:{show:!1,item:{}},dialogCreateDirectory:{show:!1,name:""},dialogRenameFile:{show:!1,newName:"",item:{}},dialogRenameDirectory:{show:!1,newName:"",item:{}},headers:[{text:"",value:"",align:"left",configable:!1,visible:!0,filterable:!1},{text:"Name",value:"filename",align:"left",configable:!1,visible:!0},{text:"Filesize",value:"size",align:"right",configable:!0,visible:!0},{text:"Last modified",value:"modified",align:"right",configable:!0,visible:!0},{text:"Object Height",value:"object_height",align:"right",configable:!0,visible:!0},{text:"Layer Height",value:"layer_height",align:"right",configable:!0,visible:!0},{text:"Filament Usage",value:"filament_total",align:"right",configable:!0,visible:!0},{text:"Print Time",value:"estimated_time",align:"right",configable:!0,visible:!0},{text:"Slicer",value:"slicer",align:"right",configable:!0,visible:!0}],options:{},contextMenu:{shown:!1,isDirectory:!1,touchTimer:void 0,x:0,y:0,item:{}},dropzone:{visibility:"hidden",opacity:0},files:[],currentPath:"gcodes",draggingFile:{status:!1,item:{}},input_rules:[function(t){return-1===t.indexOf(" ")||"Name contain spaces!"}],uploadSnackbar:{status:!1,filename:"",percent:0,speed:0,total:0,number:0,max:0,cancelTokenSource:"",lastProgress:{time:0,loaded:0}}}},computed:Object(m["a"])(Object(m["a"])(Object(m["a"])({},Object(h["e"])({filetree:function(t){return t.files.filetree},hostname:function(t){return t.socket.hostname},port:function(t){return t.socket.port},loadings:function(t){return t.socket.loadings},printer_state:function(t){return t.printer.print_stats.state},displayMetadata:function(t){return t.gui.gcodefiles.showMetadata}})),Object(h["c"])(["is_printing"])),{},{configHeaders:function(){return this.headers.filter((function(t){return!0===t.configable}))},filteredHeaders:function(){return this.headers.filter((function(t){return!0===t.visible}))},showHiddenFiles:{get:function(){return this.$store.state.gui.gcodefiles.showHiddenFiles},set:function(t){return this.$store.dispatch("gui/setSettings",{gcodefiles:{showHiddenFiles:t}})}},countPerPage:{get:function(){return this.$store.state.gui.gcodefiles.countPerPage},set:function(t){return this.$store.dispatch("gui/setSettings",{gcodefiles:{countPerPage:t}})}},hideMetadataColums:{get:function(){return this.$store.state.gui.gcodefiles.hideMetadataColums},set:function(t){return this.$store.dispatch("gui/setSettings",{gcodefiles:{hideMetadataColums:t}})}},disk_usage:{get:function(){return this.$store.getters["files/getDiskUsage"](this.currentPath)}}}),created:function(){this.loadPath()},mounted:function(){var t=this;this.hideMetadataColums.forEach((function(e){var a=t.headers.find((function(t){return t.value===e}));a&&(a.visible=!1)}))},methods:{uploadFile:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var a,i,n,r,s,o,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.$refs.fileUpload.files.length){e.next=28;break}t.$store.commit("socket/addLoading",{name:"gcodeUpload"}),a=[],t.uploadSnackbar.number=0,t.uploadSnackbar.max=t.$refs.fileUpload.files.length,i=Object(d["a"])(t.$refs.fileUpload.files),e.prev=6,i.s();case 8:if((n=i.n()).done){e.next=17;break}return r=n.value,t.uploadSnackbar.number++,e.next=13,t.doUploadFile(r);case 13:s=e.sent,a.push(s);case 15:e.next=8;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](6),i.e(e.t0);case 22:return e.prev=22,i.f(),e.finish(22);case 25:for(t.$store.commit("socket/removeLoading",{name:"gcodeUpload"}),o=0,c=a;o<c.length;o++)l=c[o],t.$toast.success("Upload of "+l+" successful!");t.$refs.fileUpload.value="";case 28:case"end":return e.stop()}}),e,null,[[6,19,22,25]])})))()},doUploadFile:function(t){var e=this,a=this.$toast,i=new FormData,n=t.name.replace(" ","_");return this.uploadSnackbar.filename=n,this.uploadSnackbar.status=!0,this.uploadSnackbar.percent=0,this.uploadSnackbar.speed=0,this.uploadSnackbar.lastProgress.loaded=0,this.uploadSnackbar.lastProgress.time=0,i.append("file",t,(this.currentPath+"/"+n).substring(7)),new Promise((function(t){e.uploadSnackbar.cancelTokenSource=At.a.CancelToken.source(),At.a.post("//"+e.hostname+":"+e.port+"/server/files/upload",i,{cancelToken:e.uploadSnackbar.cancelTokenSource.token,headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(t){if(e.uploadSnackbar.percent=100*t.loaded/t.total,e.uploadSnackbar.lastProgress.time){var a=t.timeStamp-e.uploadSnackbar.lastProgress.time,i=t.loaded-e.uploadSnackbar.lastProgress.loaded;a&&(e.uploadSnackbar.speed=i/(a/1e3))}e.uploadSnackbar.lastProgress.time=t.timeStamp,e.uploadSnackbar.lastProgress.loaded=t.loaded,e.uploadSnackbar.total=t.total}}).then((function(a){e.uploadSnackbar.status=!1,t(a.data.result)})).catch((function(){e.uploadSnackbar.status=!1,e.$store.commit("socket/removeLoading",{name:"gcodeUpload"}),a.error("Cannot upload the file!")}))}))},clickUploadButton:function(){this.$refs.fileUpload.click()},cancelUpload:function(){this.uploadSnackbar.cancelTokenSource.cancel(),this.uploadSnackbar.status=!1},refreshFileList:function(){this.$socket.sendObj("server.files.get_directory",{path:this.currentPath},"files/getDirectory")},formatDate:function(t){var e=new Date(t);return e.toLocaleString().replace(",","")},formatFilesize:function(t){var e=-1,a=[" kB"," MB"," GB"," TB","PB","EB","ZB","YB"];do{t/=1024,e++}while(t>1024);return Math.max(t,.1).toFixed(1)+a[e]},formatPrintTime:function(t){if(t){var e="",a=Math.floor(t/86400);a&&(t%=86400,e+=a+"d");var i=Math.floor(t/3600);t%=3600,i&&(e+=" "+i+"h");var n=Math.floor(t/60);n&&(e+=" "+n+"m");var r=t%60;return r&&(e+=" "+r.toFixed(0)+"s"),e}return"--"},showContextMenu:function(t,e){var a=this;t.preventDefault(),this.contextMenu.shown=!0,this.contextMenu.x=t.clientX,this.contextMenu.y=t.clientY,this.contextMenu.item=e,this.$nextTick((function(){a.contextMenu.shown=!0}))},preheat:function(){if("first_layer_extr_temp"in this.contextMenu.item&&"first_layer_bed_temp"in this.contextMenu.item&&!["error","printing","paused"].includes(this.printer_state)){var t="";this.contextMenu.item.first_layer_extr_temp>0&&(t="M104 S"+this.contextMenu.item.first_layer_extr_temp,this.$store.commit("server/addEvent",{message:t,type:"command"}),this.$socket.sendObj("printer.gcode.script",{script:t})),this.contextMenu.item.first_layer_bed_temp>0&&(t="M140 S"+this.contextMenu.item.first_layer_bed_temp,this.$store.commit("server/addEvent",{message:t,type:"command"}),this.$socket.sendObj("printer.gcode.script",{script:t}))}},downloadFile:function(){var t=this.currentPath+"/"+this.contextMenu.item.filename,e=document.createElement("a");e.download=name,e.href="//"+this.hostname+":"+this.port+"/server/files/"+encodeURI(t),document.body.appendChild(e),e.click(),document.body.removeChild(e)},renameFile:function(t){this.dialogRenameFile.item=t,this.dialogRenameFile.newName=t.filename,this.dialogRenameFile.show=!0},renameFileAction:function(){this.dialogRenameFile.show=!1,this.$socket.sendObj("server.files.move",{source:this.currentPath+"/"+this.dialogRenameFile.item.filename,dest:this.currentPath+"/"+this.dialogRenameFile.newName},"files/getMove")},renameDirectory:function(t){this.dialogRenameDirectory.item=t,this.dialogRenameDirectory.newName=t.filename,this.dialogRenameDirectory.show=!0},renameDirectoryAction:function(){this.dialogRenameDirectory.show=!1,this.$socket.sendObj("server.files.move",{source:this.currentPath+"/"+this.dialogRenameDirectory.item.filename,dest:this.currentPath+"/"+this.dialogRenameDirectory.newName},"files/getMove")},removeFile:function(){this.$socket.sendObj("server.files.delete_file",{path:this.currentPath+"/"+this.contextMenu.item.filename},"files/getDeleteFile")},createDirectory:function(){this.dialogCreateDirectory.name="",this.dialogCreateDirectory.show=!0},createDirectoryAction:function(){this.dialogCreateDirectory.name.length&&-1===this.dialogCreateDirectory.name.indexOf(" ")&&(this.dialogCreateDirectory.show=!1,this.$socket.sendObj("server.files.post_directory",{path:this.currentPath+"/"+this.dialogCreateDirectory.name},"files/getCreateDir"))},deleteDirectoryAction:function(){this.$socket.sendObj("server.files.delete_directory",{path:this.currentPath+"/"+this.contextMenu.item.filename},"files/getDeleteDir")},clickRow:function(t){t.isDirectory?(this.currentPath+="/"+t.filename,this.loadPath()):(this.dialogPrintFile.show=!0,this.dialogPrintFile.item=t)},clickRowGoBack:function(){this.currentPath=this.currentPath.substr(0,this.currentPath.lastIndexOf("/"))},loadPath:function(){this.$socket.sendObj("server.files.get_directory",{path:this.currentPath},"files/getDirectory");var t=this.currentPath.split("/");this.files=st(this.filetree,t),this.showHiddenFiles||(this.files=this.files.filter((function(t){return"thumbs"!==t.filename&&"."!==t.filename.substr(0,1)})))},startPrint:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t=(this.currentPath+"/"+t).substring(7),this.dialogPrintFile.show=!1,this.$socket.sendObj("printer.print.start",{filename:t},"switchToDashboard")},dragOverUpload:function(t){this.draggingFile.status||(t.preventDefault(),t.stopPropagation(),this.dropzone.visibility="visible",this.dropzone.opacity=1)},dragLeaveUpload:function(t){this.draggingFile.status||(t.preventDefault(),t.stopPropagation(),this.dropzone.visibility="hidden",this.dropzone.opacity=0)},dragDropUpload:function(t){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.draggingFile.status){a.next=7;break}if(t.preventDefault(),e.dropzone.visibility="hidden",e.dropzone.opacity=0,!t.dataTransfer.files.length){a.next=7;break}return a.next=7,e.doUploadFile(t.dataTransfer.files[0]);case 7:case"end":return a.stop()}}),a)})))()},dragFile:function(t,e){t.preventDefault(),this.draggingFile.status=!0,this.draggingFile.item=e},dragendFile:function(t){t.preventDefault(),this.draggingFile.status=!1,this.draggingFile.item={}},dragOverFilelist:function(t,e){this.draggingFile.status&&(t.preventDefault(),e.isDirectory&&(t.target.parentElement.style.backgroundColor="#43A04720"))},dragLeaveFilelist:function(t){this.draggingFile.status&&(t.preventDefault(),t.stopPropagation(),t.target.parentElement.style.backgroundColor="transparent")},dragDropFilelist:function(t,e){var a=this;return Object(u["a"])(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:a.draggingFile.status&&(t.preventDefault(),t.target.parentElement.style.backgroundColor="transparent",n="",n=".."===e.filename?a.currentPath.substring(0,a.currentPath.lastIndexOf("/")+1)+a.draggingFile.item.filename:a.currentPath+"/"+e.filename+"/"+a.draggingFile.item.filename,a.$socket.sendObj("server.files.move",{source:a.currentPath+"/"+a.draggingFile.item.filename,dest:n},"files/getMove"));case 1:case"end":return i.stop()}}),i)})))()},sortFiles:function(t,e,a){return e=e.length?e[0]:"filename",a=a[0],void 0!==t&&(t.sort((function(t,a){if(t[e]===a[e])return 0;if(null===t[e]||void 0===t[e])return-1;if(null===a[e]||void 0===a[e])return 1;if(t[e].constructor===String&&a[e].constructor===String)return t[e].localeCompare(a[e],void 0,{sensivity:"base"});if(t[e]instanceof Array&&a[e]instanceof Array){var i=t[e].length?t.filament.reduce((function(t,e){return t+e})):0,n=a[e].length?a.filament.reduce((function(t,e){return t+e})):0;return i-n}return t[e]-a[e]})),a&&t.reverse(),t.sort((function(t,e){return t.isDirectory===e.isDirectory?0:t.isDirectory?-1:1}))),t},refreshMetadata:function(t){for(var e=this.sortFiles(this.files,[this.sortBy],[this.sortDesc]),a=t.pageStart;a<t.pageStop;a++)if(e[a]&&!e[a].isDirectory&&!e[a].metadataPulled){var i=(this.currentPath+"/"+e[a].filename).substring(7);this.$socket.sendObj("server.files.metadata",{filename:i},"files/getMetadata")}},advancedSearch:function(t,e){return null!=t&&null!=e&&"string"===typeof t&&-1!==t.toString().toLowerCase().indexOf(e.toLowerCase())},changeMetadataVisible:function(t){if(this.headers.filter((function(e){return e.value===t})).length){var e=this.headers.filter((function(e){return e.value===t}))[0].visible;this.$store.dispatch("gui/setGcodefilesMetadata",{name:t,value:e})}},existsSmallThumbnail:function(t){return"thumbnails"in t&&void 0!==t.thumbnails&&-1!==t.thumbnails.findIndex((function(t){return t.width>=32&&t.width<=64&&t.height>=32&&t.height<=64}))},getSmallThumbnail:function(t){if(this.existsSmallThumbnail(t)){var e=t.thumbnails.find((function(t){return t.width>=32&&t.width<=64&&t.height>=32&&t.height<=64}));if(e)return e.data}return""},existsBigThumbnail:function(t){return"thumbnails"in t&&void 0!==t.thumbnails&&-1!==t.thumbnails.findIndex((function(t){return t.width>=300&&t.width<=400}))},getBigThumbnail:function(t){if(this.existsBigThumbnail(t)){var e=t.thumbnails.find((function(t){return t.width>=300&&t.width<=400}));if(e)return e.data}return""},getThumbnailWidth:function(t){if(this.existsBigThumbnail(t)){var e=t.thumbnails.find((function(t){return t.width>=300&&t.width<=400}));if(e)return e.width}return 400}},watch:{filetree:{deep:!0,handler:function(t){var e=this.currentPath.split("/");this.files=st(t,e),this.showHiddenFiles||(this.files=this.files.filter((function(t){return"thumbs"!==t.filename&&"."!==t.filename.substr(0,1)})))}},currentPath:{handler:function(t){var e=t.split("/");this.files=st(this.filetree,e),this.showHiddenFiles||(this.files=this.files.filter((function(t){return"thumbs"!==t.filename&&"."!==t.filename.substr(0,1)})))}},displayMetadata:{deep:!0,handler:function(t){var e=this;void 0!==t&&"object"===Object(Et["a"])(t)&&Object.entries(t).forEach((function(t){e.headers.filter((function(e){return e.value===t[0]})).length&&(e.headers.filter((function(e){return e.value===t[0]}))[0].visible=t[1])}))}},showHiddenFiles:function(){this.loadPath()},hideMetadataColums:function(t){var e=this;t.forEach((function(t){var a=e.headers.find((function(e){return e.value===t}));a&&(a.visible=!1)}))}}},It=Lt,Ht=(a("b5f2"),a("f41f")),Ut=a("ce7e"),Nt=a("8e36"),Bt=a("2db4"),qt=a("3a2f"),Wt=Object(y["a"])(It,Mt,Ft,!1,null,null,null),Gt=Wt.exports;k()(Wt,{VBtn:x["a"],VCard:S["a"],VCardActions:P["a"],VCardSubtitle:P["b"],VCardText:P["c"],VCardTitle:P["d"],VCheckbox:pt["a"],VDataFooter:Ht["a"],VDataTable:ft["a"],VDialog:Pt["a"],VDivider:Ut["a"],VIcon:V["a"],VImg:J["a"],VItemGroup:Ot["b"],VList:ht["a"],VListItem:vt["a"],VMenu:gt["a"],VProgressLinear:Nt["a"],VSnackbar:Bt["a"],VSpacer:Vt["a"],VTextField:bt["a"],VTooltip:qt["a"]});var zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"px-0 py-0",attrs:{fluid:""}},[a("v-row",[a("v-col",[a("router-view")],1)],1)],1)},Yt=[],Zt={},Xt=Zt,Jt=Object(y["a"])(Xt,zt,Yt,!1,null,null,null),Kt=Jt.exports;k()(Jt,{VCol:O["a"],VContainer:D["a"],VRow:j["a"]});var Qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",[a("v-col",{staticClass:"col-12 col-md-6 col-lg-4"},[a("settings-general-panel"),a("settings-webcam-panel",{staticClass:"mt-6"}),a("settings-dashboard-panel",{staticClass:"mt-6"}),a("settings-console-panel",{staticClass:"mt-6"})],1),a("v-col",{staticClass:"col-12 col-md-6 col-lg-4"},[a("settings-macros-panel")],1),a("v-col",{staticClass:"col-12 col-md-6 col-lg-4"},[a("settings-presets-panel"),a("settings-remote-printers-panel",{staticClass:"mt-6"}),a("settings-control-panel",{staticClass:"mt-6"})],1)],1)],1)},te=[],ee={computed:Object(m["a"])({},Object(h["e"])({})),methods:Object(m["a"])({},Object(h["b"])([]))},ae=ee,ie=Object(y["a"])(ae,Qt,te,!1,null,null,null),ne=ie.exports;k()(ie,{VCol:O["a"],VRow:j["a"]});var re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:"","py-0":"","px-0":""}},[a("v-row",[a("v-col",{staticClass:"col-12 col-sm-6"},[a("settings-config-files-panel")],1),a("v-col",{staticClass:"col-12 col-sm-6"},["ready"===t.klippy_state?a("settings-limits-panel"):t._e(),"ready"!==t.klippy_state?a("klippy-state-panel"):t._e(),t.updateManager?a("settings-update-panel",{staticClass:"mt-6"}):t._e(),a("v-row",{staticClass:"mt-6"},["ready"===t.klippy_state?a("v-col",{staticClass:"col-md-6"},[a("settings-endstop-panel"),a("settings-runout-panel")],1):t._e(),a("v-col",{class:"ready"!==t.klippy_state?"col-md-12":"col-md-6"},[a("settings-logfiles-panel")],1)],1)],1)],1)],1)},se=[],oe={data:function(){return{}},computed:Object(m["a"])(Object(m["a"])({},Object(h["e"])({klippy_state:function(t){return t.server.klippy_state}})),{},{updateManager:{get:function(){return this.$store.state.server.plugins.includes("update_manager")}}}),created:function(){},watch:{}},ce=oe,le=Object(y["a"])(ce,re,se,!1,null,null,null),de=le.exports;k()(le,{VCol:O["a"],VContainer:D["a"],VRow:j["a"]});var ue=[{title:"Dashboard",path:"/",icon:"monitor-dashboard",component:L,alwaysShow:!0},{title:"Printers",path:"/allPrinters",component:it,alwaysShow:!1},{title:"Webcam",path:"/cam",icon:"webcam",component:q,alwaysShow:!1},{title:"Console",path:"/console",icon:"console-line",component:yt,alwaysShow:!0},{title:"Heightmap",path:"/heightmap",icon:"grid",component:$t,alwaysShow:!1},{title:"G-Code Files",path:"/files",icon:"printer-3d-nozzle",component:Gt,alwaysShow:!1},{title:"Settings",path:"/settings",redirect:"/settings/machine",icon:"wrench",component:Kt,alwaysShow:!0,children:[{title:"Machine",path:"/settings/machine",component:de,alwaysShow:!0},{title:"Interface",path:"/settings/interface",component:ne,alwaysShow:!0}]}],me=ue,pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{bottom:"",left:"","offset-y":!0,"close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({attrs:{dark:"",icon:""}},"v-btn",n,!1),i),[a("v-icon",[t._v("mdi-dots-vertical")])],1)]}}]),model:{value:t.showMenu,callback:function(e){t.showMenu=e},expression:"showMenu"}},[a("v-list",{attrs:{dense:""}},[a("v-subheader",{staticStyle:{height:"auto"}},[t._v("Klipper Control")]),a("v-list-item",{staticClass:"minheight30",attrs:{link:""},on:{click:function(e){return t.doRestart()}}},[a("v-list-item-title",[a("v-icon",{staticClass:"mr-2",attrs:{small:""}},[t._v("mdi-restart")]),t._v("Restart")],1)],1),a("v-list-item",{staticClass:"minheight30",attrs:{link:""},on:{click:function(e){return t.doFirmwareRestart()}}},[a("v-list-item-title",[a("v-icon",{staticClass:"mr-2",attrs:{small:""}},[t._v("mdi-restart")]),t._v("Firmware Restart")],1)],1),a("v-divider",{staticClass:"mt-0"}),a("v-subheader",{staticClass:"pt-2",staticStyle:{height:"auto"}},[t._v("Restart Services")]),a("v-list-item",{staticClass:"minheight30",attrs:{link:""},on:{click:function(e){return t.doServiceRestartKlipper()}}},[a("v-list-item-title",[a("v-icon",{staticClass:"mr-2",attrs:{small:""}},[t._v("mdi-restart")]),t._v("Klipper")],1)],1),a("v-list-item",{staticClass:"minheight30",attrs:{link:""},on:{click:function(e){return t.doServiceRestartMoonraker()}}},[a("v-list-item-title",[a("v-icon",{staticClass:"mr-2",attrs:{small:""}},[t._v("mdi-restart")]),t._v("Moonraker")],1)],1),t.countPowerDevices?a("div",[a("v-divider",{staticClass:"mt-0"}),a("v-subheader",{staticClass:"pt-2",staticStyle:{height:"auto"}},[t._v("Power Devices")]),t._l(t.devices,(function(e,i){return a("v-list-item",{key:i,staticClass:"minheight30",attrs:{disabled:"error"===e.status||e.locked_while_printing&&["printing","paused"].includes(t.printer_state)},on:{click:function(a){return t.changeSwitch(e,e.status)}}},[a("v-list-item-title",[a("v-icon",{staticClass:"mr-2",attrs:{color:"on"===e.status?"":"grey darken-2"}},[t._v("mdi-"+t._s("on"===e.status?"toggle-switch":"toggle-switch-off"))]),t._v(t._s(e.device)+" ")],1)],1)}))],2):t._e(),a("v-divider",{staticClass:"mt-0"}),a("v-subheader",{staticClass:"pt-2",staticStyle:{height:"auto"}},[t._v("Host Control")]),a("v-list-item",{staticClass:"minheight30",attrs:{link:""},on:{click:function(e){return t.doHostReboot()}}},[a("v-list-item-title",[a("v-icon",{staticClass:"mr-2",attrs:{small:""}},[t._v("mdi-power")]),t._v("Reboot")],1)],1),a("v-list-item",{staticClass:"minheight30",attrs:{link:""},on:{click:function(e){return t.doHostShutdown()}}},[a("v-list-item-title",[a("v-icon",{staticClass:"mr-2",attrs:{small:""}},[t._v("mdi-power")]),t._v("Shutdown")],1)],1)],1)],1)},fe=[],he=a("ade3"),ve={name:"TopCornerMenu.vue",data:function(){return{showMenu:!1}},computed:Object(m["a"])(Object(m["a"])({},Object(h["e"])({printer_state:function(t){return t.printer.print_stats.state},devices:function(t){return t.server.power.devices}})),{},{countPowerDevices:{get:function(){return this.$store.getters["server/power/count"]}}}),methods:{changeSwitch:function(t,e){this.setPower(t,"off"===e?1:0)},setPower:function(t,e){var a=1===e?"machine.device_power.on":"machine.device_power.off";i["a"].prototype.$socket.sendObj(a,Object(he["a"])({},t.device,null),"server/power/responseToggle")},doRestart:function(){this.showMenu=!1,this.$store.commit("server/addEvent",{message:"RESTART",type:"command"}),this.$socket.sendObj("printer.gcode.script",{script:"RESTART"})},doFirmwareRestart:function(){this.showMenu=!1,this.$store.commit("server/addEvent",{message:"FIRMWARE_RESTART",type:"command"}),this.$socket.sendObj("printer.gcode.script",{script:"FIRMWARE_RESTART"})},doServiceRestartKlipper:function(){this.showMenu=!1,this.$socket.sendObj("machine.services.restart",{service:"klipper"})},doServiceRestartMoonraker:function(){this.showMenu=!1,this.$socket.sendObj("machine.services.restart",{service:"moonraker"})},doHostReboot:function(){this.showMenu=!1,this.$socket.sendObj("machine.reboot",{})},doHostShutdown:function(){this.showMenu=!1,this.$socket.sendObj("machine.shutdown",{})}}},ge=ve,be=(a("f44e"),a("5d23")),_e=a("e0c7"),ye=Object(y["a"])(ge,pe,fe,!1,null,"65b96720",null),Ce=ye.exports;k()(ye,{VBtn:x["a"],VDivider:Ut["a"],VIcon:V["a"],VList:ht["a"],VListItem:vt["a"],VListItemTitle:be["c"],VMenu:gt["a"],VSubheader:_e["a"]});var ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{value:""!==t.application,persistent:"",width:"60%","max-width":"800"}},[a("v-card",{attrs:{dark:"",loading:!t.complete}},[a("template",{slot:"progress"},[a("v-progress-linear",{attrs:{color:"primary",indeterminate:""}})],1),a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{attrs:{left:""}},[t._v("mdi-update")]),t._v("Updating "+t._s(t.application)+t._s(t.complete?" done!":"..."))],1)])],1),a("v-card-text",{staticClass:"py-6"},[a("v-data-table",{ref:"updaterLog",staticClass:"updaterLog",attrs:{headers:t.headers,options:t.options,items:t.messages,"item-key":"date","hide-default-footer":"","hide-default-header":"","disable-pagination":"","custom-sort":t.customSort,"sort-by":"date","sort-desc":!0,color:"primary"},scopedSlots:t._u([{key:"no-data",fn:function(){return[a("div",{staticClass:"py-2"},[t._v("empty")])]},proxy:!0},{key:"item",fn:function(e){var i=e.item;return[a("tr",[a("td",{staticClass:"log-cell title-cell py-2"},[t._v(" "+t._s(t.formatTime(i.date))+" ")]),a("td",{staticClass:"log-cell content-cell pl-0 py-2",staticStyle:{width:"100%"},attrs:{colspan:"2"}},[i.message?a("span",{staticClass:"message",domProps:{innerHTML:t._s(i.message)}}):t._e()])])]}}])}),a("v-row",[a("v-col",{staticClass:"text-center pt-5"},[a("v-btn",{attrs:{disabled:!t.complete,color:"primary"},on:{click:t.close}},[t._v("close")])],1)],1)],1)],2)],1)},xe=[],we={name:"UpdateDialog.vue",data:function(){return{headers:[{text:"Date",value:"date",width:"1%",dateType:"Date"},{text:"Message",sortable:!1,value:"message",width:"99%"}],options:{}}},computed:Object(m["a"])({},Object(h["e"])({application:function(t){return t.server.updateManager.updateResponse.application},complete:function(t){return t.server.updateManager.updateResponse.complete},messages:function(t){return t.server.updateManager.updateResponse.messages}})),methods:{formatTime:function(t){var e=t.getHours();e<10&&(e="0"+e.toString());var a=t.getMinutes();a<10&&(a="0"+a.toString());var i=t.getSeconds();return i<10&&(i="0"+i.toString()),e+":"+a+":"+i},customSort:function(t,e,a){return t.sort((function(t,i){return"date"===e[0]?a[0]?new Date(t[e])-new Date(i[e]):new Date(i[e])-new Date(t[e]):"undefined"!==typeof t[e]?a[0]?i[e].toLowerCase().localeCompare(t[e].toLowerCase()):t[e].toLowerCase().localeCompare(i[e].toLowerCase()):void 0})),t},close:function(){null!==this.application&&this.complete&&["client","mainsail"].includes(this.application.toLowerCase())?window.location.reload(!0):(this.$store.commit("server/updateManager/resetUpdateResponse"),this.$socket.sendObj("machine.update.status",{refresh:!1},"server/updateManager/getStatus"))}},updated:function(){this.$refs.updaterLog&&(this.$refs.updaterLog.$el.scrollTop=this.$refs.updaterLog.$el.scrollHeight)}},Se=we,Pe=(a("dcac"),Object(y["a"])(Se,ke,xe,!1,null,"ac9608d2",null)),Oe=Pe.exports;k()(Pe,{VBtn:x["a"],VCard:S["a"],VCardText:P["c"],VCol:O["a"],VDataTable:ft["a"],VDialog:Pt["a"],VIcon:V["a"],VProgressLinear:Nt["a"],VRow:j["a"],VToolbar:T["a"],VToolbarTitle:$["b"]});var De=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"",width:400},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[a("v-card",{attrs:{dark:""}},[a("v-toolbar",{attrs:{flat:"",dense:"",color:"primary"}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{staticClass:"mdi mdi-connection",attrs:{left:""}}),t._v("Connecting"),t.connectingFailed?a("span",[t._v(" failed")]):t._e(),t.isConnecting?a("span",[t._v(" to "+t._s(80!==parseInt(t.port)&&""!==t.port?t.hostname+":"+t.port:t.hostname))]):t._e()],1)])],1),t.isConnecting?a("v-card-text",{staticClass:"pt-5"},[a("v-progress-linear",{attrs:{color:"white",indeterminate:""}})],1):t._e(),!t.isConnecting&&t.connectingFailed?a("v-card-text",{staticClass:"pt-5"},[a("p",[t._v("Cannot not connect to "+t._s(80!==parseInt(t.port)&&""!==t.port?t.hostname+":"+t.port:t.hostname)+".")]),a("div",{staticClass:"text-center"},[a("v-btn",{attrs:{color:"primary"},on:{click:t.reconnect}},[t._v("try again")])],1)]):t._e()],1)],1)},Ve=[],je={data:function(){return{showDialog:!0}},computed:Object(m["a"])(Object(m["a"])({},Object(h["e"])({isConnected:function(t){return t.socket.isConnected},isConnecting:function(t){return t.socket.isConnecting},connectingFailed:function(t){return t.socket.connectingFailed}})),{},{protocol:{get:function(){return this.$store.state.socket.protocol}},hostname:{get:function(){return this.$store.state.socket.hostname},set:function(t){return this.$store.dispatch("socket/setData",{hostname:t})}},port:{get:function(){return this.$store.state.socket.port},set:function(t){return this.$store.dispatch("socket/setData",{port:t})}}}),methods:{connect:function(){window.console.log("save connection"),i["a"].prototype.$socket.setUrl(this.protocol+"://"+this.hostname+":"+this.port+"/websocket"),i["a"].prototype.$socket.connect()},reconnect:function(){this.$store.dispatch("socket/setData",{connectingFailed:!1}),i["a"].prototype.$socket.connect()}},mounted:function(){this.tmpHostname=this.hostname+":"+this.port},watch:{isConnected:function(t){this.showDialog=!t}}},Te=je,$e=Object(y["a"])(Te,De,Ve,!1,null,"a74fa77a",null),Me=$e.exports;k()($e,{VBtn:x["a"],VCard:S["a"],VCardText:P["c"],VDialog:Pt["a"],VIcon:V["a"],VProgressLinear:Nt["a"],VToolbar:T["a"],VToolbarTitle:$["b"]});var Fe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"",width:400},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[a("v-card",{attrs:{dark:""}},[a("v-toolbar",{attrs:{flat:"",dense:"",color:"primary"}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{staticClass:"mdi mdi-connection",attrs:{left:""}}),t.isConnecting?a("span",[t._v("Connection to "+t._s(80!==parseInt(t.port)?t.hostname+":"+t.port:t.hostname))]):t._e(),t.connectingFailed?a("span",[t._v("Connection failed")]):t._e(),t.isConnecting||t.connectingFailed||t.dialogAddPrinter.bool||t.dialogEditPrinter.bool?t._e():a("span",[t._v("Select Printer")]),t.dialogAddPrinter.bool?a("span",[t._v("Add Printer")]):t._e(),t.dialogEditPrinter.bool?a("span",[t._v("Edit Printer")]):t._e()],1)]),a("v-spacer"),t.isConnecting||t.connectingFailed||t.dialogAddPrinter.bool||t.dialogEditPrinter.bool||!(this["farm/countPrinters"]>0)?t._e():a("v-btn",{staticClass:"minwidth-0",attrs:{small:""},on:{click:t.checkPrinters}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-sync")])],1),t.isConnecting||t.connectingFailed||!t.dialogAddPrinter.bool?t._e():a("v-btn",{staticClass:"minwidth-0",attrs:{small:""},on:{click:function(e){t.dialogAddPrinter.bool=!1}}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-close-thick")])],1),t.isConnecting||t.connectingFailed||!t.dialogEditPrinter.bool?t._e():a("v-btn",{staticClass:"minwidth-0",attrs:{small:""},on:{click:function(e){t.dialogEditPrinter.bool=!1}}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-close-thick")])],1)],1),t.isConnecting?a("v-card-text",{staticClass:"pt-5"},[a("v-progress-linear",{attrs:{color:"white",indeterminate:""}})],1):t._e(),!t.isConnecting&&t.connectingFailed?a("v-card-text",{staticClass:"pt-5"},[a("p",[t._v("Cannot not connect to "+t._s(80!==parseInt(t.port)?t.hostname+":"+t.port:t.hostname)+".")]),a("div",{staticClass:"text-center"},[a("v-btn",{staticClass:"mr-3",attrs:{color:"white",outlined:""},on:{click:t.switchToChangePrinter}},[t._v("change printer")]),a("v-btn",{attrs:{color:"primary"},on:{click:t.reconnect}},[t._v("try again")])],1)]):t._e(),!t.isConnecting&&t.dialogAddPrinter.bool?a("v-card-text",{staticClass:"pt-3"},[a("v-container",{staticClass:"px-0 py-0"},[a("v-row",[a("v-col",{staticClass:"col-8"},[a("v-text-field",{attrs:{rules:[function(t){return!!t||"Hostname is required"},function(t){return!t.startsWith("http:")||"invalid hostname/IP"},function(t){return!t.startsWith("https:")||"invalid hostname/IP"}],label:"Hostname/IP",required:""},model:{value:t.dialogAddPrinter.hostname,callback:function(e){t.$set(t.dialogAddPrinter,"hostname",e)},expression:"dialogAddPrinter.hostname"}})],1),a("v-col",{staticClass:"col-4"},[a("v-text-field",{attrs:{rules:[function(t){return!!t||"Port is required"}],label:"Port",required:""},model:{value:t.dialogAddPrinter.port,callback:function(e){t.$set(t.dialogAddPrinter,"port",e)},expression:"dialogAddPrinter.port"}})],1)],1),a("v-row",[a("v-col",{staticClass:"text-right"},[a("v-btn",{staticClass:"middle",attrs:{color:"white",outlined:""},on:{click:t.addPrinter}},[t._v(" add printer ")])],1)],1)],1)],1):t._e(),!t.isConnecting&&t.dialogEditPrinter.bool?a("v-card-text",{staticClass:"pt-3"},[a("v-container",{staticClass:"px-0 py-0"},[a("v-row",[a("v-col",{staticClass:"col-8"},[a("v-text-field",{attrs:{rules:[function(t){return!!t||"Hostname is required"},function(t){return!t.startsWith("http:")||"invalid hostname/IP"},function(t){return!t.startsWith("https:")||"invalid hostname/IP"}],label:"Hostname/IP",required:""},model:{value:t.dialogEditPrinter.hostname,callback:function(e){t.$set(t.dialogEditPrinter,"hostname",e)},expression:"dialogEditPrinter.hostname"}})],1),a("v-col",{staticClass:"col-4"},[a("v-text-field",{attrs:{rules:[function(t){return!!t||"Port is required"}],label:"Port",required:""},model:{value:t.dialogEditPrinter.port,callback:function(e){t.$set(t.dialogEditPrinter,"port",e)},expression:"dialogEditPrinter.port"}})],1)],1),a("v-row",[a("v-col",{},[a("v-btn",{staticClass:"middle minwidth-0",attrs:{color:"red",outlined:""},on:{click:t.delPrinter}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-delete")])],1)],1),a("v-col",{staticClass:"text-right"},[a("v-btn",{staticClass:"middle",attrs:{color:"white",outlined:""},on:{click:t.updatePrinter}},[t._v(" update printer ")])],1)],1)],1)],1):t._e(),t.isConnecting||t.connectingFailed||t.dialogAddPrinter.bool||t.dialogEditPrinter.bool?t._e():a("v-card-text",{staticClass:"pt-3"},[a("v-container",{staticClass:"px-0 pb-0"},[t._l(this["farm/getPrinters"],(function(e,i){return a("v-row",{key:i},[a("v-col",{staticClass:"rounded transition-swing secondary py-2 px-2 mb-6",staticStyle:{cursor:"pointer"},on:{click:function(a){return t.connect(e)}}},[a("v-row",{attrs:{align:"center"}},[a("v-col",{staticClass:"col-auto pr-0"},[e.socket.isConnecting?a("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}):t._e(),e.socket.isConnecting?t._e():a("v-icon",{attrs:{color:e.socket.isConnected?"green":"red"}},[t._v("mdi-"+t._s(e.socket.isConnected?"checkbox-marked-circle":"cancel"))])],1),a("v-col",[t._v(t._s(e.socket.hostname)+t._s(80!==parseInt(e.socket.port)?":"+e.socket.port:""))]),a("v-col",{staticClass:"col-auto"},[a("v-btn",{staticClass:"minwidth-0",attrs:{small:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.editPrinter(i)}}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-pencil")])],1)],1)],1)],1)],1)})),t.showCorsInfo?a("v-row",[a("v-col",[0===this["farm/countPrinters"]?a("p",{staticClass:"text-center"},[t._v("Hello and welcome to the remote mode of Mainsail!")]):t._e(),a("p",{staticClass:"text-center"},[t._v("Please remember to add "),a("code",[t._v(t._s(t.currentUrl))]),t._v(' in moonraker.conf within "cors_domains".')]),a("p",{staticClass:"text-center"},[t._v("You can find more details at "),a("a",{attrs:{href:"https://docs.mainsail.xyz/remotemode",target:"_blank"}},[t._v("docs.mainsail.xyz/remotemode")]),t._v(".")])])],1):t._e(),a("v-row",[a("v-col",{staticClass:"text-center mt-0"},[a("v-btn",{on:{click:function(e){t.dialogAddPrinter.bool=!0}}},[t._v("add printer")])],1)],1)],2)],1)],1)],1)},Ee=[],Re={data:function(){return{showDialog:!0,dialogAddPrinter:{bool:!1,hostname:"",port:7125},dialogEditPrinter:{bool:!1,index:0,hostname:"",port:0}}},computed:Object(m["a"])(Object(m["a"])(Object(m["a"])(Object(m["a"])({},Object(h["e"])({isConnected:function(t){return t.socket.isConnected},isConnecting:function(t){return t.socket.isConnecting},connectingFailed:function(t){return t.socket.connectingFailed},remoteMode:function(t){return t.socket.remoteMode},protocol:function(t){return t.socket.protocol},hostname:function(t){return t.socket.hostname},port:function(t){return t.socket.port}})),Object(h["c"])(["farm/countPrinters","farm/getPrinters"])),Object(h["b"])({readPrinters:"farm/readStoredPrinters"})),{},{currentUrl:{get:function(){return"http://"+window.location.hostname+(80!==window.location.port&&""!==window.location.port?":"+window.location.port:"")}},showCorsInfo:{get:function(){if(this["farm/countPrinters"]){for(var t=0,e=Object.entries(this["farm/getPrinters"]);t<e.length;t++){var a=Object(l["a"])(e[t],2),i=a[1];if(!i.socket.isConnected)return!0}return!1}return!0}}}),methods:{addPrinter:function(){this.$store.commit("farm/addPrinter",{hostname:this.dialogAddPrinter.hostname,port:this.dialogAddPrinter.port,protocol:this.protocol}),this.dialogAddPrinter.hostname="",this.dialogAddPrinter.bool=!1,this.$store.dispatch("farm/savePrinters")},editPrinter:function(t){this.dialogEditPrinter.hostname=this["farm/getPrinters"][t].socket.hostname,this.dialogEditPrinter.port=this["farm/getPrinters"][t].socket.port,this.dialogEditPrinter.index=t,this.dialogEditPrinter.bool=!0},updatePrinter:function(){this.$store.commit("farm/"+this.dialogEditPrinter.index+"/setSocketData",{hostname:this.dialogEditPrinter.hostname,port:this.dialogEditPrinter.port,isConnecting:!0}),this.$store.dispatch("farm/"+this.dialogEditPrinter.index+"/reconnect"),this.dialogEditPrinter.bool=!1,this.checkPrinters()},delPrinter:function(){this.$store.commit("farm/removePrinter",{name:this.dialogEditPrinter.index}),this.$store.dispatch("farm/savePrinters"),this.dialogEditPrinter.bool=!1},connect:function(t){this.$store.dispatch("socket/setData",{hostname:t.socket.hostname,port:t.socket.port}),i["a"].prototype.$socket.setUrl(this.protocol+"://"+t.socket.hostname+":"+t.socket.port+"/websocket"),i["a"].prototype.$socket.connect()},reconnect:function(){this.$store.dispatch("socket/setData",{connectingFailed:!1}),i["a"].prototype.$socket.connect()},switchToChangePrinter:function(){this.$store.dispatch("socket/setData",{connectingFailed:!1})},checkPrinters:function(){var t=this;Object.entries(this["farm/getPrinters"]).forEach((function(e){var a=Object(l["a"])(e,2),i=a[0],n=a[1];n.socket.isConnected||n.socket.isConnecting||t.$store.dispatch("farm/"+i+"/connect")}))}},mounted:function(){this.$store.dispatch("farm/readStoredPrinters")},watch:{isConnected:function(t){this.showDialog=!t}}},Ae=Re,Le=a("490a"),Ie=Object(y["a"])(Ae,Fe,Ee,!1,null,"be5b8e06",null),He=Ie.exports;k()(Ie,{VBtn:x["a"],VCard:S["a"],VCardText:P["c"],VCol:O["a"],VContainer:D["a"],VDialog:Pt["a"],VIcon:V["a"],VProgressCircular:Le["a"],VProgressLinear:Nt["a"],VRow:j["a"],VSpacer:Vt["a"],VTextField:bt["a"],VToolbar:T["a"],VToolbarTitle:$["b"]});var Ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.remoteMode&&t.countPrinters>1||!t.remoteMode&&t.countPrinters?a("div",[a("li",{class:"/allPrinters"===t.currentPage?"nav-item active":"nav-item "},[a("div",{staticClass:"nav-link ",attrs:{role:"button"},on:{click:[function(t){t.preventDefault()},t.switchToPrinters]}},[a("v-icon",[t._v("mdi-view-dashboard-outline")]),a("span",{staticClass:"nav-title"},[t._v("Printers")]),a("v-menu",{attrs:{bottom:"","offset-x":!0},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-icon",t._g(t._b({staticClass:"nav-arrow right"},"v-icon",n,!1),i),[t._v("mdi-chevron-down")])]}}],null,!1,739038919)},[a("v-list",{attrs:{dense:""}},t._l(t.printers,(function(e){return a("v-list-item",{key:e._namespace,attrs:{"two-line":"",disabled:!e.socket.isConnected,link:""},on:{click:function(a){return t.changePrinter(e)}}},[a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(t.getPrinterName(e._namespace)))]),a("v-list-item-subtitle",[t._v(t._s(t.getPrinterDescription(e)))])],1)],1)})),1)],1)],1),t._e()],1),a("v-divider",{staticClass:"my-4"})],1):t._e()},Ne=[],Be=a("8c4f");i["a"].use(Be["a"]);var qe=new Be["a"]({mode:"history",routes:me}),We=qe,Ge={name:"PrinterSelecter.vue",computed:Object(m["a"])(Object(m["a"])({},Object(h["e"])({remoteMode:function(t){return t.socket.remoteMode}})),{},{countPrinters:{get:function(){return this.$store.getters["farm/countPrinters"]}},printers:{get:function(){return this.$store.getters["farm/getPrinters"]}},currentPage:function(){return this.$route.fullPath}}),methods:{switchToPrinters:function(){We.push("/allPrinters")},getPrinterName:function(t){return this.$store.getters["farm/"+t+"/getPrinterName"]},getPrinterDescription:function(t){return this.$store.getters["farm/"+t._namespace+"/getStatus"]},changePrinter:function(t){t.socket.isConnected&&(this.remoteMode?this.$store.dispatch("changePrinter",{printer:t._namespace}):window.location.href="//"+t.socket.hostname+(80!==parseInt(t.socket.webPort)?":"+t.socket.webPort:""))}}},ze=Ge,Ye=Object(y["a"])(ze,Ue,Ne,!1,null,"3c6d1832",null),Ze=Ye.exports;k()(Ye,{VBtn:x["a"],VDivider:Ut["a"],VIcon:V["a"],VItemGroup:Ot["b"],VList:ht["a"],VListItem:vt["a"],VListItemContent:be["a"],VListItemSubtitle:be["b"],VListItemTitle:be["c"],VMenu:gt["a"]});var Xe={props:{source:String},components:{PrinterSelecter:Ze,ConnectingDialog:Me,SelectPrinterDialog:He,UpdateDialog:Oe,TopCornerMenu:Ce},data:function(){return{drawer:null,activeClass:"active",routes:me.filter((function(t){return"Printers"!==t.title})),boolNaviHeightmap:!1,uploadSnackbar:{status:!1,filename:"",percent:0,speed:0,total:0,cancelTokenSource:"",lastProgress:{time:0,loaded:0}}}},created:function(){this.$vuetify.theme.dark=!0,this.boolNaviHeightmap="undefined"!==typeof this.config.bed_mesh},computed:Object(m["a"])(Object(m["a"])(Object(m["a"])({currentPage:function(){return this.$route.fullPath}},Object(h["e"])({isConnected:function(t){return t.socket.isConnected},hostname:function(t){return t.printer.hostname},apiHost:function(t){return t.socket.hostname},apiPort:function(t){return t.socket.port},klippy_state:function(t){return t.server.klippy_state},printer_state:function(t){return t.printer.print_stats.state},loadings:function(t){return t.socket.loadings},toolhead:function(t){return t.printer.toolhead},printername:function(t){return t.gui.general.printername},virtual_sdcard:function(t){return t.printer.virtual_sdcard},current_file:function(t){return t.printer.print_stats.filename},boolNaviWebcam:function(t){return t.gui.webcam.bool},config:function(t){return t.printer.configfile.config},save_config_pending:function(t){return t.printer.configfile.save_config_pending},klipperVersion:function(t){return t.printer.software_version},remoteMode:function(t){return t.socket.remoteMode}})),Object(h["c"])(["getTitle","getVersion"])),{},{print_percent:{get:function(){return this.$store.getters["printer/getPrintPercent"]}},defaultFavicons:{get:function(){return this.$store.getters["files/getFavicons"]}},sidebarLogo:{get:function(){return this.$store.getters["files/getSidebarLogo"]}},sidebarBackground:{get:function(){return this.$store.getters["files/getSidebarBackground"]}},customStylesheet:{get:function(){return this.$store.getters["files/getCustomStylesheet"]}},isUpdateAvailable:{get:function(){return this.$store.getters["server/updateManager/isUpdateAvailable"]}}}),methods:{clickEmergencyStop:function(){this.$store.commit("socket/addLoading",{name:"topbarEmergencyStop"}),this.$socket.sendObj("printer.emergency_stop",{},"socket/removeLoading",{name:"topbarEmergencyStop"})},clickSaveConfig:function(){this.$store.commit("server/addEvent",{message:"SAVE_CONFIG",type:"command"}),this.$store.commit("socket/addLoading",{name:"topbarSaveConfig"}),this.$socket.sendObj("printer.gcode.script",{script:"SAVE_CONFIG"},"socket/removeLoading",{name:"topbarSaveConfig"})},btnUploadAndStart:function(){this.$refs.fileUploadAndStart.click()},uploadAndStart:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var a,i,n,r,s,o,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.$refs.fileUploadAndStart.files.length){e.next=26;break}t.$store.commit("socket/addLoading",{name:"btnUploadAndStart"}),a=[],i=Object(d["a"])(t.$refs.fileUploadAndStart.files),e.prev=4,i.s();case 6:if((n=i.n()).done){e.next=14;break}return r=n.value,e.next=10,t.doUploadAndStart(r);case 10:s=e.sent,a.push(s);case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](4),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:for(t.$store.commit("socket/removeLoading",{name:"gcodeUpload"}),o=0,c=a;o<c.length;o++)l=c[o],t.$toast.success("Upload of "+l+" successful!");t.$refs.fileUploadAndStart.value="",t.$router.push("/");case 26:case"end":return e.stop()}}),e,null,[[4,16,19,22]])})))()},doUploadAndStart:function(t){var e=this,a=this.$toast,i=new FormData,n=t.name.replace(" ","_");return this.uploadSnackbar.filename=n,this.uploadSnackbar.status=!0,this.uploadSnackbar.percent=0,this.uploadSnackbar.speed=0,this.uploadSnackbar.lastProgress.loaded=0,this.uploadSnackbar.lastProgress.time=0,i.append("file",t,n),i.append("print",!0),new Promise((function(t){e.uploadSnackbar.cancelTokenSource=At.a.CancelToken.source(),At.a.post("//"+e.apiHost+":"+e.apiPort+"/server/files/upload",i,{cancelToken:e.uploadSnackbar.cancelTokenSource.token,headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(t){if(e.uploadSnackbar.percent=100*t.loaded/t.total,e.uploadSnackbar.lastProgress.time){var a=t.timeStamp-e.uploadSnackbar.lastProgress.time,i=t.loaded-e.uploadSnackbar.lastProgress.loaded;a&&(e.uploadSnackbar.speed=i/(a/1e3))}e.uploadSnackbar.lastProgress.time=t.timeStamp,e.uploadSnackbar.lastProgress.loaded=t.loaded,e.uploadSnackbar.total=t.total}}).then((function(a){e.uploadSnackbar.status=!1,t(a.data.result)})).catch((function(){e.uploadSnackbar.status=!1,e.$store.commit("socket/removeLoading",{name:"btnUploadAndStart"}),a.error("Cannot upload the file!")}))}))},cancelUpload:function(){this.uploadSnackbar.cancelTokenSource.cancel(),this.uploadSnackbar.status=!1},formatFilesize:function(t){var e=-1,a=[" kB"," MB"," GB"," TB","PB","EB","ZB","YB"];do{t/=1024,e++}while(t>1024);return Math.max(t,.1).toFixed(1)+a[e]},drawFavicon:function(t){var e=document.querySelector("link[rel*='icon'][sizes='16x16']"),a=document.querySelector("link[rel*='icon'][sizes='32x32']");if(t>0&&t<100){var i=64,n=document.createElement("canvas");n.width=i,n.height=i;var r=n.getContext("2d"),s=n.width/2,o=n.height/2,c=32,d=(100*t).toFixed(0);r.beginPath(),r.moveTo(s,o),r.arc(s,o,c,0,2*Math.PI,!1),r.closePath(),r.fillStyle="#ddd",r.fill(),r.strokeStyle="rgba(200, 208, 218, 0.66)",r.stroke();var u=1.5*Math.PI,m=0,p=(Math.PI-.5*Math.PI)/25;(d>=0&&d<=25||d>25&&d<=50||d>50&&d<=75||d>75&&d<=100)&&(m=u+d*p),r.beginPath(),r.moveTo(s,o),r.arc(s,o,c,u,m,!1),r.closePath(),r.fillStyle="#e41313",r.fill(),e.href=n.toDataURL("image/png"),a.href=n.toDataURL("image/png")}else{var f=Object(l["a"])(this.defaultFavicons,2),h=f[0],v=f[1];e.href=h,a.href=v}}},watch:{print_percent:function(){this.drawFavicon(this.print_percent)},current_file:{handler:function(t){this.$socket.sendObj("server.files.metadata",{filename:t},"files/getMetadataCurrentFile")}},config:function(){this.boolNaviHeightmap="undefined"!==typeof this.config.bed_mesh},customStylesheet:function(t){if(null!==t){var e=document.getElementById("customStylesheet");e||(e=document.createElement("link"),e.id="customStylesheet",e.type="text/css",e.rel="stylesheet"),e.href=t,document.head.appendChild(e)}else{var a=document.getElementById("customStylesheet");a&&a.remove()}},defaultFavicons:function(){this.drawFavicon(this.print_percent)}}},Je=Xe,Ke=(a("034f"),a("b0a0"),a("7496")),Qe=a("40dc"),ta=a("5bc1"),ea=a("f6c4"),aa=a("f774"),ia=a("0789"),na=Object(y["a"])(Je,o,c,!1,null,null,null),ra=na.exports;k()(na,{VApp:Ke["a"],VAppBar:Qe["a"],VAppBarNavIcon:ta["a"],VBtn:x["a"],VContainer:D["a"],VIcon:V["a"],VMain:ea["a"],VNavigationDrawer:aa["a"],VProgressLinear:Nt["a"],VScrollYTransition:ia["f"],VSnackbar:Bt["a"],VSpacer:Vt["a"],VToolbarTitle:$["b"]});a("5363");var sa=a("f309"),oa=a("b079"),ca=a.n(oa);a("4238");i["a"].use(ca.a,{duration:3e3}),i["a"].use(sa["a"],{components:{VSnackbar:Bt["a"],VBtn:x["a"],VIcon:V["a"]}});var la=new sa["a"]({theme:{themes:{dark:{}}},icons:{iconfont:"mdi"}}),da=a("28dd"),ua=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading align-baseline"},[a("v-icon",{attrs:{left:""}},[t._v("mdi-information")]),t._v(t._s(""!==t.printer_state?t.printer_state.charAt(0).toUpperCase()+t.printer_state.slice(1):"Unknown")+" ")],1)]),a("v-spacer"),a("v-item-group",{staticClass:"v-btn-toggle",attrs:{name:"controllers"}},["printing"===t.printer_state?a("v-btn",{staticClass:"px-2 minwidth-0",attrs:{small:"",color:"orange",loading:t.loadings.includes("statusPrintPause")},on:{click:t.btnPauseJob}},[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-icon",t._g(t._b({attrs:{small:""}},"v-icon",n,!1),i),[t._v("mdi-pause")])]}}],null,!1,2759467001)},[a("span",[t._v("Pause print")])])],1):t._e(),"paused"===t.printer_state?a("v-btn",{staticClass:"px-2 minwidth-0",attrs:{small:"",color:"red",loading:t.loadings.includes("statusPrintCancel")},on:{click:t.btnCancelJob}},[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-icon",t._g(t._b({attrs:{small:""}},"v-icon",n,!1),i),[t._v("mdi-stop")])]}}],null,!1,2750942515)},[a("span",[t._v("Cancel print")])])],1):t._e(),"paused"===t.printer_state?a("v-btn",{staticClass:"px-2 minwidth-0",attrs:{small:"",color:"orange",loading:t.loadings.includes("statusPrintResume")},on:{click:t.btnResumeJob}},[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-icon",t._g(t._b({attrs:{small:""}},"v-icon",n,!1),i),[t._v("mdi-play")])]}}],null,!1,1320902479)},[a("span",[t._v("Resume print")])])],1):t._e(),["error","complete"].includes(t.printer_state)?a("v-btn",{staticClass:"px-2 minwidth-0",attrs:{small:"",color:"primary",loading:t.loadings.includes("statusPrintClear")},on:{click:t.btnClearJob}},[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-icon",t._g(t._b({attrs:{small:""}},"v-icon",n,!1),i),[t._v("mdi-broom")])]}}],null,!1,4220758038)},[a("span",[t._v("Clear print stats")])])],1):t._e(),["error","complete"].includes(t.printer_state)?a("v-btn",{staticClass:"px-2 minwidth-0",attrs:{small:"",color:"primary",loading:t.loadings.includes("statusPrintReprint")},on:{click:t.btnReprintJob}},[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-icon",t._g(t._b({attrs:{small:""}},"v-icon",n,!1),i),[t._v("mdi-printer")])]}}],null,!1,1521118989)},[a("span",[t._v("Reprint job")])])],1):t._e()],1)],1),t.current_filename?a("v-container",[a("v-row",[a("v-col",{staticClass:"col-auto pr-0 py-2"},[a("v-progress-circular",{attrs:{rotate:-90,size:50,width:7,value:Math.round(100*t.printPercent),color:"red"}})],1),a("v-col",{staticClass:"col py-2",staticStyle:{width:"100px"}},[a("h3",{staticClass:"font-weight-regular"},[t._v(t._s(Math.round(100*t.printPercent)+"%")+t._s("error"!==t.printer_state?t.display_message?" - "+t.display_message:"":t.print_stats_message))]),a("span",{staticClass:"subtitle-2 text-truncate d-block px-0 text--disabled"},[a("v-icon",{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-file-outline")]),t._v(t._s(t.current_filename))],1)])],1)],1):t._e(),t.current_filename?a("v-divider",{staticClass:"mt-0 mb-0"}):t._e(),a("v-card-text",{staticClass:"px-0 py-0 content"},[a("v-container",[a("v-row",[["printing","paused","complete"].includes(t.printer_state)&&t.current_file&&t.current_file.thumbnails&&t.current_file.thumbnails.length&&t.current_file.thumbnails.find((function(t){return t.width>=300&&t.width<=400}))?a("v-col",{staticClass:"col-12 col-sm-4 pl-sm-0 pt-0 pr-sm-0 pb-0"},[a("img",{staticClass:"statusPanel-image-preview",attrs:{src:"data:image/gif;base64,"+(t.current_file.thumbnails?t.current_file.thumbnails.find((function(t){return t.width>=300&&t.width<=400})).data:"")}})]):t._e(),a("v-col",{class:["printing","paused","complete"].includes(t.printer_state)&&t.current_file&&t.current_file.thumbnails&&t.current_file.thumbnails.length&&t.current_file.thumbnails.find((function(t){return t.width>=300&&t.width<=400}))?"col-12 col-sm-8":"col-12"},[a("v-row",{staticClass:"text-center",attrs:{align:"center"}},[a("v-col",{staticClass:"flex-grow-0 py-2"},[a("v-icon",[t._v("mdi-axis-arrow")])],1),a("v-col",{staticClass:"equal-width py-2"},[a("v-row",[a("v-col",{staticClass:"px-0 pb-1"},[a("strong",[t._v("X")])])],1),a("v-row",[a("v-col",{staticClass:"px-0 pt-1"},[t._v(t._s(t.position.length?t.position[0].toFixed(2):"--"))])],1)],1),a("v-col",{staticClass:"equal-width py-2"},[a("v-row",[a("v-col",{staticClass:"px-0 pb-1"},[a("strong",[t._v("Y")])])],1),a("v-row",[a("v-col",{staticClass:"px-0 pt-1"},[t._v(t._s(t.position.length?t.position[1].toFixed(2):"--"))])],1)],1),a("v-col",{staticClass:"equal-width py-2"},[a("v-row",[a("v-col",{staticClass:"px-0 pb-1"},[a("strong",[t._v("Z")])])],1),a("v-row",[a("v-col",{staticClass:"px-0 pt-1"},[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("span",t._g(t._b({},"span",n,!1),i),[t._v(t._s(t.position.length?t.position[2].toFixed(2):"--"))])]}}])},[void 0!==t.gcode_position&&t.gcode_position.length>=3?a("span",[t._v("G-Code: "+t._s(t.gcode_position[2].toFixed(2))+"mm")]):t._e()])],1)],1)],1)],1),["printing","paused","complete","error"].includes(t.printer_state)?a("v-row",[a("v-col",{staticClass:"px-0"},[a("v-divider")],1)],1):t._e(),["printing","paused","complete","error"].includes(t.printer_state)?a("v-row",{staticClass:"text-center",attrs:{align:"center"}},[a("v-col",{staticClass:"flex-grow-0 py-2"},[a("v-icon",[t._v("mdi-poll")])],1),a("v-col",{staticClass:"equal-width py-2"},[a("v-row",[a("v-col",{staticClass:"px-0 pb-1"},[a("strong",[t._v("Filament")])])],1),a("v-row",[a("v-col",{staticClass:"px-0 pt-1"},[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t.filament_used>=1e3?a("span",t._g(t._b({staticClass:" text-no-wrap"},"span",n,!1),i),[t._v(t._s((t.filament_used/1e3).toFixed(2))+" m")]):t._e(),t.filament_used<1e3?a("span",t._g(t._b({staticClass:" text-no-wrap"},"span",n,!1),i),[t._v(t._s(t.filament_used.toFixed(2))+" mm")]):t._e()]}}],null,!1,3939080642)},["filament_total"in t.current_file?a("span",[t._v(t._s((t.filament_used/1e3).toFixed(2))+" / "+t._s((t.current_file.filament_total/1e3).toFixed(2))+"m = "+t._s((100/t.current_file.filament_total*t.filament_used).toFixed(0))+"% ")]):t._e()])],1)],1)],1),a("v-col",{staticClass:"equal-width py-2"},[a("v-row",[a("v-col",{staticClass:"px-0 pb-1"},[a("strong",[t._v("Print")])])],1),a("v-row",[a("v-col",{staticClass:"px-0 pt-1"},[t._v(t._s(t.formatTime(t.print_time)))])],1)],1),a("v-col",{staticClass:"equal-width py-2"},[a("v-row",[a("v-col",{staticClass:"px-0 pb-1"},[a("strong",[t._v("Total")])])],1),a("v-row",[a("v-col",{staticClass:"px-0 pt-1"},[t._v(t._s(t.formatTime(t.print_time_total)))])],1)],1)],1):t._e(),["printing","paused","error"].includes(t.printer_state)?a("v-row",[a("v-col",{staticClass:"px-0"},[a("v-divider")],1)],1):t._e(),["printing","paused","error"].includes(t.printer_state)?a("v-row",{staticClass:"text-center",attrs:{align:"center"}},[a("v-col",{staticClass:"flex-grow-0 py-2"},[a("v-icon",[t._v("mdi-printer-3d")])],1),a("v-col",{staticClass:"equal-width py-2"},[a("v-row",[a("v-col",{staticClass:"px-0 pb-1"},[a("strong",[t._v("Speed")])])],1),a("v-row",[a("v-col",{staticClass:"px-0 pt-1 text-no-wrap"},[t._v(t._s((t.requested_speed/60).toFixed(0))+" mm/s")])],1)],1),a("v-col",{staticClass:"equal-width py-2"},[a("v-row",[a("v-col",{staticClass:"px-0 pb-1"},[a("strong",[t._v("Layer")])])],1),a("v-row",[a("v-col",{staticClass:"px-0 pt-1 text-no-wrap"},[t._v(t._s(t.current_layer)+" of "+t._s(t.max_layers))])],1)],1),a("v-col",{staticClass:"equal-width py-2"},[a("v-row",[a("v-col",{staticClass:"px-0 pb-1"},[a("strong",[t._v("ETA")])])],1),a("v-row",[a("v-col",{staticClass:"px-0 pt-1"},[t._v(t._s(t.eta?t.formatDateTime(t.eta):"--"))])],1)],1)],1):t._e(),["printing","paused","error"].includes(t.printer_state)?a("v-row",[a("v-col",{staticClass:"px-0"},[a("v-divider")],1)],1):t._e(),["printing","paused","error"].includes(t.printer_state)?a("v-row",{staticClass:"text-center",attrs:{align:"center"}},[a("v-col",{staticClass:"flex-grow-0 py-2"},[a("v-icon",[t._v("mdi-clock-outline")])],1),a("v-col",{staticClass:"equal-width py-2 "},[a("v-row",[a("v-col",{staticClass:"px-0 pb-1"},[a("strong",[t._v("File")])])],1),a("v-row",[a("v-col",{staticClass:"px-0 pt-1"},[t._v(t._s(t.estimated_time_file?t.formatTime(t.estimated_time_file):"--"))])],1)],1),a("v-col",{staticClass:"equal-width py-2"},[a("v-row",[a("v-col",{staticClass:"px-0 pb-1"},[a("strong",[t._v("Filament")])])],1),a("v-row",[a("v-col",{staticClass:"px-0 pt-1"},[t._v(t._s(t.estimated_time_filament?t.formatTime(t.estimated_time_filament):"--"))])],1)],1),a("v-col",{staticClass:"equal-width py-2"},[a("v-row",[a("v-col",{staticClass:"px-0 pb-1"},[a("strong",[t._v("Slicer")])])],1),a("v-row",[a("v-col",{staticClass:"px-0 pt-1"},[t._v(t._s(t.estimated_time_slicer?t.formatTime(t.estimated_time_slicer):"--"))])],1)],1)],1):t._e()],1)],1)],1)],1)],1)},ma=[],pa={data:function(){return{}},computed:Object(m["a"])(Object(m["a"])({},Object(h["e"])({toolhead:function(t){return t.printer.toolhead},position:function(t){return t.printer.toolhead.position},gcode_position:function(t){return t.printer.gcode_move.gcode_position},requested_speed:function(t){return t.printer.gcode_move.speed},printProgress:function(t){return t.printer.virtual_sdcard.progress},file_position:function(t){return t.printer.virtual_sdcard.file_position},current_file:function(t){return t.printer.current_file},print_time:function(t){return t.printer.print_stats.print_duration},print_time_total:function(t){return t.printer.print_stats.total_duration},filament_used:function(t){return t.printer.print_stats.filament_used},current_filename:function(t){return t.printer.print_stats.filename},printer_state:function(t){return t.printer.print_stats.state},print_stats_message:function(t){return t.printer.print_stats.message},display_message:function(t){return t.printer.display_status.message},loadings:function(t){return t.socket.loadings}})),{},{printPercent:{get:function(){return this.$store.getters["printer/getPrintPercent"]}},max_layers:{get:function(){if("first_layer_height"in this.current_file&&"layer_height"in this.current_file&&"object_height"in this.current_file){var t=Math.ceil((this.current_file.object_height-this.current_file.first_layer_height)/this.current_file.layer_height+1);return t>0?t:0}return 0}},current_layer:{get:function(){if(this.print_time>0&&"first_layer_height"in this.current_file&&"layer_height"in this.current_file&&void 0!==this.gcode_position&&this.gcode_position.length>=3){var t=Math.ceil((this.gcode_position[2]-this.current_file.first_layer_height)/this.current_file.layer_height+1);return t=t<=this.max_layers?t:this.max_layers,t>0?t:0}return 0}},estimated_time_file:{get:function(){return this.print_time>0&&this.printPercent>0?(this.print_time/this.printPercent-this.print_time).toFixed(0):0}},estimated_time_filament:{get:function(){return this.filament_used>0&&"filament_total"in this.current_file&&this.current_file.filament_total>this.filament_used?(this.print_time/(this.filament_used/this.current_file.filament_total)-this.print_time).toFixed(0):0}},estimated_time_slicer:{get:function(){return"estimated_time"in this.current_file&&this.current_file.estimated_time>this.print_time?(this.current_file.estimated_time-this.print_time).toFixed(0):0}},eta:{get:function(){var t=0,e=0;return this.estimated_time_file>0&&(t+=parseInt(this.estimated_time_file),e++),this.estimated_time_filament>0&&(t+=parseInt(this.estimated_time_filament),e++),this.estimated_time_slicer>0&&(t+=parseInt(this.estimated_time_slicer),e++),t&&e?Date.now()+t/e*1e3:0}}}),methods:{btnPauseJob:function(){this.$store.commit("socket/addLoading",{name:"statusPrintPause"}),this.$socket.sendObj("printer.print.pause",{},"socket/removeLoading",{name:"statusPrintPause"})},btnResumeJob:function(){this.$store.commit("socket/addLoading",{name:"statusPrintResume"}),this.$socket.sendObj("printer.print.resume",{},"socket/removeLoading",{name:"statusPrintResume"})},btnCancelJob:function(){this.$store.commit("socket/addLoading",{name:"statusPrintCancel"}),this.$socket.sendObj("printer.print.cancel",{},"socket/removeLoading",{name:"statusPrintCancel"})},btnClearJob:function(){this.$store.commit("socket/addLoading",{name:"statusPrintClear"}),this.$socket.sendObj("printer.gcode.script",{script:"SDCARD_RESET_FILE"},"socket/removeLoading",{name:"statusPrintClear"})},btnReprintJob:function(){this.$store.commit("socket/addLoading",{name:"statusPrintReprint"}),this.$socket.sendObj("printer.print.start",{filename:this.current_filename},"socket/removeLoading",{name:"statusPrintReprint"})},formatTime:function(t){var e=Math.floor(t/3600);t%=3600;var a=("0"+Math.floor(t/60)).slice(-2),i=("0"+(t%60).toFixed(0)).slice(-2);return e+":"+a+":"+i},formatDateTime:function(t){var e=new Date(t),a=e.getHours()>=10?e.getHours():"0"+e.getHours(),i=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes();return a+":"+i}}},fa=pa,ha=(a("2d37"),a("4611"),Object(y["a"])(fa,ua,ma,!1,null,"4f724c0f",null)),va=ha.exports;k()(ha,{VBtn:x["a"],VCard:S["a"],VCardText:P["c"],VCol:O["a"],VContainer:D["a"],VDivider:Ut["a"],VIcon:V["a"],VItemGroup:Ot["b"],VProgressCircular:Le["a"],VRow:j["a"],VSpacer:Vt["a"],VToolbar:T["a"],VToolbarTitle:$["b"],VTooltip:qt["a"]});var ga=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{attrs:{left:""}},[t._v("mdi-alert-circle")]),t._v("Klippy-State: "+t._s(t.klippy_state))],1)])],1),a("v-card-text",{staticClass:"py-0"},[a("v-layout",{staticClass:" text-center",attrs:{wrap:""}},[t.klippy_connected?a("v-flex",{staticClass:"text-left",attrs:{col:""}},[a("pre",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(t.klippy_message))])]):t._e(),t.klippy_connected?t._e():a("v-flex",{staticClass:"text-left",attrs:{col:""}},[a("p",[t._v("Moonraker can't connect to Klippy!"),a("br"),t._v("Please check if the Klipper service is running and an UDS (Unix Domain Socket) is configured.")])])],1)],1),t.klippy_connected?a("v-divider",{staticClass:"my-2"}):t._e(),t.klippy_connected?a("v-card-text",{staticClass:"px-4 pt-2 pb-4 content text-center text-lg-left"},[a("v-btn",{attrs:{small:"",color:"error"},on:{click:t.doRestart}},[a("v-icon",{staticClass:"mr-sm-2"},[t._v("mdi-restart")]),t._v("Restart")],1),a("v-btn",{staticClass:"ml-4",attrs:{small:"",color:"error"},on:{click:t.doRestartFirmware}},[a("v-icon",{staticClass:"mr-sm-2"},[t._v("mdi-restart")]),t._v("FIRMWARE Restart")],1)],1):t._e()],1)},ba=[],_a={computed:Object(m["a"])({},Object(h["e"])({klippy_connected:function(t){return t.server.klippy_connected},klippy_state:function(t){return t.server.klippy_state},klippy_message:function(t){return t.server.klippy_message}})),methods:{doRestart:function(){this.$store.commit("socket/addLoading",{name:"restart"}),this.$socket.sendObj("printer.restart",{},"socket/removeLoading",{name:"restart"})},doRestartFirmware:function(){this.$store.commit("socket/addLoading",{name:"firmwareRestart"}),this.$socket.sendObj("printer.firmware_restart",{},"socket/removeLoading",{name:"firmwareRestart"})}}},ya=_a,Ca=a("0e8f"),ka=a("a722"),xa=Object(y["a"])(ya,ga,ba,!1,null,null,null),wa=xa.exports;k()(xa,{VBtn:x["a"],VCard:S["a"],VCardText:P["c"],VDivider:Ut["a"],VFlex:Ca["a"],VIcon:V["a"],VLayout:ka["a"],VToolbar:T["a"],VToolbarTitle:$["b"]});var Sa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.boolVirtualSdcard&&t.boolPauseResume&&t.boolDisplayStatus&&t.boolMacroPause&&t.boolMacroResume&&t.boolMacroCancelPrint?t._e():a("v-card",{staticClass:"mb-6"},[a("v-toolbar",{attrs:{flat:"",dense:"",color:"orange darken-2"}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{staticClass:"mdi mdi-alert-circle",attrs:{left:""}}),t._v("Missing configuration ")],1)])],1),a("v-card-text",{staticClass:"px-0 pt-0 pb-2 content"},[a("v-layout",{staticClass:" text-center",attrs:{wrap:""}},[a("v-flex",{staticClass:"text-left",attrs:{col:""}},[t.boolVirtualSdcard?t._e():a("p",{staticClass:"orange--text"},[a("code",[t._v("virtual_sdcard")]),t._v(" is not defined in config.")]),t.boolPauseResume?t._e():a("p",{staticClass:"orange--text"},[a("code",[t._v("pause_resume")]),t._v(" is not defined in config.")]),t.boolDisplayStatus?t._e():a("p",{staticClass:"orange--text"},[a("code",[t._v("display_status")]),t._v(" is not defined in config.")]),t.boolMacroPause?t._e():a("p",{staticClass:"orange--text"},[a("code",[t._v("gcode_macro PAUSE")]),t._v(" is not defined in config.")]),t.boolMacroResume?t._e():a("p",{staticClass:"orange--text"},[a("code",[t._v("gcode_macro RESUME")]),t._v(" is not defined in config.")]),t.boolMacroCancelPrint?t._e():a("p",{staticClass:"orange--text"},[a("code",[t._v("gcode_macro CANCEL_PRINT")]),t._v(" is not defined in config.")]),a("div",{staticClass:"text-center"},[a("v-btn",{attrs:{href:"https://docs.mainsail.xyz/necessary-configuration",target:"_blank",color:"white",outlined:"",small:""}},[a("v-icon",{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-information")]),t._v("more information")],1)],1)])],1)],1)],1)},Pa=[],Oa={data:function(){return{boolVirtualSdcard:!1,boolPauseResume:!1,boolDisplayStatus:!1,boolMacroPause:!1,boolMacroResume:!1,boolMacroCancelPrint:!1}},computed:Object(m["a"])(Object(m["a"])(Object(m["a"])({},Object(h["e"])({config:function(t){return t.printer.configfile.config}})),Object(h["d"])([])),Object(h["c"])(["printer/checkConfigVirtualSdcard","printer/checkConfigPauseResume","printer/checkConfigDisplayStatus","printer/checkConfigMacroPause","printer/checkConfigMacroResume","printer/checkConfigMacroCancel"])),created:function(){this.refreshConfig()},methods:{refreshConfig:function(){this.boolVirtualSdcard=this["printer/checkConfigVirtualSdcard"],this.boolPauseResume=this["printer/checkConfigPauseResume"],this.boolDisplayStatus=this["printer/checkConfigDisplayStatus"],this.boolMacroPause=this["printer/checkConfigMacroPause"],this.boolMacroResume=this["printer/checkConfigMacroResume"],this.boolMacroCancelPrint=this["printer/checkConfigMacroCancel"]}},watch:{config:{deep:!0,handler:function(){this.refreshConfig()}}}},Da=Oa,Va=(a("55b4"),Object(y["a"])(Da,Sa,Pa,!1,null,"299dfd10",null)),ja=Va.exports;k()(Va,{VBtn:x["a"],VCard:S["a"],VCardText:P["c"],VFlex:Ca["a"],VIcon:V["a"],VLayout:ka["a"],VToolbar:T["a"],VToolbarTitle:$["b"]});var Ta=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"mb-6"},[a("v-toolbar",{attrs:{flat:"",dense:"",color:"orange darken-2"}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{staticClass:"mdi mdi-alert-circle",attrs:{left:""}}),t._v("Moonraker Failed Plugins ")],1)])],1),a("v-card-text",{staticClass:"px-0 pt-0 pb-2 content"},[a("v-layout",{staticClass:" text-center",attrs:{wrap:""}},[a("v-flex",{staticClass:"text-left",attrs:{col:""}},[a("p",{staticClass:"orange--text"},[t._v("An error was detected while loading the moonraker plugins. Please check the logfile and fix the issue.")]),a("p",{staticClass:"mb-2 orange--text"},[t._v("Following plugin has an error:")]),a("ul",{staticClass:"mt-0 pt-0"},t._l(t.failedPlugins,(function(e){return a("li",{key:e,staticClass:"orange--text"},[a("code",[t._v(t._s(e))])])})),0)])],1)],1),a("v-divider",{staticClass:"my-2"}),a("v-card-text",{staticClass:"px-4 pt-2 pb-4 content text-center text-lg-left"},[a("v-btn",{attrs:{small:"",href:"//"+t.hostname+":"+t.port+"/server/files/moonraker.log",color:"primary"}},[a("v-icon",{staticClass:"mr-2"},[t._v("mdi-download")]),t._v("Download Log")],1)],1)],1)},$a=[],Ma={data:function(){return{}},computed:Object(m["a"])({},Object(h["e"])({failedPlugins:function(t){return t.server.failed_plugins},hostname:function(t){return t.socket.hostname},port:function(t){return t.socket.port}}))},Fa=Ma,Ea=Object(y["a"])(Fa,Ta,$a,!1,null,null,null),Ra=Ea.exports;k()(Ea,{VBtn:x["a"],VCard:S["a"],VCardText:P["c"],VDivider:Ut["a"],VFlex:Ca["a"],VIcon:V["a"],VLayout:ka["a"],VToolbar:T["a"],VToolbarTitle:$["b"]});var Aa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{attrs:{left:""}},[t._v("mdi-thermometer-lines")]),t._v("Temperatures")],1)]),a("v-spacer"),a("v-item-group",{staticClass:"v-btn-toggle",attrs:{name:"controllers"}},[this["gui/getPreheatPresets"].length?a("v-menu",{attrs:{"offset-y":!0,title:"Preheat"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"px-2 minwidth-0",attrs:{small:"",color:"primary",disabled:["printing","paused"].includes(t.printer_state)}},"v-btn",n,!1),i),[t._v("Presets "),a("v-icon",{attrs:{small:""}},[t._v("mdi-menu-down")])],1)]}}],null,!1,4009386520)},[a("v-list",{staticClass:"py-0",attrs:{dense:""}},t._l(this["gui/getPreheatPresets"],(function(e){return a("v-list-item",{key:e.index,attrs:{link:""},on:{click:function(a){return t.preheat(e)}}},[a("v-list-item-icon",{staticClass:"mr-0"},[a("v-icon",{attrs:{small:""}},[t._v("mdi-fire")])],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.name)}})],1)],1)})),1),a("v-divider"),a("v-list",{staticClass:"py-0",attrs:{dense:""}},[a("v-list-item",{attrs:{link:""},on:{click:function(e){return t.cooldown()}}},[a("v-list-item-icon",{staticClass:"mr-0"},[a("v-icon",{attrs:{small:""}},[t._v("mdi-snowflake")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Cooldown")])],1)],1)],1)],1):t._e(),0===this["gui/getPreheatPresets"].length?a("v-btn",{staticClass:"px-2 minwidth-0",attrs:{small:"",color:"primary"},on:{click:function(e){return t.cooldown()}}},[a("v-icon",{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-snowflake")]),t._v("Cooldown")],1):t._e(),a("v-menu",{attrs:{"offset-y":!0,"close-on-content-click":!1,title:"Setup Temperatures"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"px-2 minwidth-0",attrs:{small:"",color:"grey darken-3"}},"v-btn",n,!1),i),[a("v-icon",{attrs:{small:""}},[t._v("mdi-cog")])],1)]}}])},[a("v-list",[a("v-list-item",{staticClass:"minHeight36"},[a("v-checkbox",{staticClass:"mt-0",attrs:{"hide-details":"",label:"Show Chart"},model:{value:t.boolTempchart,callback:function(e){t.boolTempchart=e},expression:"boolTempchart"}})],1),a("v-list-item",{staticClass:"minHeight36"},[a("v-checkbox",{staticClass:"mt-0",attrs:{"hide-details":"",label:"Autoscale Chart"},model:{value:t.autoscaleTempchart,callback:function(e){t.autoscaleTempchart=e},expression:"autoscaleTempchart"}})],1)],1)],1)],1)],1),a("v-card-text",{staticClass:"px-0 py-2 content"},[a("v-container",{staticClass:"px-0"},[a("v-row",{attrs:{align:"center"}},[a("v-col",{staticClass:"py-2 font-weight-bold",staticStyle:{"padding-left":"68px"}},[t._v("Name")]),t.boolTempchart?a("v-col",{staticClass:"py-2 text-center flex-grow-0 font-weight-bold d-none d-sm-block",staticStyle:{"min-width":"70px"}},[t._v("Color")]):t._e(),a("v-col",{staticClass:"py-2 text-center font-weight-bold d-none d-sm-block"},[t._v("State")]),a("v-col",{staticClass:"py-2 text-center font-weight-bold"},[t._v("Current")]),a("v-col",{staticClass:"py-2 pr-8 text-center font-weight-bold"},[t._v("Target")])],1),t._l(t.heaters,(function(e,i){return a("div",{key:i},[a("v-divider",{staticClass:"my-2"}),a("v-row",{attrs:{align:"center"}},[a("v-col",{staticClass:"pl-8 pr-0 flex-grow-0 py-2 colHeaterIcons"},[a("v-icon",{attrs:{color:e.color}},[t._v("mdi-"+t._s(e.icon))])],1),a("v-col",{staticClass:"py-2 font-weight-bold"},[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(a){return t.openHeater(e)}}},[t._v(t._s(t.convertName(e.name)))])]),t.boolTempchart?a("v-col",{staticClass:"py-2 flex-grow-0 text-center d-none d-sm-block",staticStyle:{"min-width":"70px"}},[a("div",{staticClass:"datasetColorSymbol d-inline-block",style:"background-color: "+e.chartColor+"cc;",on:{click:function(a){return t.openHeater(e)}}})]):t._e(),a("v-col",{staticClass:"py-2 text-center d-none d-sm-block"},[a("small",[t._v(t._s(e.target>0?null!==e.power?e.power>0?(100*e.power).toFixed(0)+"%":"0%":"active":"off"))])]),a("v-col",{staticClass:"py-2 text-center"},[a("span",{staticClass:"d-block"},[t._v(t._s(e.temperature?e.temperature.toFixed(1):0)+"°C")]),t._l(e.tempListAdditionValues,(function(e,i){return a("span",{key:i,staticClass:"d-block"},[a("small",[t._v(t._s(e.value.toFixed(1))+" "+t._s(e.unit))])])}))],2),a("v-col",{staticClass:"text-center py-2 pr-8 vertical_align_center"},[a("toolInput",{attrs:{name:e.name,target:e.target,min_temp:e.min_temp,max_temp:e.max_temp,items:e.presets,command:"SET_HEATER_TEMPERATURE","attribute-name":"HEATER"}})],1)],1)],1)})),t._l(t.temperatureFans,(function(e,i){return a("div",{key:i+99},[a("v-divider",{staticClass:"my-2"}),a("v-row",{attrs:{align:"center"}},[a("v-col",{staticClass:"flex-grow-0 py-2 pl-8 pr-0  colHeaterIcons"},[a("v-icon",{class:e.speed?" icon-rotate":"",attrs:{color:e.target?"grey lighten-5":"grey darken-2"}},[t._v("mdi-fan")])],1),a("v-col",{staticClass:"py-2 font-weight-bold"},[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(a){return t.openHeater(e)}}},[t._v(t._s(t.convertName(e.name)))])]),t.boolTempchart?a("v-col",{staticClass:"py-2 flex-grow-0 text-center d-none d-sm-block",staticStyle:{"min-width":"70px"}},[a("div",{staticClass:"datasetColorSymbol d-inline-block",style:"background-color: "+e.chartColor+"cc;",on:{click:function(a){return t.openHeater(e)}}})]):t._e(),a("v-col",{staticClass:"py-2 text-center d-none d-sm-block"},[a("small",[t._v(t._s(e.target>0&&e.speed>0?(100*e.speed).toFixed(0)+"%":e.target>0?"standby":"off"))])]),a("v-col",{staticClass:"py-2 text-center"},[a("span",{staticClass:"d-block"},[t._v(t._s(e.temperature?e.temperature.toFixed(1):0)+"°C")]),t._l(e.tempListAdditionValues,(function(e,i){return a("span",{key:i,staticClass:"d-block"},[a("small",[t._v(t._s(e.value.toFixed(1))+" "+t._s(e.unit))])])}))],2),a("v-col",{staticClass:"text-center py-2 pr-8 pr-0  vertical_align_center"},[a("toolInput",{attrs:{name:e.name,target:e.target,command:"SET_TEMPERATURE_FAN_TARGET","attribute-name":"temperature_fan",items:e.presets}})],1)],1)],1)})),t._l(t.temperatureSensors,(function(e,i){return a("div",{key:i+999},[a("v-divider",{staticClass:"my-2"}),a("v-row",{attrs:{align:"center"}},[a("v-col",{staticClass:"flex-grow-0 py-2 pl-8 pr-0 colHeaterIcons"},[a("v-icon",{attrs:{color:"grey darken-2",title:"min: "+e.min_temp+"° / max: "+e.max_temp+"°"}},[t._v(t._s(e.icon))])],1),a("v-col",{staticClass:"py-2 font-weight-bold"},[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(a){return t.openHeater(e)}}},[t._v(t._s(t.convertName(e.name)))])]),t.boolTempchart?a("v-col",{staticClass:"py-2 flex-grow-0 text-center d-none d-sm-block",staticStyle:{"min-width":"70px"}},[a("div",{staticClass:"datasetColorSymbol d-inline-block",style:"background-color: "+e.chartColor+"CC;",on:{click:function(a){return t.openHeater(e)}}})]):t._e(),a("v-col",{staticClass:"py-2 d-none d-sm-block"},[a("span")]),a("v-col",{staticClass:"py-2 text-center"},[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on,r=i.attrs;return[a("span",t._g(t._b({staticClass:"d-block px-0",staticStyle:{cursor:"default"}},"span",r,!1),n),[t._v(t._s(e.temperature?e.temperature.toFixed(1):0)+"°C")])]}}],null,!0)},[a("span",[t._v("min: "+t._s(e.measured_min_temp?e.measured_min_temp.toFixed(1):0)+"°"),a("br"),t._v("max: "+t._s(e.measured_max_temp?e.measured_max_temp.toFixed(1):0)+"°")])]),t._l(e.tempListAdditionValues,(function(e,i){return a("span",{key:i,staticClass:"d-block"},[a("small",[t._v(t._s(e.value.toFixed(1))+" "+t._s(e.unit))])])}))],2),a("v-col",{staticClass:"text-center py-2 pr-8 vertical_align_center"},[a("span")])],1)],1)})),t.boolTempchart?a("v-divider",{staticClass:"my-2"}):t._e(),t.boolTempchart?a("v-row",[a("v-col",{staticClass:"py-0 px-3"},[a("temp-chart")],1)],1):t._e()],2)],1)],1),a("v-dialog",{attrs:{persistent:"",width:400},model:{value:t.editHeater.bool,callback:function(e){t.$set(t.editHeater,"bool",e)},expression:"editHeater.bool"}},[a("v-card",{attrs:{dark:""}},[a("v-toolbar",{attrs:{flat:"",dense:"",color:"primary"}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{attrs:{left:""}},[t._v("mdi-"+t._s("icon"in t.editHeater.object?t.editHeater.object.icon:"info"))]),t._v(" "+t._s("name"in t.editHeater.object?t.convertName(t.editHeater.object.name):"UNKNOWN")+" ")],1)]),a("v-spacer"),a("v-btn",{staticClass:"minwidth-0",attrs:{small:""},on:{click:function(e){t.editHeater.bool=!1}}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-close-thick")])],1)],1),a("v-card-text",{staticClass:"pt-3"},[a("v-container",{staticClass:"px-0 py-0"},["chartTemperature"in t.editHeater.object&&t.editHeater.object.chartTemperature?a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-checkbox",{staticClass:"mt-0",attrs:{label:"Show current temperature in chart","hide-details":""},on:{change:function(e){return t.setVisible("temperature")}},model:{value:t.editHeater.boolTemperature,callback:function(e){t.$set(t.editHeater,"boolTemperature",e)},expression:"editHeater.boolTemperature"}})],1)],1):t._e(),"chartTarget"in t.editHeater.object&&t.editHeater.object.chartTarget?a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-checkbox",{staticClass:"mt-0",attrs:{label:"Show target temperature in chart","hide-details":""},on:{change:function(e){return t.setVisible("target")}},model:{value:t.editHeater.boolTarget,callback:function(e){t.$set(t.editHeater,"boolTarget",e)},expression:"editHeater.boolTarget"}})],1)],1):t._e(),"chartPower"in t.editHeater.object&&t.editHeater.object.chartPower?a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-checkbox",{staticClass:"mt-0",attrs:{label:"Show PWM-power in chart","hide-details":""},on:{change:function(e){return t.setVisible("power")}},model:{value:t.editHeater.boolPower,callback:function(e){t.$set(t.editHeater,"boolPower",e)},expression:"editHeater.boolPower"}})],1)],1):t._e(),"chartSpeed"in t.editHeater.object&&t.editHeater.object.chartSpeed?a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-checkbox",{staticClass:"mt-0",attrs:{label:"Show PWM-power in chart","hide-details":""},on:{change:function(e){return t.setVisible("speed")}},model:{value:t.editHeater.boolSpeed,callback:function(e){t.$set(t.editHeater,"boolSpeed",e)},expression:"editHeater.boolSpeed"}})],1)],1):t._e(),t._l(Object.keys(t.editHeater.additionSensors),(function(e){return a("v-row",{key:e},[a("v-col",{staticClass:"col-12"},[a("v-checkbox",{staticClass:"mt-0",attrs:{label:"Show "+e+" in list","hide-details":""},on:{change:function(a){return t.setVisibleAdditionalSensor(e)}},model:{value:t.editHeater.additionSensors[e],callback:function(a){t.$set(t.editHeater.additionSensors,e,a)},expression:"editHeater.additionSensors[key]"}})],1)],1)})),a("v-row",[a("v-col",{staticClass:"col-12 text-center"},[a("v-color-picker",{staticClass:"mx-auto",attrs:{"hide-canvas":"","hide-mode-switch":"",mode:"hexa"},on:{input:t.setChartColor},model:{value:t.editHeater.color,callback:function(e){t.$set(t.editHeater,"color",e)},expression:"editHeater.color"}})],1)],1)],2)],1)],1)],1)],1)},La=[],Ia=(a("b64b"),a("ddb0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-combobox",{attrs:{dense:"","hide-details":"",onClick:"this.select();",items:t.items,"item-text":"value"},on:{change:t.setTemps},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})}),Ha=[],Ua=(a("a9e3"),{data:function(){return{value:this.target}},props:{name:String,target:Number,min_temp:Number,max_temp:Number,command:String,attributeName:String,items:Array},computed:{},methods:{setTemps:function(){if("object"===Object(Et["a"])(this.value)&&null!==this.value&&(this.value=this.value.value),0===parseFloat(this.value)&&(this.value=0),void 0!==this.max_temp&&this.value>this.max_temp)this.value=this.target,i["a"].$toast.error("Temperature too high for "+this.name+"! (max: "+this.max_temp+")");else if(void 0!==this.min_temp&&this.value<this.min_temp&&0!==parseFloat(this.value))this.value=this.target,i["a"].$toast.error("Temperature too low for "+this.name+"! (min: "+this.min_temp+")");else{var t=this.command+" "+this.attributeName+"="+this.name+" TARGET="+this.value;this.$store.commit("server/addEvent",{message:t,type:"command"}),this.$socket.sendObj("printer.gcode.script",{script:t})}}},watch:{target:function(){this.value=this.target}}}),Na=Ua,Ba=(a("4681"),a("2b5d")),qa=Object(y["a"])(Na,Ia,Ha,!1,null,null,null),Wa=qa.exports;k()(qa,{VCombobox:Ba["a"]});var Ga=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"250px",width:"100%"},attrs:{id:"tempchart"}})},za=[],Ya=(a("8a79"),a("313e")),Za={components:{},data:function(){var t=this;return{chart:null,timerChart:"",timerDataset:"",chartFocus:!1,chartOptions:{darkMode:!0,animation:!1,tooltip:{trigger:"axis",backgroundColor:"rgba(0,0,0,0.9)",borderWidth:0,textStyle:{color:"#fff",fontSize:"14px"},padding:15,formatter:function(e){var a="";if(e.length){var i=e[0]["axisValueLabel"];i=i.substr(i.indexOf(" ")),a+="<div class=\"row mb-2\"><div class=\"col py-1\" style='border-bottom: 1px solid rgba(255, 255, 255, 0.24);'><span class='v-icon mdi mdi-clock theme-dark' style='font-size: 14px; margin-right: 5px;'></span><span class='font-weight-bold'>"+i+"</span></div></div>"}return e.forEach((function(i){if(!i.seriesName.endsWith("_target")&&!i.seriesName.endsWith("_power")&&!i.seriesName.endsWith("_speed")){a+='<div class="row">',a+='<div class="col-auto pt-2 pb-1">';var n=t.series.find((function(t){return t.name===i.seriesName}));n&&(a+='<span style="display:inline-block;margin-right:10px;width:8px;height:8px;border-radius: 50%;background-color:'+n.lineStyle.color+'CC;"></span>'),a+=dt(i.seriesName)+":",a+="</div>",a+='<div class="col text-right pt-2 pb-1 font-weight-bold">',i.value[1]&&(a+=i.value[1].toFixed(1));var r=e.find((function(t){return t.seriesName===i.seriesName+"_target"}));r&&(a+=" / "+r.value[1].toFixed(1)),a+="°C";var s=e.find((function(t){return t.seriesName===i.seriesName+"_power"}));s&&(a+=" [ "+s.value[1].toFixed(0)+"% ]");var o=e.find((function(t){return t.seriesName===i.seriesName+"_speed"}));o&&(a+=" [ "+o.value[1].toFixed(0)+"% ]"),a+="</div>",a+="</div>"}})),a}},grid:{top:35,right:25,bottom:25,left:25},dataZoom:[{type:"inside"}],xAxis:{type:"time",min:new Date-600,max:new Date,splitNumber:5,minInterval:60,splitLine:{show:!0,lineStyle:{color:"rgba(255, 255, 255, 0.06)"}},axisLabel:{color:"rgba(255, 255, 255, 0.24)",margin:10}},yAxis:[{name:"Temperature [°C]",type:"value",min:0,max:300,minInterval:10,maxInterval:100,nameLocation:"end",nameGap:5,nameTextStyle:{color:"rgba(255, 255, 255, 0.24)",align:"left"},splitLine:{lineStyle:{color:"rgba(255, 255, 255, 0.12)"}},axisLabel:{color:"rgba(255, 255, 255, 0.24)",formatter:"{value}",rotate:90,showMinLabel:!0,margin:5},axisLine:{show:!0,lineStyle:{color:"rgba(255, 255, 255, 0.12)"}}},{name:"PWM [%]",min:0,max:100,minInterval:100,type:"value",nameLocation:"end",nameGap:5,nameTextStyle:{color:"rgba(255, 255, 255, 0.24)",align:"right"},splitLine:{show:!1},axisLabel:{color:"rgba(255, 255, 255, 0.24)",formatter:"{value}",showMinLabel:!0,rotate:90,margin:5},axisLine:{show:!0,lineStyle:{color:"rgba(255, 255, 255, 0.12)"}}}],series:[],media:[{query:{minWidth:500},option:{xAxis:{}}},{query:{minWidth:500},option:{grid:{right:40,left:40},yAxis:[{maxInterval:50,axisLabel:{showMinLabel:!1,showMaxLabel:!0,rotate:0}},{maxInterval:25,axisLabel:{showMinLabel:!1,rotate:0}}]}}]}}},computed:Object(m["a"])(Object(m["a"])({},Object(h["e"])({intervalChartUpdate:function(t){return t.gui.tempchart.intervalChartUpdate},intervalDatasetUpdate:function(t){return t.gui.tempchart.intervalDatasetUpdate},boolTempchart:function(t){return t.gui.dashboard.boolTempchart}})),{},{maxHistory:{get:function(){return this.$store.getters["server/getConfig"]("server","temperature_store_size")||1200}},series:{get:function(){return this.$store.state.printer.tempHistory.series}},datasets:{get:function(){return this.$store.state.printer.tempHistory.datasets}},autoscale:{get:function(){return this.$store.state.gui.tempchart.autoscale}},maxTemp:{get:function(){return this.$store.getters["printer/getMaxTemp"]}},currentMaxTemp:{get:function(){return this.$store.getters["printer/tempHistory/getCurrentMaxTemp"]}}}),methods:{createChart:function(){var t=this;document.getElementById("tempchart")&&null===this.chart?(this.chart=Ya["a"](document.getElementById("tempchart"),null,{renderer:"canvas"}),this.chart.setOption(this.chartOptions)):setTimeout((function(){t.createChart()}),500)}},created:function(){var t=this;this.timerChart=setInterval((function(){t.chart&&t.boolTempchart&&"visible"===document.visibilityState&&"/"===t.$route.path&&t.chart.setOption({series:t.series,xAxis:{min:new Date-1e3*t.maxHistory,max:new Date},yAxis:[{max:t.autoscale?t.currentMaxTemp:t.maxTemp}]})}),this.intervalChartUpdate),this.timerDataset=setInterval((function(){t.$store.dispatch("printer/tempHistory/updateDatasets")}),this.intervalDatasetUpdate),window.addEventListener("resize",(function(){t.chart&&t.chart.resize()}))},mounted:function(){this.createChart()}},Xa=Za,Ja=Object(y["a"])(Xa,Ga,za,!1,null,null,null),Ka=Ja.exports,Qa={components:{toolInput:Wa,TempChart:Ka},data:function(){return{editHeater:{bool:!1,object:{},boolTemperature:!1,boolTarget:!1,boolPower:!1,boolSpeed:!1,additionSensors:{},color:""}}},computed:Object(m["a"])(Object(m["a"])(Object(m["a"])({},Object(h["e"])({datasets:function(t){return t.printer.tempHistory.datasets},boolTempchart:function(t){return t.gui.dashboard.boolTempchart},printer:function(t){return t.printer},cooldownGcode:function(t){return t.gui.cooldownGcode},printer_state:function(t){return t.printer.print_stats.state}})),Object(h["c"])(["gui/getPreheatPresets"])),{},{heaters:{get:function(){return this.$store.getters["printer/getHeaters"]}},temperatureFans:{get:function(){return this.$store.getters["printer/getTemperatureFans"]}},temperatureSensors:{get:function(){return this.$store.getters["printer/getTemperatureSensors"]}},boolTempchart:{get:function(){return this.$store.state.gui.dashboard.boolTempchart},set:function(t){return this.$store.dispatch("gui/setSettings",{dashboard:{boolTempchart:t}})}},autoscaleTempchart:{get:function(){return this.$store.state.gui.tempchart.autoscale},set:function(t){return this.$store.dispatch("gui/setSettings",{tempchart:{autoscale:t}})}}}),created:function(){},methods:{convertName:dt,cssBorderLeftColor:function(t){return{"border-left-color":t}},preheat:function(t){for(var e=this,a=0,i=Object.entries(t.values);a<i.length;a++){var n=Object(l["a"])(i[a],2),r=n[0],s=n[1];if(s.bool){var o="SET_HEATER_TEMPERATURE HEATER="+r+" TARGET="+s.value;if("temperature_fan"===s.type){var c=r.replace("temperature_fan ","");o="SET_TEMPERATURE_FAN_TARGET temperature_fan="+c+" TARGET="+s.value}this.$store.commit("server/addEvent",{message:o,type:"command"}),this.$socket.sendObj("printer.gcode.script",{script:o})}}""!==t.gcode&&setTimeout((function(){e.$store.commit("server/addEvent",{message:t.gcode,type:"command"}),e.$socket.sendObj("printer.gcode.script",{script:t.gcode})}),100)},cooldown:function(){this.$store.commit("server/addEvent",{message:this.cooldownGcode,type:"command"}),this.$socket.sendObj("printer.gcode.script",{script:this.cooldownGcode})},openHeater:function(t){this.editHeater.object=t,this.editHeater.color=t.chartColor,this.editHeater.boolTemperature="chartTemperature"in t&&void 0!==t.chartTemperature&&"lineStyle"in t.chartTemperature&&"opacity"in t.chartTemperature.lineStyle&&t.chartTemperature.lineStyle.opacity,this.editHeater.boolTarget="chartTarget"in t&&void 0!==t.chartTarget&&"areaStyle"in t.chartTarget&&"opacity"in t.chartTarget.areaStyle&&t.chartTarget.areaStyle.opacity>0,this.editHeater.boolPower="chartPower"in t&&void 0!==t.chartPower&&"lineStyle"in t.chartPower&&"opacity"in t.chartPower.lineStyle&&t.chartPower.lineStyle.opacity,this.editHeater.boolSpeed="chartSpeed"in t&&void 0!==t.chartSpeed&&"lineStyle"in t.chartSpeed&&"opacity"in t.chartSpeed.lineStyle&&t.chartSpeed.lineStyle.opacity;var e={};Object.keys(t.additionValues).forEach((function(a){e[a]=t.additionValues[a]["gui"]["boolList"]})),this.editHeater.additionSensors=Object.assign(e),this.editHeater.bool=!0},setVisible:function(t){"name"in this.editHeater.object&&(this.$store.commit("printer/tempHistory/setVisible",{name:this.editHeater.object.name,type:t,value:this.editHeater["bool"+t.charAt(0).toUpperCase()+t.slice(1)]}),this.$store.dispatch("gui/setTempchartDatasetSetting",{name:this.editHeater.object.name,type:t,value:this.editHeater["bool"+t.charAt(0).toUpperCase()+t.slice(1)]}))},setVisibleAdditionalSensor:function(t){"name"in this.editHeater.object&&this.$store.dispatch("gui/setTempchartDatasetAdditionalSensorSetting",{name:this.editHeater.object.name,sensor:t,value:this.editHeater.additionSensors[t]})},setChartColor:function(t){"name"in this.editHeater.object&&("object"===Object(Et["a"])(t)&&"hex"in t&&(t=t.hex),this.$store.commit("printer/tempHistory/setColor",{name:this.editHeater.object.name,value:t}),this.$store.dispatch("gui/setTempchartDatasetSetting",{name:this.editHeater.object.name,type:"color",value:t}))}}},ti=Qa,ei=(a("cff0"),a("03a4")),ai=a("34c3"),ii=Object(y["a"])(ti,Aa,La,!1,null,null,null),ni=ii.exports;k()(ii,{VBtn:x["a"],VCard:S["a"],VCardText:P["c"],VCheckbox:pt["a"],VCol:O["a"],VColorPicker:ei["a"],VContainer:D["a"],VDialog:Pt["a"],VDivider:Ut["a"],VIcon:V["a"],VItemGroup:Ot["b"],VList:ht["a"],VListItem:vt["a"],VListItemContent:be["a"],VListItemIcon:ai["a"],VListItemTitle:be["c"],VMenu:gt["a"],VRow:j["a"],VSpacer:Vt["a"],VToolbar:T["a"],VToolbarTitle:$["b"],VTooltip:qt["a"]});var ri=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-container",{staticClass:"pt-0"},[["standby","paused","complete","error"].includes(t.printer_state)?a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"col-12 mt-3 pb-0 text-center"},[a("v-btn",{attrs:{small:"",loading:t.loadings.includes("homeAll"),color:t.homedAxes.includes("xyz")?"primary":"warning"},on:{click:t.doHome}},[a("v-icon",{staticClass:"mr-1"},[t._v("mdi-home")]),a("span",{staticClass:"d-none d-sm-inline"},[t._v("Home ")]),t._v("all")],1),"quad_gantry_level"in t.config?a("v-btn",{staticClass:"ml-2",attrs:{small:"",loading:t.loadings.includes("qgl"),color:"primary"},on:{click:t.doQGL}},[t._v("QGL")]):t._e(),"z_tilt"in t.config?a("v-btn",{staticClass:"ml-2",attrs:{small:"",loading:t.loadings.includes("zTilt"),color:"primary"},on:{click:t.doZtilt}},[t._v("Z Tilt")]):t._e()],1)],1):t._e(),["standby","paused","complete","error"].includes(t.printer_state)?a("v-row",{staticClass:"mt-3",attrs:{"no-gutters":""}},[a("v-col",{staticClass:"text-center"},[a("v-btn-toggle",{staticClass:"row no-gutters  mx-auto",staticStyle:{"flex-wrap":"nowrap"},attrs:{dense:"","no-gutters":""}},[t._l(t.stepsXYsorted,(function(e){return a("v-btn",{key:"x-"+e,staticClass:"btnMinWidthAuto col",on:{click:function(a){return t.doSendMove("X-"+e,t.feedrateXY)}}},[a("span",{staticClass:"body-2"},[t._v("-"+t._s(e))])])})),a("v-btn",{staticClass:"font-weight-bold btnHomeAxis",attrs:{color:t.homedAxes.includes("x")?"primary":"warning",loading:t.loadings.includes("homeX")},on:{click:t.doHomeX}},[t._v("X")]),t._l(t.stepsXYsortedReverse,(function(e){return a("v-btn",{key:"x+"+e,staticClass:"btnMinWidthAuto col",on:{click:function(a){return t.doSendMove("X+"+e,t.feedrateXY)}}},[a("span",{staticClass:"body-2"},[t._v("+"+t._s(e))])])}))],2)],1)],1):t._e(),["standby","paused","complete","error"].includes(t.printer_state)?a("v-row",{staticClass:"mt-3",attrs:{"no-gutters":""}},[a("v-col",{staticClass:"text-center"},[a("v-btn-toggle",{staticClass:"row no-gutters  mx-auto",staticStyle:{"flex-wrap":"nowrap"},attrs:{dense:"","no-gutters":""}},[t._l(t.stepsXYsorted,(function(e){return a("v-btn",{key:"y-"+e,staticClass:"btnMinWidthAuto col",on:{click:function(a){return t.doSendMove("Y-"+e,t.feedrateXY)}}},[a("span",{staticClass:"body-2"},[t._v("-"+t._s(e))])])})),a("v-btn",{staticClass:"font-weight-bold btnHomeAxis",attrs:{color:t.homedAxes.includes("y")?"primary":"warning",loading:t.loadings.includes("homeY")},on:{click:t.doHomeY}},[t._v("Y")]),t._l(t.stepsXYsortedReverse,(function(e){return a("v-btn",{key:"y+"+e,staticClass:"btnMinWidthAuto col",on:{click:function(a){return t.doSendMove("Y+"+e,t.feedrateXY)}}},[a("span",{staticClass:"body-2"},[t._v("+"+t._s(e))])])}))],2)],1)],1):t._e(),["standby","paused","complete","error"].includes(t.printer_state)?a("v-row",{staticClass:"mt-3",attrs:{"no-gutters":""}},[a("v-col",{staticClass:"text-center"},[a("v-btn-toggle",{staticClass:"row no-gutters mx-auto",staticStyle:{"flex-wrap":"nowrap"},attrs:{dense:"","no-gutters":""}},[t._l(t.stepsZsorted,(function(e){return a("v-btn",{key:"z-"+e,staticClass:"btnMinWidthAuto col",on:{click:function(a){return t.doSendMove("Z-"+e,t.feedrateZ)}}},[a("span",{staticClass:"body-2"},[t._v("-"+t._s(e))])])})),a("v-btn",{staticClass:"font-weight-bold btnHomeAxis",attrs:{color:t.homedAxes.includes("z")?"primary":"warning",loading:t.loadings.includes("homeZ")},on:{click:t.doHomeZ}},[t._v("Z")]),t._l(t.stepsZsortedReverse,(function(e){return a("v-btn",{key:"z+"+e,staticClass:"btnMinWidthAuto col",on:{click:function(a){return t.doSendMove("Z+"+e,t.feedrateZ)}}},[a("span",{staticClass:"body-2"},[t._v("+"+t._s(e))])])}))],2)],1)],1):t._e(),this["printer/getMacros"].length>0?a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"text-center"},t._l(this["printer/getMacros"],(function(e,i){return a("v-btn",{key:i+99,staticClass:"mx-1 mt-3",attrs:{small:"",color:"primary",loading:t.loadings.includes("macro_"+e.name)},on:{click:function(a){return t.doSendMacro(e.name)}}},[t._v(t._s(e.name.replace(/_/g," ")))])})),1)],1):t._e()],1)],1)},si=[],oi=a("2909"),ci={components:{},data:function(){return{}},computed:Object(m["a"])(Object(m["a"])(Object(m["a"])({},Object(h["e"])({homedAxes:function(t){return t.printer.toolhead.homed_axes},config:function(t){return t.printer.configfile.config},loadings:function(t){return t.socket.loadings},printer_state:function(t){return t.printer.print_stats.state},feedrateXY:function(t){return t.gui.dashboard.control.feedrateXY},stepsXY:function(t){return t.gui.dashboard.control.stepsXY},feedrateZ:function(t){return t.gui.dashboard.control.feedrateZ},stepsZ:function(t){return t.gui.dashboard.control.stepsZ}})),Object(h["c"])(["printer/getMacros"])),{},{stepsXYsorted:{get:function(){return Object(oi["a"])(this.$store.state.gui.dashboard.control.stepsXY).sort((function(t,e){return e-t}))}},stepsXYsortedReverse:{get:function(){return Object(oi["a"])(this.$store.state.gui.dashboard.control.stepsXY).sort((function(t,e){return t-e}))}},stepsZsorted:{get:function(){return Object(oi["a"])(this.$store.state.gui.dashboard.control.stepsZ).sort((function(t,e){return e-t}))}},stepsZsortedReverse:{get:function(){return Object(oi["a"])(this.$store.state.gui.dashboard.control.stepsZ).sort((function(t,e){return t-e}))}}}),methods:{doHome:function(){this.$store.commit("server/addEvent",{message:"G28",type:"command"}),this.$store.commit("socket/addLoading",{name:"homeAll"}),this.$socket.sendObj("printer.gcode.script",{script:"G28"},"socket/removeLoading",{name:"homeAll"})},doHomeX:function(){this.$store.commit("server/addEvent",{message:"G28 X",type:"command"}),this.$store.commit("socket/addLoading",{name:"homeX"}),this.$socket.sendObj("printer.gcode.script",{script:"G28 X"},"socket/removeLoading",{name:"homeX"})},doHomeY:function(){this.$store.commit("server/addEvent",{message:"G28 Y",type:"command"}),this.$store.commit("socket/addLoading",{name:"homeY"}),this.$socket.sendObj("printer.gcode.script",{script:"G28 Y"},"socket/removeLoading",{name:"homeY"})},doHomeZ:function(){this.$store.commit("server/addEvent",{message:"G28 Z",type:"command"}),this.$store.commit("socket/addLoading",{name:"homeZ"}),this.$socket.sendObj("printer.gcode.script",{script:"G28 Z"},"socket/removeLoading",{name:"homeZ"})},doQGL:function(){this.$store.commit("server/addEvent",{message:"QUAD_GANTRY_LEVEL",type:"command"}),this.$store.commit("socket/addLoading",{name:"qgl"}),this.$socket.sendObj("printer.gcode.script",{script:"QUAD_GANTRY_LEVEL"},"socket/removeLoading",{name:"qgl"})},doZtilt:function(){this.$store.commit("server/addEvent",{message:"Z_TILT_ADJUST",type:"command"}),this.$store.commit("socket/addLoading",{name:"zTilt"}),this.$socket.sendObj("printer.gcode.script",{script:"Z_TILT_ADJUST"},"socket/removeLoading",{name:"zTilt"})},doSendMove:function(t,e){t="G91\nG1 "+t+" F"+60*e+"\nG90",this.doSend(t)},doSend:function(t){this.$store.commit("server/addEvent",{message:t,type:"command"}),i["a"].prototype.$socket.sendObj("printer.gcode.script",{script:t},"server/getGcodeRespond")},doSendMacro:function(t){this.$store.commit("server/addEvent",{message:t,type:"command"}),this.$store.commit("socket/addLoading",{name:"macro_"+t}),i["a"].prototype.$socket.sendObj("printer.gcode.script",{script:t},"socket/removeLoading",{name:"macro_"+t})}}},li=ci,di=(a("4739"),Object(y["a"])(li,ri,si,!1,null,null,null)),ui=di.exports;k()(di,{VBtn:x["a"],VBtnToggle:w["a"],VCard:S["a"],VCol:O["a"],VContainer:D["a"],VIcon:V["a"],VRow:j["a"]});var mi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return["standby","paused","complete"].includes(t.printer_state)?a("v-card",[a("v-container",[a("v-row",{},[a("v-col",{staticClass:"col col-md-6"},[a("v-label",[t._v("Feed amount in mm:")]),a("v-btn-toggle",{staticClass:"mt-2",staticStyle:{"flex-wrap":"nowrap",width:"100%"},attrs:{dense:"","no-gutters":""}},t._l(t.feedamountsSorted,(function(e){return a("v-btn",{key:e,class:(e===t.currentFeedAmount?"v-btn--active":"")+" btnMinWidthAuto flex-grow-1 px-0 _btnFeedrate",attrs:{dense:""},on:{click:function(a){return t.setFeedAmount(e)}}},[t._v(t._s(e))])})),1)],1),a("v-col",{staticClass:"col col-md-6"},[a("v-label",[t._v("Feedrate in mm/s:")]),a("v-btn-toggle",{staticClass:"mt-2",staticStyle:{"flex-wrap":"nowrap",width:"100%"},attrs:{dense:"","no-gutters":""}},t._l(t.feedratesSorted,(function(e){return a("v-btn",{key:e,class:(e===t.currentFeedRate?"v-btn--active":"")+" btnMinWidthAuto flex-grow-1 px-0 _btnFeedrate",attrs:{dense:""},on:{click:function(a){return t.setFeedrate(e)}}},[t._v(t._s(e))])})),1)],1)],1),a("v-row",{},[a("v-col",{staticClass:"col text-center"},[a("v-btn",{staticClass:"mx-2",attrs:{small:"",loading:t.loadings.includes("btnRetract"),disabled:!this["printer/getExtrudePossible"]},on:{click:function(e){return t.sendRetract()}}},[a("v-icon",{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-arrow-up-bold")]),t._v(" Retract")],1),a("v-btn",{staticClass:"mx-2",attrs:{small:"",loading:t.loadings.includes("btnDetract"),disabled:!this["printer/getExtrudePossible"]},on:{click:function(e){return t.sendDetract()}}},[a("v-icon",{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-arrow-down-bold")]),t._v(" Extrude")],1)],1)],1)],1)],1):t._e()},pi=[],fi={computed:Object(m["a"])(Object(m["a"])(Object(m["a"])({},Object(h["e"])({loadings:function(t){return t.socket.loadings},printer_state:function(t){return t.printer.print_stats.state},extruder:function(t){return t.printer.extruder},config:function(t){return t.printer.configfile.config},feedamounts:function(t){return t.gui.dashboard.extruder.feedamounts},feedrates:function(t){return t.gui.dashboard.extruder.feedrates}})),Object(h["c"])(["printer/getExtrudePossible"])),{},{feedamountsSorted:{get:function(){return Object(oi["a"])(this.feedamounts).sort((function(t,e){return e-t}))}},feedratesSorted:{get:function(){return Object(oi["a"])(this.feedrates).sort((function(t,e){return e-t}))}},currentFeedAmount:{get:function(){return parseFloat(this.$store.state.gui.dashboard.extruder.feedamount)},set:function(t){return this.$store.dispatch("gui/setSettings",{dashboard:{extruder:{feedamount:t}}})}},currentFeedRate:{get:function(){return parseFloat(this.$store.state.gui.dashboard.extruder.feedrate)},set:function(t){return this.$store.dispatch("gui/setSettings",{dashboard:{extruder:{feedrate:t}}})}}}),methods:{setFeedAmount:function(t){this.currentFeedAmount=t},setFeedrate:function(t){this.currentFeedRate=t},sendRetract:function(){var t="M83\nG1 E-"+this.currentFeedAmount+" F"+60*this.currentFeedRate;this.$store.commit("server/addEvent",{message:t,type:"command"}),this.$store.commit("socket/addLoading",{name:"btnRetract"}),i["a"].prototype.$socket.sendObj("printer.gcode.script",{script:t},"socket/removeLoading",{name:"btnRetract"})},sendDetract:function(){var t="M83\nG1 E"+this.currentFeedAmount+" F"+60*this.currentFeedRate;this.$store.commit("server/addEvent",{message:t,type:"command"}),this.$store.commit("socket/addLoading",{name:"btnDetract"}),i["a"].prototype.$socket.sendObj("printer.gcode.script",{script:t},"socket/removeLoading",{name:"btnDetract"})}}},hi=fi,vi=a("24c9"),gi=Object(y["a"])(hi,mi,pi,!1,null,null,null),bi=gi.exports;k()(gi,{VBtn:x["a"],VBtnToggle:w["a"],VCard:S["a"],VCol:O["a"],VContainer:D["a"],VIcon:V["a"],VLabel:vi["a"],VRow:j["a"]});var _i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[["printing","paused"].includes(t.printer_state)?a("v-card",{staticClass:"mt-6"},[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{staticClass:"mdi mdi-printer-3d",attrs:{left:""}}),t._v("Print Settings")],1)])],1),a("tool-slider",{attrs:{label:"Speed factor",target:t.speed_factor,max:200,multi:100,step:5,"dynamic-range":!0,command:"M220","attribute-name":"S"}}),a("v-divider"),a("tool-slider",{attrs:{label:"Extrusion factor",target:t.extrude_factor,max:200,multi:100,step:1,command:"M221","attribute-name":"S"}})],1):t._e(),this["printer/getMiscellaneous"].length?a("v-card",{staticClass:"mt-6"},[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{attrs:{left:""}},[t._v("mdi-dip-switch")]),t._v("Miscellaneous")],1)])],1),t._l(this["printer/getMiscellaneous"],(function(e,i){return a("div",{key:i},[i?a("v-divider"):t._e(),a("miscellaneous-slider",{attrs:{name:e.name,type:e.type,target:e.power,controllable:e.controllable,pwm:e.pwm,multi:parseInt(e.scale)}})],1)}))],2):t._e()],1)},yi=[],Ci=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"px-0 py-2"},[a("v-row",[a("v-col",{staticClass:"pb-1 pt-3"},[a("v-subheader",{staticClass:"_tool-slider-subheader"},[a("span",[t._v(t._s(t.label))]),t.value!==t.defaultValue?a("v-btn",{staticClass:"ml-2",attrs:{"x-small":"",icon:""},on:{click:function(e){t.processedMin=t.min,t.processedMax=t.max,t.value=t.defaultValue,t.sliding=!0,t.sendCmd()}}},[a("v-icon",[t._v("mdi-restart")])],1):t._e(),a("v-spacer"),a("span",{staticClass:"font-weight-bold"},[t._v(" "+t._s(t.value)+" "+t._s(t.unit)+" ")])],1),a("v-card-text",{staticClass:"py-0"},[a("v-slider",{attrs:{min:t.min,max:t.processedMax,"hide-details":""},on:{start:function(e){t.sliding=!0},end:function(e){return t.sendCmd()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("v-icon",{on:{click:t.decrement}},[t._v("mdi-minus")])]},proxy:!0},{key:"append",fn:function(){return[a("v-icon",{on:{click:t.increment}},[t._v("mdi-plus")])]},proxy:!0}]),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)],1)],1)],1)},ki=[],xi={props:{target:{type:Number,required:!0},command:{required:!0},attributeName:{type:String,required:!1,default:""},label:{type:String,required:!1,default:""},unit:{type:String,required:!1,default:"%"},attributeScale:{type:Number,required:!1,default:1},min:{type:Number,required:!1,default:0},max:{type:Number,required:!1,default:100},dynamicRange:{type:Boolean,required:!1,default:!1},dynamicDebounceTime:{type:Number,required:!1,default:250},dynamicClamp:{type:Array,required:!1,default:function(){return[0,1e3]}},defaultValue:{type:Number,required:!1,default:100},step:{type:Number,required:!1,default:1},multi:{type:Number,required:!1,default:1}},data:function(){return{value:this.target*this.multi,startValue:this.target*this.multi,sliding:!1,processedMin:this.min,processedMax:this.max,dynamicStep:Math.floor((this.max-this.min)/2),dynamicValue:30,editing:!1,processingTimer:null}},created:function(){(this.value>this.max||this.value<this.min)&&(this.processedMax=Math.ceil(this.value/this.defaultValue)*this.defaultValue,this.processedMin=Math.floor(this.value/this.defaultValue)*this.defaultValue-this.defaultValue)},computed:{},watch:{target:{immediate:!0,handler:function(t){var e=this;this.value=Math.round(t*this.multi),this.dynamicRange&&(this.processingTimer&&(clearTimeout(this.processingTimer),this.processingTimer=null),this.value>=this.processedMax&&(this.processingTimer=setTimeout((function(){var t=Object(l["a"])(e.dynamicClamp,2),a=t[0],i=t[1];e.processedMin=Math.max(a,e.value-e.dynamicStep),e.processedMax=Math.min(i,e.value+e.dynamicStep)}),this.dynamicDebounceTime)))}}},methods:{sendCmd:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.sliding||t){var e=this.command+" "+this.attributeName+(Math.max(1,this.value)*this.attributeScale).toFixed(0);this.$store.commit("server/addEvent",{message:e,type:"command"}),this.$socket.sendObj("printer.gcode.script",{script:e}),this.sliding=!1}},decrement:function(){this.value=this.value>this.min?Math.round(this.value-this.step):this.min,this.sendCmd(!0)},increment:function(){this.value=this.value<this.processedMax?Math.round(this.value+this.step):this.processedMax,this.sendCmd(!0)}}},wi=xi,Si=(a("4625"),a("ba0d")),Pi=Object(y["a"])(wi,Ci,ki,!1,null,null,null),Oi=Pi.exports;k()(Pi,{VBtn:x["a"],VCardText:P["c"],VCol:O["a"],VContainer:D["a"],VIcon:V["a"],VRow:j["a"],VSlider:Si["a"],VSpacer:Vt["a"],VSubheader:_e["a"]});var Di=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"px-0 py-2"},[a("v-row",[a("v-col",[a("v-subheader",{staticClass:"_fan-slider-subheader"},["output_pin"!==t.type?a("v-icon",{class:"mr-2 "+(t.value?"icon-rotate":""),attrs:{small:""}},[t._v("mdi-fan")]):t._e(),a("span",[t._v(t._s(t.convertName(this.name)))]),a("v-spacer"),!t.controllable||t.controllable&&t.pwm?a("span",{staticClass:"font-weight-bold"},[t._v(t._s(Math.round(100*t.value))+" %")]):t._e(),t.controllable&&!t.pwm?a("v-icon",{on:{click:t.switchOutputPin}},[t._v(t._s(t.value?"mdi-toggle-switch":"mdi-toggle-switch-off-outline"))]):t._e()],1),t.controllable&&t.pwm?a("v-card-text",{staticClass:"py-0"},[a("v-slider",{attrs:{min:0,max:1,step:.01,"hide-details":""},on:{change:t.sendCmd},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("v-icon",{on:{click:t.decrement}},[t._v("mdi-minus")])]},proxy:!0},{key:"append",fn:function(){return[a("v-icon",{on:{click:t.increment}},[t._v("mdi-plus")])]},proxy:!0}],null,!1,2595334639),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1):t._e()],1)],1)],1)},Vi=[],ji={data:function(){return{value:this.target}},props:{target:{type:Number,required:!0},name:{type:String,required:!0,default:""},type:{type:String,required:!1,default:""},controllable:{type:Boolean,required:!1,default:!1},pwm:{type:Boolean,required:!1,default:!1},multi:{type:Number,required:!1,default:1}},methods:{convertName:dt,sendCmd:function(){var t="";"fan"===this.type&&(t="M106 S"+(this.value*this.multi).toFixed(0)),"fan_generic"===this.type&&(t="SET_FAN_SPEED FAN="+this.name+" SPEED="+this.value*this.multi),"output_pin"===this.type&&(t="SET_PIN PIN="+this.name+" VALUE="+(this.value*this.multi).toFixed(2)),""!==t&&(this.$store.commit("server/addEvent",{message:t,type:"command"}),this.$socket.sendObj("printer.gcode.script",{script:t}))},switchOutputPin:function(){this.value=this.value?0:1;var t="SET_PIN PIN="+this.name+" VALUE="+(this.value*this.multi).toFixed(2);this.$store.commit("server/addEvent",{message:t,type:"command"}),this.$socket.sendObj("printer.gcode.script",{script:t})},decrement:function(){this.value=this.value>0?(this.value-.01).toFixed(2):0,this.sendCmd()},increment:function(){this.value=this.value<1?(this.value+.01).toFixed(2):100,this.sendCmd()}},watch:{target:function(t){this.value=t}},created:function(){}},Ti=ji,$i=(a("58f7"),Object(y["a"])(Ti,Di,Vi,!1,null,null,null)),Mi=$i.exports;k()($i,{VCardText:P["c"],VCol:O["a"],VContainer:D["a"],VIcon:V["a"],VRow:j["a"],VSlider:Si["a"],VSpacer:Vt["a"],VSubheader:_e["a"]});var Fi={components:{MiscellaneousSlider:Mi,ToolSlider:Oi},data:function(){return{}},computed:Object(m["a"])(Object(m["a"])({},Object(h["e"])({extrude_factor:function(t){return t.printer.gcode_move.extrude_factor},speed_factor:function(t){return t.printer.gcode_move.speed_factor},printer_state:function(t){return t.printer.print_stats.state}})),Object(h["c"])(["printer/getMiscellaneous"]))},Ei=Fi,Ri=(a("e05b"),Object(y["a"])(Ei,_i,yi,!1,null,null,null)),Ai=Ri.exports;k()(Ri,{VCard:S["a"],VDivider:Ut["a"],VIcon:V["a"],VToolbar:T["a"],VToolbarTitle:$["b"]});var Li=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:t.visibilityChanged,expression:"visibilityChanged"}]},[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{attrs:{left:""}},[t._v("mdi-webcam")]),t._v(" Webcam "),"mjpegstreamer-adaptive"===this.webcamConfig.service&&this.time?a("small",[t._v("(FPS: "+t._s(t.currentFPS)+")")]):t._e()],1)])],1),a("v-card-text",{staticClass:"px-0 py-0 content"},[["mjpegstreamer","mjpegstreamer-adaptive"].includes(this.webcamConfig.service)?a("img",{staticClass:"webcamImage",style:t.webcamStyle,attrs:{src:t.url,alt:"Webcam"},on:{load:t.onLoad}}):t._e()])],1)},Ii=[],Hi=(a("3ca3"),a("eee7"),a("2b3d"),{data:function(){return{refresh:Math.ceil(Math.random()*Math.pow(10,12)),connection:"",imageData:"",request_start_time:performance.now(),start_time:performance.now(),time:0,request_time:0,time_smoothing:.6,request_time_smoothing:.1,isVisible:!0,currentFPS:0}},created:function(){var t=this;document.addEventListener("focus",(function(){return t.handleRefreshChange()}),!1),document.addEventListener("visibilitychange",this.handleRefreshChange,!1),"mjpegstreamer-adaptive"===this.webcamConfig.service&&this.requestMjpeg()},components:{},computed:Object(m["a"])(Object(m["a"])({},Object(h["e"])({webcamConfig:function(t){return t.gui.webcam}})),{},{url:function(){if("mjpegstreamer"===this.webcamConfig.service&&-1!==this.webcamConfig.url.indexOf("?")){var t=this.webcamConfig.url,e=new URLSearchParams(t);return e.set("bypassCache",""+this.refresh),decodeURIComponent(e.toString())}return"mjpegstreamer-adaptive"===this.webcamConfig.service?this.imageData:this.webcamConfig.url},webcamStyle:function(){var t="";return this.webcamConfig.flipX&&(t+=" scaleX(-1)"),this.webcamConfig.flipY&&(t+=" scaleY(-1)"),this.webcamConfig.rotate&&this.webcamConfig.rotateDegrees&&(t+=" rotate(".concat(this.webcamConfig.rotateDegrees,"deg)")),t.trimLeft().length?{transform:t.trimLeft()}:""}}),methods:{handleRefreshChange:function(){document.hidden||(this.refresh=Math.ceil(Math.random()*Math.pow(10,12)))},onLoad:function(){var t=this,e=performance.now(),a=e-this.start_time;this.time=this.time*this.time_smoothing+a*(1-this.time_smoothing),this.start_time=e;var i=1e3/this.webcamConfig.targetFps,n=performance.now()-this.request_start_time;this.request_time=this.request_time*this.request_time_smoothing+n*(1-this.request_time_smoothing);var r=Math.max(0,i-this.request_time);this.$nextTick((function(){setTimeout(t.requestMjpeg,r)}))},requestMjpeg:function(){var t=this;if(this.isVisible){this.request_start_time=performance.now();var e=this.webcamConfig.url;e=e.replace("action=stream","action=snapshot"),e&&-1===e.indexOf("?")&&(e+="?");var a=new URLSearchParams(e);a.set("bypassCache",""+this.refresh+1e3*Math.random()),this.currentFPS=Math.round(1e3/this.time),this.$nextTick((function(){t.imageData=decodeURIComponent(a.toString())}))}},visibilityChanged:function(t){this.isVisible=t,t&&this.requestMjpeg()}}}),Ui=Hi,Ni=(a("6d5e"),Object(y["a"])(Ui,Li,Ii,!1,null,null,null)),Bi=Ni.exports;k()(Ni,{VCard:S["a"],VCardText:P["c"],VIcon:V["a"],VToolbar:T["a"],VToolbarTitle:$["b"]});var qi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{attrs:{left:""}},[t._v("mdi-console-line")]),t._v("Console")],1)]),a("v-spacer"),a("v-menu",{attrs:{"offset-y":!0,"close-on-content-click":!1,title:"Setup Console"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"px-2 minwidth-0",attrs:{small:"",color:"grey darken-3"}},"v-btn",n,!1),i),[a("v-icon",{attrs:{small:""}},[t._v("mdi-cog")])],1)]}}])},[a("v-list",[a("v-list-item",{staticClass:"minHeight36"},[a("v-checkbox",{staticClass:"mt-0",attrs:{"hide-details":"",label:"Hide temperatures"},model:{value:t.hideWaitTemperatures,callback:function(e){t.hideWaitTemperatures=e},expression:"hideWaitTemperatures"}})],1),a("v-list-item",{staticClass:"minHeight36"},[a("v-checkbox",{staticClass:"mt-0",attrs:{"hide-details":"",label:"Custom filters"},model:{value:t.boolCustomFilters,callback:function(e){t.boolCustomFilters=e},expression:"boolCustomFilters"}})],1)],1)],1)],1),a("v-card-text",[a("v-container",{staticClass:"py-0 px-0"},[a("v-row",[a("v-col",[a("v-text-field",{ref:"gcodeCommandField",attrs:{label:"Send code...",solo:"","hide-details":"",autocomplete:"off",items:t.items},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.doSend(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:t.onKeyUp(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:t.onKeyDown(e)}],keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab")?null:t.getAutocomplete(e)}},model:{value:t.gcode,callback:function(e){t.gcode=e},expression:"gcode"}})],1),a("v-col",{staticClass:"col-auto align-content-center"},[a("v-btn",{staticClass:"gcode-command-btn",attrs:{color:"info",loading:t.loadings.includes("sendGcode"),disabled:t.loadings.includes("sendGcode")},on:{click:t.doSend}},[a("v-icon",{staticClass:"mr-2"},[t._v("mdi-send")]),t._v(" send ")],1)],1)],1)],1)],1),a("v-card-text",{staticClass:"px-0 py-0 content"},[a("v-divider"),a("v-data-table",{staticClass:"minievent-table miniConsole",attrs:{headers:t.headers,options:t.options,items:t.events,"item-key":"date","hide-default-footer":"","hide-default-header":"","disable-pagination":"","custom-sort":t.customSort,"sort-by":"date"},scopedSlots:t._u([{key:"no-data",fn:function(){return[a("div",{staticClass:"py-2"},[t._v("empty")])]},proxy:!0},{key:"item",fn:function(e){var i=e.item;return[a("tr",[a("td",{staticClass:"log-cell title-cell py-2"},[t._v(" "+t._s(t.formatTime(i.date))+" ")]),a("td",{staticClass:"log-cell content-cell pl-0 py-2",staticStyle:{width:"100%"},attrs:{colspan:"2"}},[i.message?a("span",{class:"message "+t.colorConsoleMessage(i),domProps:{innerHTML:t._s(t.formatConsoleMessage(i.message))}}):t._e()])])]}}])})],1)],1)},Wi=[],Gi={components:{},data:function(){return{headers:[{text:"Date",value:"date",width:"15%",dateType:"Date"},{text:"Event",sortable:!1,value:"message",width:"85%"}],options:{},gcode:"",lastCommands:[],lastCommandNumber:null,items:[]}},computed:Object(m["a"])(Object(m["a"])({},Object(h["e"])({helplist:function(t){return t.printer.helplist},loadings:function(t){return t.socket.loadings}})),{},{events:{get:function(){return this.$store.getters["server/getFilterdEvents"]}},hideWaitTemperatures:{get:function(){return this.$store.state.gui.console.hideWaitTemperatures},set:function(t){return this.$store.dispatch("gui/setSettings",{console:{hideWaitTemperatures:t}})}},boolCustomFilters:{get:function(){return this.$store.state.gui.console.boolCustomFilters},set:function(t){return this.$store.dispatch("gui/setSettings",{console:{boolCustomFilters:t}})}}}),methods:{doSend:function(){this.$store.commit("socket/addLoading",{name:"sendGcode"}),this.$store.commit("server/addEvent",{message:this.gcode,type:"command"}),i["a"].prototype.$socket.sendObj("printer.gcode.script",{script:this.gcode},"socket/removeLoading",{name:"sendGcode"}),this.lastCommands.push(this.gcode),this.gcode="",this.lastCommandNumber=null},onKeyUp:function(){null===this.lastCommandNumber&&this.lastCommands.length?(this.lastCommandNumber=this.lastCommands.length-1,this.gcode=this.lastCommands[this.lastCommandNumber]):this.lastCommandNumber>0&&(this.lastCommandNumber--,this.gcode=this.lastCommands[this.lastCommandNumber])},onKeyDown:function(){null!==this.lastCommandNumber&&this.lastCommandNumber<this.lastCommands.length-1?(this.lastCommandNumber++,this.gcode=this.lastCommands[this.lastCommandNumber]):null!==this.lastCommandNumber&&this.lastCommandNumber===this.lastCommands.length-1&&(this.lastCommandNumber=null,this.gcode="")},getAutocomplete:function(t){var e=this;if(t.preventDefault(),this.gcode.length){var a=this.helplist.filter((function(t){return 0===t.commandLow.indexOf(e.gcode.toLowerCase())}));if(a&&1===a.length)this.gcode=a[0].command;else{var i=this.helplist.filter((function(t){return t.commandLow.includes(e.gcode.toLowerCase())}));if(i&&i.length){var n="";i.forEach((function(t){return n+="<b>"+t.command+":</b> "+t.description+"<br />"})),this.$store.commit("server/addEvent",{message:n,type:"command"})}}}this.$refs.gcodeCommandField.focus()},formatTime:function(t){var e=t.getHours();e<10&&(e="0"+e.toString());var a=t.getMinutes();a<10&&(a="0"+a.toString());var i=t.getSeconds();return i<10&&(i="0"+i.toString()),e+":"+a+":"+i},colorConsoleMessage:ct,formatConsoleMessage:lt,customSort:function(t,e,a){return t.sort((function(t,i){return"date"===e[0]?a[0]?new Date(t[e])-new Date(i[e]):new Date(i[e])-new Date(t[e]):"undefined"!==typeof t[e]?a[0]?i[e].toLowerCase().localeCompare(t[e].toLowerCase()):t[e].toLowerCase().localeCompare(i[e].toLowerCase()):void 0})),t}}},zi=Gi,Yi=(a("1a1e"),Object(y["a"])(zi,qi,Wi,!1,null,null,null)),Zi=Yi.exports;k()(Yi,{VBtn:x["a"],VCard:S["a"],VCardText:P["c"],VCheckbox:pt["a"],VCol:O["a"],VContainer:D["a"],VDataTable:ft["a"],VDivider:Ut["a"],VIcon:V["a"],VList:ht["a"],VListItem:vt["a"],VMenu:gt["a"],VRow:j["a"],VSpacer:Vt["a"],VTextField:bt["a"],VToolbar:T["a"],VToolbarTitle:$["b"]});var Xi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{attrs:{left:""}},[t._v("mdi-cog")]),t._v("General")],1)])],1),a("v-card-text",{staticClass:"pt-2 pb-0"},[a("v-text-field",{attrs:{label:"Printer Name"},model:{value:t.printerName,callback:function(e){t.printerName=e},expression:"printerName"}})],1)],1)},Ji=[],Ki={components:{},data:function(){return{}},computed:{printerName:{get:function(){return this.$store.state.gui.general.printername},set:function(t){return this.$store.dispatch("gui/setSettings",{general:{printername:t}})}}},methods:{}},Qi=Ki,tn=(a("0a9e"),Object(y["a"])(Qi,Xi,Ji,!1,null,null,null)),en=tn.exports;k()(tn,{VCard:S["a"],VCardText:P["c"],VIcon:V["a"],VTextField:bt["a"],VToolbar:T["a"],VToolbarTitle:$["b"]});var an=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",{ref:"formControlExtruder"},[a("v-card",[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{attrs:{left:""}},[t._v("mdi-tune")]),t._v("Control")],1)])],1),a("v-card-text",{staticClass:"pa-0"},[a("v-container",[a("v-row",[a("v-col",{attrs:{"col-6":""}},[a("v-text-field",{attrs:{label:"Speed XY",type:"number",suffix:"mm/s","hide-details":"auto",rules:[function(t){return t>0||"Minimum speed is 1"}]},on:{blur:t.blurFeedrateXY},model:{value:t.feedrateXY,callback:function(e){t.feedrateXY=e},expression:"feedrateXY"}})],1),a("v-col",{attrs:{"col-6":""}},[a("v-text-field",{ref:"feedrateZ",attrs:{label:"Speed Z",type:"number",suffix:"mm/s","hide-details":"auto",rules:[function(t){return t>1||"Minimum speed is 1"}]},on:{blur:t.blurFeedrateZ},model:{value:t.feedrateZ,callback:function(e){t.feedrateZ=e},expression:"feedrateZ"}})],1)],1),a("v-row",[a("v-col",[a("v-combobox",{attrs:{label:"Move distances XY in mm","hide-selected":"","hide-details":"auto",multiple:"","small-chips":"","deletable-chips":!0,"append-icon":"",type:"number",rules:[function(t){return t.length>0||"Minimum 1 value"},function(t){return t.length<4||"For narrow screens it is recommended to enter max. 3 values."}]},model:{value:t.stepsXY,callback:function(e){t.stepsXY=e},expression:"stepsXY"}})],1)],1),a("v-row",[a("v-col",[a("v-combobox",{attrs:{label:"Move distances Z in mm","hide-selected":"","hide-details":"auto",multiple:"","small-chips":"","deletable-chips":!0,"append-icon":"",type:"number",rules:[function(t){return t.length>0||"Minimum 1 value"},function(t){return t.length<4||"For narrow screens it is recommended to enter max. 3 values."}]},model:{value:t.stepsZ,callback:function(e){t.stepsZ=e},expression:"stepsZ"}})],1)],1)],1)],1)],1),a("v-card",{staticClass:"mt-6"},[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{attrs:{left:""}},[t._v("mdi-tune")]),t._v("Extruder")],1)])],1),a("v-card-text",{staticClass:"pa-0"},[a("v-container",[a("v-row",[a("v-col",[a("v-combobox",{attrs:{label:"Move distances E in mm","hide-selected":"","hide-details":"auto",multiple:"","small-chips":"","deletable-chips":!0,"append-icon":"",type:"number",rules:[function(t){return t.length>0||"Minimum 1 value"},function(t){return t.length<6||"For narrow screens it is recommended to enter max. 5 values."}]},model:{value:t.feedamountsE,callback:function(e){t.feedamountsE=e},expression:"feedamountsE"}})],1)],1),a("v-row",[a("v-col",[a("v-combobox",{attrs:{label:"Speed E in mm/s","hide-selected":"","hide-details":"auto",multiple:"","small-chips":"","deletable-chips":!0,"append-icon":"",type:"number",rules:[function(t){return t.length>0||"Minimum 1 value"},function(t){return t.length<6||"For narrow screens it is recommended to enter max. 5 values."}]},model:{value:t.feedratesE,callback:function(e){t.feedratesE=e},expression:"feedratesE"}})],1)],1)],1)],1)],1)],1)},nn=[],rn={components:{},data:function(){return{}},computed:{feedrateXY:{get:function(){return this.$store.state.gui.dashboard.control.feedrateXY},set:function(t){return this.$store.dispatch("gui/setSettings",{dashboard:{control:{feedrateXY:t}}})}},stepsXY:{get:function(){var t=this.$store.state.gui.dashboard.control.stepsXY;return t.sort((function(t,e){return e-t}))},set:function(t){var e,a=[],i=Object(d["a"])(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;a.push(Math.abs(n))}}catch(r){i.e(r)}finally{i.f()}return this.$store.dispatch("gui/setSettings",{dashboard:{control:{stepsXY:a}}})}},feedrateZ:{get:function(){return this.$store.state.gui.dashboard.control.feedrateZ},set:function(t){return this.$store.dispatch("gui/setSettings",{dashboard:{control:{feedrateZ:t}}})}},stepsZ:{get:function(){var t=this.$store.state.gui.dashboard.control.stepsZ;return t.sort((function(t,e){return e-t}))},set:function(t){var e,a=[],i=Object(d["a"])(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;a.push(Math.abs(n))}}catch(r){i.e(r)}finally{i.f()}return this.$store.dispatch("gui/setSettings",{dashboard:{control:{stepsZ:a}}})}},feedamountsE:{get:function(){var t=this.$store.state.gui.dashboard.extruder.feedamounts;return t.sort((function(t,e){return e-t}))},set:function(t){var e,a=[],i=Object(d["a"])(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;a.push(Math.abs(n))}}catch(r){i.e(r)}finally{i.f()}return this.$store.dispatch("gui/setSettings",{dashboard:{extruder:{feedamounts:a}}})}},feedratesE:{get:function(){var t=this.$store.state.gui.dashboard.extruder.feedrates;return t.sort((function(t,e){return e-t}))},set:function(t){var e,a=[],i=Object(d["a"])(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;a.push(Math.abs(n))}}catch(r){i.e(r)}finally{i.f()}return this.$store.dispatch("gui/setSettings",{dashboard:{extruder:{feedrates:a}}})}}},mounted:function(){this.$refs.formControlExtruder.validate()},methods:{blurFeedrateXY:function(){this.feedrateXY>0||(this.feedrateXY=100)},blurFeedrateZ:function(){this.feedrateZ>0||(this.feedrateZ=25)}}},sn=rn,on=a("4bd4"),cn=Object(y["a"])(sn,an,nn,!1,null,null,null),ln=cn.exports;k()(cn,{VCard:S["a"],VCardText:P["c"],VCol:O["a"],VCombobox:Ba["a"],VContainer:D["a"],VForm:on["a"],VIcon:V["a"],VRow:j["a"],VTextField:bt["a"],VToolbar:T["a"],VToolbarTitle:$["b"]});var dn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{attrs:{left:""}},[t._v("mdi-webcam")]),t._v("Webcam")],1)])],1),a("v-card-text",[a("v-container",{attrs:{"px-0":"","py-0":""}},[a("v-row",[a("v-col",{staticClass:"py-2"},[a("v-select",{staticClass:"mt-0",attrs:{items:t.serviceItems,"hide-details":"",label:"Service"},model:{value:t.service,callback:function(e){t.service=e},expression:"service"}})],1)],1),"mjpegstreamer-adaptive"===t.service?a("v-row",[a("v-col",{staticClass:"py-2 mt-2"},[a("v-text-field",{staticClass:"mt-0",attrs:{"hide-details":"",label:"Target FPS"},model:{value:t.targetFps,callback:function(e){t.targetFps=e},expression:"targetFps"}})],1)],1):t._e(),a("v-row",[a("v-col",{staticClass:"pt-2 mt-2 mb-1"},[a("v-text-field",{attrs:{"hide-details":"",label:"Webcam URL"},model:{value:t.webcamUrl,callback:function(e){t.webcamUrl=e},expression:"webcamUrl"}})],1)],1),t.rotationEnabled?a("v-row",[a("v-col",{staticClass:"py-2",attrs:{"col-auto":""}},[a("v-switch",{staticClass:"mt-0",attrs:{"hide-details":"",label:"Rotate"},model:{value:t.rotate,callback:function(e){t.rotate=e},expression:"rotate"}})],1),a("v-col",[a("v-select",{attrs:{items:[{text:"90 degrees",value:90},{text:"270 degrees",value:270}],"hide-details":""},model:{value:t.rotateDegrees,callback:function(e){t.rotateDegrees=e},expression:"rotateDegrees"}})],1)],1):t._e(),a("v-row",[a("v-col",{staticClass:"py-2"},[a("v-switch",{staticClass:"mt-0",attrs:{"hide-details":"",label:"Flip webcam horizontally"},model:{value:t.flipX,callback:function(e){t.flipX=e},expression:"flipX"}})],1)],1),a("v-row",[a("v-col",{staticClass:"py-2"},[a("v-switch",{staticClass:"mt-0",attrs:{"hide-details":"",label:"Flip webcam vertically"},model:{value:t.flipY,callback:function(e){t.flipY=e},expression:"flipY"}})],1)],1),a("v-row",[a("v-col",{staticClass:"py-2"},[a("v-switch",{staticClass:"mt-0",attrs:{"hide-details":"",label:"Show in navigation"},model:{value:t.boolNavi,callback:function(e){t.boolNavi=e},expression:"boolNavi"}})],1)],1)],1)],1)],1)},un=[],mn={components:{},data:function(){return{rotationEnabled:!1,serviceItems:[{value:"mjpegstreamer",text:"MJPEG-Streamer"},{value:"mjpegstreamer-adaptive",text:"Adaptive MJPEG-Streamer (experimental)"}]}},computed:{webcamUrl:{get:function(){return this.$store.state.gui.webcam.url},set:function(t){return this.$store.dispatch("gui/setSettings",{webcam:{url:t}})}},flipX:{get:function(){return this.$store.state.gui.webcam.flipX},set:function(t){return this.$store.dispatch("gui/setSettings",{webcam:{flipX:t}})}},flipY:{get:function(){return this.$store.state.gui.webcam.flipY},set:function(t){return this.$store.dispatch("gui/setSettings",{webcam:{flipY:t}})}},rotate:{get:function(){return this.$store.state.gui.webcam.rotate},set:function(t){return this.$store.dispatch("gui/setSettings",{webcam:{rotate:t}})}},rotateDegrees:{get:function(){return this.$store.state.gui.webcam.rotateDegrees},set:function(t){return this.$store.dispatch("gui/setSettings",{webcam:{rotateDegrees:t}})}},boolNavi:{get:function(){return this.$store.state.gui.webcam.bool},set:function(t){return this.$store.dispatch("gui/setSettings",{webcam:{bool:t}})}},service:{get:function(){return this.$store.state.gui.webcam.service},set:function(t){return this.$store.dispatch("gui/setSettings",{webcam:{service:t}})}},targetFps:{get:function(){return this.$store.state.gui.webcam.targetFps},set:function(t){return this.$store.dispatch("gui/setSettings",{webcam:{targetFps:t}})}}},methods:{}},pn=mn,fn=a("b974"),hn=Object(y["a"])(pn,dn,un,!1,null,null,null),vn=hn.exports;k()(hn,{VCard:S["a"],VCardText:P["c"],VCol:O["a"],VContainer:D["a"],VIcon:V["a"],VRow:j["a"],VSelect:fn["a"],VSwitch:jt["a"],VTextField:bt["a"],VToolbar:T["a"],VToolbarTitle:$["b"]});var gn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{attrs:{left:""}},[t._v("mdi-view-dashboard")]),t._v("Dashboard")],1)])],1),a("v-card-text",[a("v-container",{attrs:{"px-0":"","py-0":""}},[a("v-row",[a("v-col",{staticClass:"py-2"},[a("v-switch",{staticClass:"mt-0",attrs:{label:"Webcam","hide-details":""},model:{value:t.boolShowWebcamOnDashboard,callback:function(e){t.boolShowWebcamOnDashboard=e},expression:"boolShowWebcamOnDashboard"}})],1)],1),a("v-row",[a("v-col",{staticClass:"py-2"},[a("v-switch",{staticClass:"mt-0",attrs:{label:"Tempchart","hide-details":""},model:{value:t.boolShowTempchartOnDashboard,callback:function(e){t.boolShowTempchartOnDashboard=e},expression:"boolShowTempchartOnDashboard"}})],1)],1),a("v-row",[a("v-col",{staticClass:"py-2"},[a("v-switch",{staticClass:"mt-0",attrs:{label:"Console","hide-details":""},model:{value:t.boolShowConsoleOnDashboard,callback:function(e){t.boolShowConsoleOnDashboard=e},expression:"boolShowConsoleOnDashboard"}})],1)],1),a("v-row",{staticClass:"mt-2"},[a("v-col",{attrs:{"col-6":""}},[a("v-text-field",{attrs:{label:"Chart update interval",type:"number",suffix:"ms","hide-details":"auto",rules:[function(t){return t>=500||"Minimum is 500ms"}]},on:{blur:t.blurIntervalChartUpdate},model:{value:t.intervalChartUpdate,callback:function(e){t.intervalChartUpdate=e},expression:"intervalChartUpdate"}})],1),a("v-col",{attrs:{"col-6":""}},[a("v-text-field",{attrs:{label:"Datapoint interval",type:"number",suffix:"ms","hide-details":"auto",rules:[function(t){return t>=500||"Minimum is 500ms"}]},on:{blur:t.blurIntervalDatasetUpdate},model:{value:t.intervalDatasetUpdate,callback:function(e){t.intervalDatasetUpdate=e},expression:"intervalDatasetUpdate"}})],1)],1)],1)],1)],1)},bn=[],_n={components:{},data:function(){return{}},computed:{boolShowWebcamOnDashboard:{get:function(){return this.$store.state.gui.dashboard.boolWebcam},set:function(t){return this.$store.dispatch("gui/setSettings",{dashboard:{boolWebcam:t}})}},boolShowTempchartOnDashboard:{get:function(){return this.$store.state.gui.dashboard.boolTempchart},set:function(t){return this.$store.dispatch("gui/setSettings",{dashboard:{boolTempchart:t}})}},boolShowConsoleOnDashboard:{get:function(){return this.$store.state.gui.dashboard.boolConsole},set:function(t){return this.$store.dispatch("gui/setSettings",{dashboard:{boolConsole:t}})}},intervalChartUpdate:{get:function(){return this.$store.state.gui.tempchart.intervalChartUpdate},set:function(t){if(t>=500)return this.$store.dispatch("gui/setSettings",{gui:{tempchart:{intervalChartUpdate:t}}})}},intervalDatasetUpdate:{get:function(){return this.$store.state.gui.tempchart.intervalDatasetUpdate},set:function(t){if(t>=500)return this.$store.dispatch("gui/setSettings",{gui:{tempchart:{intervalDatasetUpdate:t}}})}}},methods:{blurIntervalDatasetUpdate:function(){this.intervalDatasetUpdate<500&&(this.intervalDatasetUpdate=500)},blurIntervalChartUpdate:function(){this.intervalChartUpdate<500&&(this.intervalChartUpdate=500)}}},yn=_n,Cn=Object(y["a"])(yn,gn,bn,!1,null,null,null),kn=Cn.exports;k()(Cn,{VCard:S["a"],VCardText:P["c"],VCol:O["a"],VContainer:D["a"],VIcon:V["a"],VRow:j["a"],VSwitch:jt["a"],VTextField:bt["a"],VToolbar:T["a"],VToolbarTitle:$["b"]});var xn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{attrs:{left:""}},[t._v("mdi-console-line")]),t._v("Console")],1)])],1),a("v-card-text",{staticClass:"py-3"},[a("v-container",{attrs:{"px-0":"","py-0":""}},[a("v-row",[a("v-col",{staticClass:"py-2"},[a("v-switch",{staticClass:"mt-0",attrs:{label:"Hide temperatures","hide-details":""},model:{value:t.hideWaitTemperatures,callback:function(e){t.hideWaitTemperatures=e},expression:"hideWaitTemperatures"}})],1)],1),a("v-row",[a("v-col",{staticClass:"py-2"},[a("v-switch",{staticClass:"mt-0",attrs:{label:"Custom filter","hide-details":""},model:{value:t.boolCustomFilters,callback:function(e){t.boolCustomFilters=e},expression:"boolCustomFilters"}})],1)],1),t.boolCustomFilters?a("v-row",[a("v-col",{staticClass:"py-2"},[a("v-textarea",{staticClass:"mb-2",attrs:{outlined:"",label:"Rules","hide-details":""},model:{value:t.customFilters,callback:function(e){t.customFilters=e},expression:"customFilters"}})],1)],1):t._e()],1)],1)],1)},wn=[],Sn={components:{},data:function(){return{}},computed:{hideWaitTemperatures:{get:function(){return this.$store.state.gui.console.hideWaitTemperatures},set:function(t){return this.$store.dispatch("gui/setSettings",{console:{hideWaitTemperatures:t}})}},boolCustomFilters:{get:function(){return this.$store.state.gui.console.boolCustomFilters},set:function(t){return this.$store.dispatch("gui/setSettings",{console:{boolCustomFilters:t}})}},customFilters:{get:function(){return this.$store.state.gui.console.customFilters},set:function(t){return this.$store.dispatch("gui/setSettings",{console:{customFilters:t}})}}},methods:{}},Pn=Sn,On=a("a844"),Dn=Object(y["a"])(Pn,xn,wn,!1,null,null,null),Vn=Dn.exports;k()(Dn,{VCard:S["a"],VCardText:P["c"],VCol:O["a"],VContainer:D["a"],VIcon:V["a"],VRow:j["a"],VSwitch:jt["a"],VTextarea:On["a"],VToolbar:T["a"],VToolbarTitle:$["b"]});var jn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{attrs:{left:""}},[t._v("mdi-code-tags")]),t._v("Macros")],1)])],1),a("v-card-text",{staticClass:"py-3"},[a("v-container",{attrs:{"px-0":"","py-0":""}},t._l(this["printer/getAllMacros"],(function(t,e){return a("v-row",{key:e},[a("v-col",{staticClass:"py-2"},[a("settings-macro-switch",{attrs:{name:t.name}})],1)],1)})),1)],1)],1)},Tn=[],$n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-switch",{staticClass:"mt-0",attrs:{label:t.name.toUpperCase(),"hide-details":""},on:{change:t.setValue},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})},Mn=[],Fn=(a("a434"),{data:function(){return{value:!1}},props:{name:String},computed:Object(m["a"])({},Object(h["e"])({hiddenMacros:function(t){return t.gui.dashboard.hiddenMacros}})),methods:{setValue:function(){if(this.value){var t=this.hiddenMacros.indexOf(this.name.toUpperCase());t>-1&&this.hiddenMacros.splice(t,1)}else this.hiddenMacros.push(this.name.toUpperCase());this.$store.dispatch("gui/upload")}},watch:{hiddenMacros:function(){this.value=!this.hiddenMacros.includes(this.name.toUpperCase())}},created:function(){this.value=!this.hiddenMacros.includes(this.name.toUpperCase())}}),En=Fn,Rn=Object(y["a"])(En,$n,Mn,!1,null,null,null),An=Rn.exports;k()(Rn,{VSwitch:jt["a"]});var Ln={components:{SettingsMacroSwitch:An},data:function(){return{}},computed:Object(m["a"])(Object(m["a"])({},Object(h["e"])({hiddenMacros:function(t){return t.gui.dashboard.hiddenMacros}})),Object(h["c"])(["printer/getAllMacros"])),methods:{}},In=Ln,Hn=Object(y["a"])(In,jn,Tn,!1,null,null,null),Un=Hn.exports;k()(Hn,{VCard:S["a"],VCardText:P["c"],VCol:O["a"],VContainer:D["a"],VIcon:V["a"],VRow:j["a"],VToolbar:T["a"],VToolbarTitle:$["b"]});var Nn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{attrs:{left:""}},[t._v("mdi-arrow-expand-vertical")]),t._v("Endstops")],1)])],1),a("v-card-text",{staticClass:"pb-0"},[a("v-container",{attrs:{"px-0":"","py-0":""}},[t._l(t.sortEndstops,(function(e,i){return a("v-row",{key:i},[a("v-col",[a("label",{staticClass:"mt-1 d-inline-block"},[t._v("Endstop "),a("b",[t._v(t._s(i.toUpperCase()))])]),a("v-chip",{staticClass:"float-right",attrs:{color:"open"===e?"green":"red","text-color":"white"}},[t._v(t._s(e))])],1)],1)})),0===Object.keys(t.endstops).length&&t.endstops.constructor===Object?a("v-row",[a("v-col",[a("p",[t._v("Press the sync-button on the right-bottom to load the current endstop status.")])])],1):t._e()],2)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{icon:"",loading:t.loadings.includes("queryEndstops")},on:{click:t.syncEndstops}},[a("v-icon",[t._v("mdi-sync")])],1)],1)],1)},Bn=[],qn={components:{},data:function(){return{sortEndstops:{}}},computed:Object(m["a"])({},Object(h["e"])({loadings:function(t){return t.socket.loadings},endstops:function(t){return t.printer.endstops}})),created:function(){this.getEndstops()},methods:{syncEndstops:function(){this.$store.commit("socket/addLoading",{name:"queryEndstops"}),this.$socket.sendObj("printer.query_endstops.status",{},"printer/getEndstopStatus")},getEndstops:function(){this.sortEndstops={};var t=Object.keys(this.endstops);t.sort();for(var e=0;e<t.length;e++){var a=t[e];this.sortEndstops[a]=this.endstops[a]}}},watch:{endstops:function(){this.getEndstops()}}},Wn=qn,Gn=a("cc20"),zn=Object(y["a"])(Wn,Nn,Bn,!1,null,null,null),Yn=zn.exports;k()(zn,{VBtn:x["a"],VCard:S["a"],VCardActions:P["a"],VCardText:P["c"],VChip:Gn["a"],VCol:O["a"],VContainer:D["a"],VIcon:V["a"],VRow:j["a"],VSpacer:Vt["a"],VToolbar:T["a"],VToolbarTitle:$["b"]});var Zn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{attrs:{left:""}},[t._v("mdi-speedometer")]),t._v("Machine Limits")],1)])],1),a("tool-slider",{attrs:{label:"Velocity",unit:"mm/s",target:t.current_velocity,max:t.max_velocity,"default-value":t.max_velocity,command:"SET_VELOCITY_LIMIT","attribute-name":"VELOCITY="}}),a("v-divider"),a("tool-slider",{attrs:{label:"Acceleration",unit:"mm/s²",target:t.current_accel,max:t.max_accel,"default-value":t.max_accel,command:"SET_VELOCITY_LIMIT","attribute-name":"ACCEL="}}),a("v-divider"),a("tool-slider",{attrs:{label:"Deceleration",unit:"mm/s²",target:t.current_accel_to_decel,max:t.max_accel_to_decel,"default-value":t.max_accel_to_decel,command:"SET_VELOCITY_LIMIT","attribute-name":"ACCEL_TO_DECEL="}}),a("v-divider"),a("tool-slider",{attrs:{label:"Square corner velocity",unit:"mm/s",target:t.current_square_corner_velocity,max:t.max_square_corner_velocity,"default-value":t.max_square_corner_velocity,command:"SET_VELOCITY_LIMIT","attribute-name":"SQUARE_CORNER_VELOCITY="}})],1)},Xn=[],Jn={components:{ToolSlider:Oi},data:function(){return{}},computed:Object(m["a"])({},Object(h["e"])({current_velocity:function(t){return t.printer.toolhead.max_velocity},current_accel:function(t){return t.printer.toolhead.max_accel},current_accel_to_decel:function(t){return t.printer.toolhead.max_accel_to_decel},current_square_corner_velocity:function(t){return t.printer.toolhead.square_corner_velocity},config:function(t){return t.printer.configfile.settings},max_velocity:function(t){return t.printer.configfile.settings.printer.max_velocity},max_accel:function(t){return t.printer.configfile.settings.printer.max_accel},max_accel_to_decel:function(t){return t.printer.configfile.settings.printer.max_accel_to_decel},max_square_corner_velocity:function(t){return t.printer.configfile.settings.printer.square_corner_velocity}})),watch:{}},Kn=Jn,Qn=Object(y["a"])(Kn,Zn,Xn,!1,null,null,null),tr=Qn.exports;k()(Qn,{VCard:S["a"],VDivider:Ut["a"],VIcon:V["a"],VToolbar:T["a"],VToolbarTitle:$["b"]});var er=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",[a("v-col",[a("v-card",[a("v-card-title",[t._v(" Config Files "),a("v-spacer",{staticClass:"d-none d-sm-block"}),a("input",{ref:"fileUpload",staticStyle:{display:"none"},attrs:{type:"file",multiple:""},on:{change:t.uploadFile}}),a("v-item-group",{staticClass:"v-btn-toggle my-5 my-sm-0 col-12 col-sm-auto px-0 py-0"},[""!==t.currentPath&&"/config_examples"!==t.currentPath?a("v-btn",{staticClass:"flex-grow-1",attrs:{loading:t.loadings.includes["configFileUpload"]},on:{click:t.uploadFileButton}},[a("v-icon",[t._v("mdi-file-upload")])],1):t._e(),""!==t.currentPath&&"/config_examples"!==t.currentPath?a("v-btn",{staticClass:"flex-grow-1",on:{click:t.createFile}},[a("v-icon",[t._v("mdi-file-plus")])],1):t._e(),""!==t.currentPath&&"/config_examples"!==t.currentPath?a("v-btn",{staticClass:"flex-grow-1",on:{click:t.createFolder}},[a("v-icon",[t._v("mdi-folder-plus")])],1):t._e(),a("v-btn",{staticClass:"flex-grow-1",on:{click:t.refreshFileList}},[a("v-icon",[t._v("mdi-refresh")])],1),a("v-menu",{attrs:{"offset-y":!0,title:"Setup current list"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"flex-grow-1"},"v-btn",n,!1),i),[a("v-icon",{},[t._v("mdi-cog")])],1)]}}])},[a("v-list",[a("v-list-item",{staticClass:"minHeight36"},[a("v-checkbox",{staticClass:"mt-0",attrs:{"hide-details":"",label:"Hidden files"},model:{value:t.showHiddenFiles,callback:function(e){t.showHiddenFiles=e},expression:"showHiddenFiles"}})],1)],1)],1)],1)],1),a("v-card-subtitle",[t._v("Current path: "+t._s(""===this.currentPath?"/":this.currentPath))]),a("v-data-table",{staticClass:"files-table",attrs:{items:t.files,headers:t.headers,options:t.options,page:t.currentPage,"custom-sort":t.sortFiles,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"items-per-page":t.countPerPage,"footer-props":{itemsPerPageText:"Files"},"mobile-breakpoint":"0","item-key":"name"},on:{"update:page":function(e){t.currentPage=e},"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},"update:itemsPerPage":function(e){t.countPerPage=e},"update:items-per-page":function(e){t.countPerPage=e}},scopedSlots:t._u([{key:"no-data",fn:function(){return[a("div",{staticClass:"text-center"},[t._v("empty")])]},proxy:!0},{key:"item",fn:function(e){var i=e.item;return[a("tr",{staticClass:"file-list-cursor",attrs:{"data-name":i.filename},on:{contextmenu:function(e){return t.showContextMenu(e,i)},click:function(e){return t.clickRow(i)}}},[a("td",{staticClass:"pr-0 text-center",staticStyle:{width:"32px"}},[i.isDirectory?a("v-icon",[t._v("mdi-folder")]):t._e(),i.isDirectory?t._e():a("v-icon",[t._v("mdi-file")])],1),a("td",{staticClass:" "},[t._v(t._s(i.filename))]),a("td",{staticClass:"text-no-wrap text-right"},[t._v(t._s(i.isDirectory?"--":t.formatFilesize(i.size)))]),a("td",{staticClass:"text-right"},[t._v(t._s(t.formatDate(i.modified)))])])]}}])},[""!==t.currentPath?a("template",{slot:"body.prepend"},[a("tr",{staticClass:"file-list-cursor",on:{click:t.clickRowGoBack}},[a("td",{staticClass:"pr-0 text-center",staticStyle:{width:"32px"}},[a("v-icon",[t._v("mdi-folder-upload")])],1),a("td",{staticClass:" ",attrs:{colspan:"8"}},[t._v("..")])])]):t._e()],2)],1),a("v-menu",{attrs:{"position-x":t.contextMenu.x,"position-y":t.contextMenu.y,absolute:"","offset-y":""},model:{value:t.contextMenu.shown,callback:function(e){t.$set(t.contextMenu,"shown",e)},expression:"contextMenu.shown"}},[a("v-list",[t.contextMenu.item.isDirectory?t._e():a("v-list-item",{on:{click:function(e){return t.clickRow(t.contextMenu.item)}}},[a("v-icon",{staticClass:"mr-1"},[t._v("mdi-file-document-edit-outline")]),t._v(" Edit file ")],1),t.contextMenu.item.isDirectory?t._e():a("v-list-item",{on:{click:t.downloadFile}},[a("v-icon",{staticClass:"mr-1"},[t._v("mdi-cloud-download")]),t._v(" Download ")],1),t.contextMenu.item.isDirectory||"/config_examples"===t.currentPath?t._e():a("v-list-item",{on:{click:function(e){return t.renameFile(t.contextMenu.item)}}},[a("v-icon",{staticClass:"mr-1"},[t._v("mdi-rename-box")]),t._v(" Rename ")],1),t.contextMenu.item.isDirectory||"/config_examples"===t.currentPath?t._e():a("v-list-item",{on:{click:t.removeFile}},[a("v-icon",{staticClass:"mr-1"},[t._v("mdi-delete")]),t._v(" Delete ")],1),t.contextMenu.item.isDirectory&&""!==t.currentPath&&"/config_examples"!==t.currentPath?a("v-list-item",{on:{click:t.deleteDirectoryAction}},[a("v-icon",{staticClass:"mr-1"},[t._v("mdi-delete")]),t._v(" Delete ")],1):t._e()],1)],1),a("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:t.editor.showLoader,callback:function(e){t.$set(t.editor,"showLoader",e)},expression:"editor.showLoader"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[t._v(" Please stand by "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),a("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition","content-class":"config-editor-overlay"},model:{value:t.editor.show,callback:function(e){t.$set(t.editor,"show",e)},expression:"editor.show"}},[a("v-card",{attrs:{"d-flex":""}},[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){t.editor.show=!1}}},[a("v-icon",[t._v("mdi-close")])],1),a("v-toolbar-title",[t._v(t._s(t.editor.item.filename))]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{staticClass:"d-none d-md-flex",attrs:{dark:"",text:"",href:"https://www.klipper3d.org/Config_Reference.html",target:"_blank"}},[a("v-icon",{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-help")]),t._v("Config Reference")],1),"/config_examples"!==t.currentPath?a("v-divider",{staticClass:"d-none d-md-flex",attrs:{white:"",vertical:""}}):t._e(),"/config_examples"!==t.currentPath?a("v-btn",{attrs:{dark:"",text:""},on:{click:function(e){return t.saveFile(!1)}}},[a("v-icon",{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-content-save")]),a("span",{staticClass:"d-none d-sm-inline"},[t._v("Save")])],1):t._e(),"/config_examples"===t.currentPath||["printing","paused"].includes(t.printer_state)?t._e():a("v-divider",{staticClass:"d-none d-sm-flex",attrs:{white:"",vertical:""}}),"/config_examples"===t.currentPath||["printing","paused"].includes(t.printer_state)?t._e():a("v-btn",{staticClass:"d-none d-sm-flex",attrs:{dark:"",text:""},on:{click:function(e){return t.saveFile(!0)}}},[a("v-icon",{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-restart")]),t._v("Save & restart")],1)],1)],1),a("prism-editor",{staticClass:"my-editor",attrs:{readonly:t.editor.readonly,highlight:t.highlighter,"line-numbers":""},model:{value:t.editor.sourcecode,callback:function(e){t.$set(t.editor,"sourcecode",e)},expression:"editor.sourcecode"}})],1)],1),a("v-dialog",{attrs:{"max-width":"400"},model:{value:t.dialogRenameFile.show,callback:function(e){t.$set(t.dialogRenameFile,"show",e)},expression:"dialogRenameFile.show"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("Rename File")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Name",required:""},model:{value:t.dialogRenameFile.newName,callback:function(e){t.$set(t.dialogRenameFile,"newName",e)},expression:"dialogRenameFile.newName"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"",text:""},on:{click:function(e){t.dialogRenameFile.show=!1}}},[t._v("Cancel")]),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.renameFileAction}},[t._v("rename")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"400"},model:{value:t.dialogCreateFile.show,callback:function(e){t.$set(t.dialogCreateFile,"show",e)},expression:"dialogCreateFile.show"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("Create File")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Name",required:""},model:{value:t.dialogCreateFile.name,callback:function(e){t.$set(t.dialogCreateFile,"name",e)},expression:"dialogCreateFile.name"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"",text:""},on:{click:function(e){t.dialogCreateFile.show=!1}}},[t._v("Cancel")]),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.createFileAction}},[t._v("create")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"400"},model:{value:t.dialogCreateFolder.show,callback:function(e){t.$set(t.dialogCreateFolder,"show",e)},expression:"dialogCreateFolder.show"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("Create Folder")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Name",required:""},model:{value:t.dialogCreateFolder.name,callback:function(e){t.$set(t.dialogCreateFolder,"name",e)},expression:"dialogCreateFolder.name"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"",text:""},on:{click:function(e){t.dialogCreateFolder.show=!1}}},[t._v("Cancel")]),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.createFolderAction}},[t._v("create")])],1)],1)],1),a("v-snackbar",{attrs:{timeout:-1,value:!0,fixed:"",right:"",bottom:"",dark:""},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({staticStyle:{"min-width":"auto"},attrs:{color:"red",text:""},on:{click:t.cancelUpload}},"v-btn",i,!1),[a("v-icon",{staticClass:"0"},[t._v("mdi-close")])],1)]}}]),model:{value:t.uploadSnackbar.status,callback:function(e){t.$set(t.uploadSnackbar,"status",e)},expression:"uploadSnackbar.status"}},[t.uploadSnackbar.max>1?a("span",{staticClass:"mr-1"},[t._v("("+t._s(t.uploadSnackbar.number)+"/"+t._s(t.uploadSnackbar.max)+")")]):t._e(),a("strong",[t._v("Uploading "+t._s(t.uploadSnackbar.filename))]),a("br"),t._v(" "+t._s(Math.round(t.uploadSnackbar.percent))+" % @ "+t._s(t.formatFilesize(Math.round(t.uploadSnackbar.speed)))+"/s"),a("br"),a("v-progress-linear",{staticClass:"mt-2",attrs:{value:t.uploadSnackbar.percent}})],1)],1)],1)},ar=[],ir=a("e57a"),nr=(a("cabf"),a("8c7a")),rr=(a("07fa"),a("bf2e"),a("fa97"),{components:{PrismEditor:ir["a"]},data:function(){return{sortBy:"filename",sortDesc:!1,selected:[],headers:[{text:"",value:""},{text:"Name",value:"filename"},{text:"Filesize",value:"size",align:"right"},{text:"Last modified",value:"modified",align:"right"}],options:{},currentPage:1,files:[],currentPath:"/config",editor:{show:!1,showLoader:!1,readonly:!1,item:{filename:""},sourcecode:""},contextMenu:{shown:!1,isDirectory:!1,touchTimer:void 0,x:0,y:0,item:{}},dialogRenameFile:{show:!1,newName:"",item:{}},dialogCreateFile:{show:!1,name:""},dialogCreateFolder:{show:!1,name:""},uploadSnackbar:{status:!1,filename:"",percent:0,speed:0,total:0,number:0,max:0,cancelTokenSource:"",lastProgress:{time:0,loaded:0}}}},computed:Object(m["a"])(Object(m["a"])({},Object(h["e"])({filetree:function(t){return t.files.filetree},hostname:function(t){return t.socket.hostname},port:function(t){return t.socket.port},loadings:function(t){return t.socket.loadings},printer_state:function(t){return t.printer.print_stats.state}})),{},{countPerPage:{get:function(){return this.$store.state.gui.settings.configfiles.countPerPage},set:function(t){return this.$store.dispatch("gui/setSettings",{settings:{configfiles:{countPerPage:t}}})}},showHiddenFiles:{get:function(){return this.$store.state.gui.settings.configfiles.showHiddenFiles},set:function(t){return this.$store.dispatch("gui/setSettings",{settings:{configfiles:{showHiddenFiles:t}}})}}}),created:function(){this.loadPath()},methods:{highlighter:function(t){return Object(nr["highlight"])(t,nr["languages"].ini)},refreshFileList:function(){""===this.currentPath?(this.$socket.sendObj("server.files.get_directory",{path:"config"},"files/getDirectory"),this.$socket.sendObj("server.files.get_directory",{path:"config_examples"},"files/getDirectory")):this.$socket.sendObj("server.files.get_directory",{path:this.currentPath.substring(1)},"files/getDirectory")},formatDate:function(t){var e=new Date(t);return e.toLocaleString().replace(",","")},formatFilesize:function(t){var e=-1,a=[" kB"," MB"," GB"," TB","PB","EB","ZB","YB"];do{t/=1024,e++}while(t>1024);return Math.max(t,.1).toFixed(1)+a[e]},sortFiles:function(t,e,a){return e=e.length?e[0]:"filename",a=a[0],void 0!==t&&(t.sort((function(t,a){if(t[e]===a[e])return 0;if(null===t[e]||void 0===t[e])return-1;if(null===a[e]||void 0===a[e])return 1;if(t[e].constructor===String&&a[e].constructor===String)return t[e].localeCompare(a[e],void 0,{sensivity:"base"});if(t[e]instanceof Array&&a[e]instanceof Array){var i=t[e].length?t.filament.reduce((function(t,e){return t+e})):0,n=a[e].length?a.filament.reduce((function(t,e){return t+e})):0;return i-n}return t[e]-a[e]})),a&&t.reverse(),t.sort((function(t,e){return t.isDirectory===e.isDirectory?0:t.isDirectory?-1:1}))),t},loadPath:function(){var t=this.currentPath.substring(1).split("/");this.files=st(this.filetree,t),1===t.length&&""===this.currentPath&&(this.files=this.files.filter((function(t){return!["gcodes","docs"].includes(t.filename)}))),this.showHiddenFiles||(this.files=this.files.filter((function(t){return"."!==t.filename.substr(0,1)})))},clickRow:function(t){var e=this;if(t.isDirectory)this.currentPath+="/"+t.filename,this.currentPage=1;else{this.editor.showLoader=!0,this.editor.sourcecode="",this.editor.item=t;var a="//"+this.hostname+":"+this.port+"/server/files"+this.currentPath+"/"+t.filename+"?time="+Date.now();fetch(a,{cache:"no-cache"}).then((function(t){return t.text()})).then((function(t){e.editor.sourcecode=t,e.editor.show=!0,e.editor.showLoader=!1,e.editor.readonly=!1,"/config_examples"===e.currentPath&&(e.editor.readonly=!0)}))}},clickRowGoBack:function(){this.currentPath=this.currentPath.substr(0,this.currentPath.lastIndexOf("/"))},saveFile:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=new File([this.editor.sourcecode],this.editor.item.filename),i=new FormData;i.append("file",a),i.append("root","config"),this.currentPath.length>7&&i.append("path",this.currentPath.substring(8)),At.a.post("//"+this.hostname+":"+this.port+"/server/files/upload",i,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){t.$toast.success("File '"+t.editor.item.filename+"' successfully saved."),t.editor.show=!1,t.editor.sourcecode="",e&&"moonraker.conf"===t.editor.item.filename?t.$socket.sendObj("machine.services.restart",{service:"moonraker"}):e&&(t.$store.commit("server/addEvent",{message:"FIRMWARE_RESTART",type:"command"}),t.$socket.sendObj("printer.gcode.script",{script:"FIRMWARE_RESTART"}))})).catch((function(){t.$toast.error("Error save "+t.editor.item.filename)}))},showContextMenu:function(t,e){var a=this;t.preventDefault(),this.contextMenu.shown=!0,this.contextMenu.x=t.clientX,this.contextMenu.y=t.clientY,this.contextMenu.item=e,this.$nextTick((function(){a.contextMenu.shown=!0}))},downloadFile:function(){var t=this.currentPath+"/"+this.contextMenu.item.filename,e=document.createElement("a");e.download=name,e.href="//"+this.hostname+":"+this.port+"/server/files"+t,document.body.appendChild(e),e.click(),document.body.removeChild(e)},createFolder:function(){this.dialogCreateFolder.name="",this.dialogCreateFolder.show=!0},createFolderAction:function(){this.dialogCreateFolder.show=!1,this.$socket.sendObj("server.files.post_directory",{path:this.currentPath.substring(1)+"/"+this.dialogCreateFolder.name},"files/getCreateDir")},createFile:function(){this.dialogCreateFile.name="",this.dialogCreateFile.show=!0},createFileAction:function(){var t=this,e=new File([""],this.dialogCreateFile.name),a=new FormData;a.append("file",e),a.append("root","config"),this.currentPath.length>7&&a.append("path",this.currentPath.substring(8)),At.a.post("//"+this.hostname+":"+this.port+"/server/files/upload",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){t.dialogCreateFile.show=!1,t.dialogCreateFile.name=""})).catch((function(){window.console.error("Error save "+t.editor.item.filename)}))},renameFile:function(t){this.dialogRenameFile.item=t,this.dialogRenameFile.newName=t.filename,this.dialogRenameFile.show=!0},renameFileAction:function(){this.dialogRenameFile.show=!1,this.$socket.sendObj("server.files.move",{source:this.currentPath+"/"+this.dialogRenameFile.item.filename,dest:this.currentPath+"/"+this.dialogRenameFile.newName},"files/getMove")},removeFile:function(){this.$socket.sendObj("server.files.delete_file",{path:this.currentPath+"/"+this.contextMenu.item.filename},"files/getDeleteFile")},deleteDirectoryAction:function(){this.$socket.sendObj("server.files.delete_directory",{path:this.currentPath+"/"+this.contextMenu.item.filename},"files/getDeleteDir")},uploadFileButton:function(){this.$refs.fileUpload.click()},uploadFile:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var a,i,n,r,s,o,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.$refs.fileUpload.files.length){e.next=28;break}t.$store.commit("socket/addLoading",{name:"configFileUpload"}),a=[],t.uploadSnackbar.number=0,t.uploadSnackbar.max=t.$refs.fileUpload.files.length,i=Object(d["a"])(t.$refs.fileUpload.files),e.prev=6,i.s();case 8:if((n=i.n()).done){e.next=17;break}return r=n.value,t.uploadSnackbar.number++,e.next=13,t.doUploadFile(r);case 13:s=e.sent,a.push(s);case 15:e.next=8;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](6),i.e(e.t0);case 22:return e.prev=22,i.f(),e.finish(22);case 25:for(t.$store.commit("socket/removeLoading",{name:"configFileUpload"}),o=0,c=a;o<c.length;o++)l=c[o],t.$toast.success("Upload of "+l+" successful!");t.$refs.fileUpload.value="";case 28:case"end":return e.stop()}}),e,null,[[6,19,22,25]])})))()},doUploadFile:function(t){var e=this,a=this.$toast,i=new FormData,n=t.name.replace(" ","_");return this.uploadSnackbar.filename=n,this.uploadSnackbar.status=!0,this.uploadSnackbar.percent=0,this.uploadSnackbar.speed=0,this.uploadSnackbar.lastProgress.loaded=0,this.uploadSnackbar.lastProgress.time=0,i.append("root","config"),i.append("file",t,(this.currentPath+"/"+n).substring(7)),this.$store.commit("socket/addLoading",{name:"configFileUpload"}),new Promise((function(t){e.uploadSnackbar.cancelTokenSource=At.a.CancelToken.source(),At.a.post("//"+e.hostname+":"+e.port+"/server/files/upload",i,{headers:{"Content-Type":"multipart/form-data"},cancelToken:e.uploadSnackbar.cancelTokenSource.token,onUploadProgress:function(t){if(e.uploadSnackbar.percent=100*t.loaded/t.total,e.uploadSnackbar.lastProgress.time){var a=t.timeStamp-e.uploadSnackbar.lastProgress.time,i=t.loaded-e.uploadSnackbar.lastProgress.loaded;a&&(e.uploadSnackbar.speed=i/(a/1e3))}e.uploadSnackbar.lastProgress.time=t.timeStamp,e.uploadSnackbar.lastProgress.loaded=t.loaded,e.uploadSnackbar.total=t.total}}).then((function(a){e.uploadSnackbar.status=!1,t(a.data.result)})).catch((function(){e.uploadSnackbar.status=!1,e.$store.commit("socket/removeLoading",{name:"configFileUpload"}),a.error("Cannot upload the file!")}))}))},cancelUpload:function(){this.uploadSnackbar.cancelTokenSource.cancel(),this.uploadSnackbar.status=!1}},watch:{config:{deep:!0,handler:function(){this.loadPath()}},config_examples:{deep:!0,handler:function(){this.loadPath()}},filetree:{deep:!0,handler:function(){this.loadPath()}},currentPath:{handler:function(){this.loadPath()}},showHiddenFiles:{handler:function(){this.loadPath()}}}}),sr=rr,or=(a("9fab"),Object(y["a"])(sr,er,ar,!1,null,null,null)),cr=or.exports;k()(or,{VBtn:x["a"],VCard:S["a"],VCardActions:P["a"],VCardSubtitle:P["b"],VCardText:P["c"],VCardTitle:P["d"],VCheckbox:pt["a"],VCol:O["a"],VDataTable:ft["a"],VDialog:Pt["a"],VDivider:Ut["a"],VIcon:V["a"],VItemGroup:Ot["b"],VList:ht["a"],VListItem:vt["a"],VMenu:gt["a"],VProgressLinear:Nt["a"],VRow:j["a"],VSnackbar:Bt["a"],VSpacer:Vt["a"],VTextField:bt["a"],VToolbar:T["a"],VToolbarItems:$["a"],VToolbarTitle:$["b"]});var lr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(this["printer/getFilamentSwitchSensors"],(function(e,i){return a("div",{key:i},[a("v-card",{staticClass:"mt-6"},[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{attrs:{left:""}},[t._v("mdi-printer-3d-nozzle-alert")]),t._v(t._s(e.name))],1)]),a("v-spacer"),a("v-switch",{staticClass:"settingsRunoutSwitchInput my-0",attrs:{"hide-details":""},on:{change:function(a){return t.changeSensor(e)}},model:{value:e.enabled,callback:function(a){t.$set(e,"enabled",a)},expression:"runout.enabled"}})],1),e.enabled?a("v-card-text",[a("v-chip",{staticClass:"d-block text-center",attrs:{label:"",block:"",color:e.filament_detected?"green":"red"}},[t._v(t._s(e.filament_detected?"detected":"empty"))])],1):t._e()],1)],1)})),0)},dr=[],ur={components:{},data:function(){return{}},computed:Object(m["a"])({},Object(h["c"])(["printer/getFilamentSwitchSensors"])),methods:{changeSensor:function(t){var e="SET_FILAMENT_SENSOR SENSOR="+t.name+" ENABLE="+(t.enabled?1:0);this.$store.commit("server/addEvent",{message:e,type:"command"}),this.$socket.sendObj("printer.gcode.script",{script:e})}}},mr=ur,pr=Object(y["a"])(mr,lr,dr,!1,null,null,null),fr=pr.exports;k()(pr,{VCard:S["a"],VCardText:P["c"],VChip:Gn["a"],VIcon:V["a"],VSpacer:Vt["a"],VSwitch:jt["a"],VToolbar:T["a"],VToolbarTitle:$["b"]});var hr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{attrs:{left:""}},[t._v("mdi-file-document-edit")]),t._v("Logfiles")],1)])],1),a("v-card-text",{class:"text-center text-lg-left py-0"},[a("v-container",{attrs:{"pb-0":"","px-0":""}},[a("v-row",[a("v-col",{class:"col-12"+("ready"!==t.klippy_state?"col-md-6":"col-md-12")},[a("v-btn",{attrs:{href:"//"+t.hostname+":"+t.port+"/server/files/klippy.log",block:"",color:"primary"}},[a("v-icon",{staticClass:"mr-2"},[t._v("mdi-download")]),t._v("Klipper")],1)],1),a("v-col",{class:"col-12 pt-0 "+("ready"!==t.klippy_state?"col-md-6 mt-md-3 ":"col-md-12")},[a("v-btn",{attrs:{href:"//"+t.hostname+":"+t.port+"/server/files/moonraker.log",block:"",color:"primary"}},[a("v-icon",{staticClass:"mr-2"},[t._v("mdi-download")]),t._v("Moonraker")],1)],1)],1)],1)],1)],1)},vr=[],gr={components:{},data:function(){return{}},computed:Object(m["a"])({},Object(h["e"])({hostname:function(t){return t.socket.hostname},port:function(t){return t.socket.port},klippy_state:function(t){return t.server.klippy_state}}))},br=gr,_r=Object(y["a"])(br,hr,vr,!1,null,null,null),yr=_r.exports;k()(_r,{VBtn:x["a"],VCard:S["a"],VCardText:P["c"],VCol:O["a"],VContainer:D["a"],VIcon:V["a"],VRow:j["a"],VToolbar:T["a"],VToolbarTitle:$["b"]});var Cr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{attrs:{left:""}},[t._v("mdi-update")]),t._v("Update Manager")],1)]),a("v-spacer"),a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"px-2 minwidth-0",attrs:{small:"",color:"primary",loading:t.loadings.includes("loadingBtnSyncUpdateManager"),disabled:["printing","paused"].includes(t.printer_state)},on:{click:t.btnSync}},"v-btn",n,!1),i),[a("v-icon",{attrs:{small:""}},[t._v("mdi-refresh")])],1)]}}])},[a("span",[t._v("Check for updates")])])],1),a("v-card-text",{staticClass:"px-0 py-0"},[a("v-container",{attrs:{"py-0":"","px-0":""}},[t._l(t.updateableSoftwares,(function(e,i){return a("div",{key:i},[a("v-divider",{staticClass:"my-0"}),a("v-row",{staticClass:"py-2"},[a("v-col",{staticClass:"pl-6"},[a("strong",[t._v(t._s("name"in e?e.name:i))]),a("br"),a("span",{class:t.getVersionClickable(e)?"primary--text cursor--pointer":"",on:{click:function(a){return t.openCommitsOverlay(i,e)}}},[t._v(t._s(t.getVersionOutput(e)))])]),a("v-col",{staticClass:"col-auto pr-6 text-right",attrs:{"align-self":"center"}},[a("v-chip",{staticClass:"minwidth-0 px-2 text-uppercase",attrs:{small:"",label:"",outlined:"",color:t.getBtnColor(e),disabled:t.getBtnDisabled(e)},on:{click:function(e){return t.updateModule(i)}}},[a("v-icon",{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-"+t._s(t.getBtnIcon(e)))]),t._v(t._s(t.getBtnText(e)))],1)],1)],1)],1)})),"system"in t.version_info?a("div",[a("v-divider",{staticClass:"my-0 border-top-2"}),a("v-row",{staticClass:"pt-2"},[a("v-col",{staticClass:"col-auto pl-6 text-no-wrap"},[a("strong",[t._v("System")]),a("br"),t.version_info.system.package_count>0?a("v-tooltip",{attrs:{top:"","max-width":300},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("span",t._g(t._b({},"span",n,!1),i),[t._v(t._s(t.version_info.system.package_count)+" packages can be upgraded")])]}}],null,!1,1735567623)},[a("span",[t._v(t._s(t.version_info.system.package_list.join(", ")))])]):t._e(),0===t.version_info.system.package_count?a("span",[t._v("OS-Packages")]):t._e()],1),a("v-col",{staticClass:"pr-6 text-right",attrs:{"align-self":"center"}},[a("v-chip",{staticClass:"minwidth-0 px-2 text-uppercase",attrs:{small:"",label:"",outlined:"",color:t.version_info.system.package_count?"primary":"green",disabled:!t.version_info.system.package_count||"printing"===t.printer_state},on:{click:t.updateSystem}},[a("v-icon",{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-"+t._s(t.version_info.system.package_count?"progress-upload":"check"))]),t._v(t._s(t.version_info.system.package_count?"upgrade":"up-to-date"))],1)],1)],1)],1):t._e()],2)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"60%","max-width":"800"},model:{value:t.commitsOverlay.bool,callback:function(e){t.$set(t.commitsOverlay,"bool",e)},expression:"commitsOverlay.bool"}},[a("v-card",{attrs:{dark:""}},[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{attrs:{left:""}},[t._v("mdi-update")]),t._v("Commits")],1)]),a("v-spacer"),a("v-btn",{staticClass:"minwidth-0",attrs:{small:"",color:"grey darken-3"},on:{click:function(e){t.commitsOverlay.bool=!1}}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-close-thick")])],1)],1),t.commitsOverlay.loading?a("v-card-text",{staticClass:"py-5"},[a("v-row",{staticClass:"pt-0"},[a("v-col",[a("v-progress-linear",{attrs:{color:"primary",indeterminate:""}})],1)],1)],1):t._e(),t.commitsOverlay.loading?t._e():a("v-card-text",{staticClass:"py-0",staticStyle:{"max-height":"400px","overflow-y":"scroll"}},[a("v-row",[a("v-col",{staticClass:"pt-3 pl-0"},[a("v-timeline",{attrs:{"align-top":"",dense:""}},t._l(t.commitsOverlay.outputs,(function(e){return a("v-timeline-item",{key:e.sha,attrs:{color:"primary",small:""}},[a("v-row",{staticClass:"pt-0"},[a("v-col",[a("a",{staticClass:"font-weight-bold white--text",attrs:{href:e.url,target:"_blank"}},[t._v(t._s(e.title))]),a("br"),e.message?a("p",{staticClass:"mb-0",domProps:{innerHTML:t._s(e.message.replace(/(?:\r\n|\r|\n)/g,"<br />"))}}):t._e(),a("div",{staticClass:"caption"},[a("strong",[t._v(t._s(e.author))]),t._v(" committed at "+t._s(e.date.toLocaleString())+" ")])])],1)],1)})),1)],1)],1)],1)],1)],1)],1)},kr=[],xr=a("8d61"),wr=a.n(xr),Sr={components:{},data:function(){return{commitsOverlay:{bool:!1,loading:!1,response:[],outputs:[]}}},computed:Object(m["a"])(Object(m["a"])({},Object(h["e"])({loadings:function(t){return t.socket.loadings},remoteMode:function(t){return t.socket.remoteMode},printer_state:function(t){return t.printer.print_stats.state},version_info:function(t){return t.server.updateManager.version_info}})),{},{updateableSoftwares:{get:function(){return this.$store.getters["server/updateManager/getUpdateableSoftwares"]}}}),methods:{btnSync:function(){this.$store.commit("socket/addLoading",{name:"loadingBtnSyncUpdateManager"}),this.$socket.sendObj("machine.update.status",{refresh:!0},"server/updateManager/getStatus")},getBtnColor:function(t){return"object"===Object(Et["a"])(t)&&!1!==t?"detached"in t&&t.detached||"is_dirty"in t&&t.is_dirty?"orange":"is_valid"in t&&!t.is_valid?"red":"version"in t&&"remote_version"in t&&wr.a.gt(t.remote_version,t.version)?"primary":"green":"red"},getBtnText:function(t){return"object"===Object(Et["a"])(t)&&!1!==t?"detached"in t&&t.detached?"detached":"is_valid"in t&&!t.is_valid?"invalid":"is_dirty"in t&&t.is_dirty?"dirty":"version"in t&&"remote_version"in t&&wr.a.gt(t.remote_version,t.version)?"update":"up-to-date":"ERROR"},getBtnIcon:function(t){return"object"===Object(Et["a"])(t)&&!1!==t?"detached"in t&&t.detached||"is_valid"in t&&!t.is_valid||"is_dirty"in t&&t.is_dirty?"alert-circle":"version"in t&&"remote_version"in t&&wr.a.gt(t.remote_version,t.version)?"progress-upload":"check":"ERROR"},getBtnDisabled:function(t){if(["printing","paused"].includes(this.printer_state))return!0;if("detached"in t&&t.detached)return!0;if("object"===Object(Et["a"])(t)&&!1!==t){if("is_valid"in t&&!t.is_valid)return!0;if("version"in t&&"remote_version"in t&&wr.a.gt(t.remote_version,t.version))return!1}return!0},getVersionOutput:function(t){var e="version"in t?t.version:"?",a="remote_version"in t?t.remote_version:"?",i="";return"remote_alias"in t&&"origin"!==t.remote_alias&&(i+=t.remote_alias),"branch"in t&&"master"!==t.branch&&(""!==i&&(i+="/"),i+=t.branch),""!==i&&(i+=": "),i+=wr.a.gt(a,e)?e+" > "+a:e,i},getVersionClickable:function(t){return"branch"in t&&"master"===t.branch&&"current_hash"in t&&"remote_hash"in t&&t.current_hash!==t.remote_hash},updateModule:function(t){["klipper","moonraker"].includes(t)?this.$socket.sendObj("machine.update."+t,{}):this.$socket.sendObj("machine.update.client",{name:t})},updateSystem:function(){this.$socket.sendObj("machine.update.system",{})},openCommitsOverlay:function(t,e){var a=this;if(["klipper","moonraker"].includes(t)&&this.getVersionClickable(e)){this.commitsOverlay.bool=!0,this.commitsOverlay.loading=!0;var i="";switch(t){case"klipper":i="kevinOConnor";break;case"moonraker":i="arksine";break}var n="https://api.github.com/repos/"+i+"/"+t+"/commits";n&&At.a.get(n).then((function(t){a.commitsOverlay.response=t,a.commitsOverlay.outputs.splice(0,a.commitsOverlay.outputs.length);var i=t.data.findIndex((function(t){return t.sha===e.current_hash}));-1!==i&&(a.commitsOverlay.response=t.data.splice(0,i).sort((function(t,e){var a=new Date(t.commit.author.date),i=new Date(e.commit.author.date);return i-a})),a.commitsOverlay.response.forEach((function(t){var e=new Date(t.commit.author.date),i=t.commit.author.name,n=t.commit.message.indexOf("\n\n"),r=t.commit.message.lastIndexOf("\n\n");n===r&&t.commit.message.lastIndexOf("\r")>n&&(r=t.commit.message.lastIndexOf("\r")),a.commitsOverlay.outputs.push({sha:t.sha,date:e,author:i,url:t.html_url,title:t.commit.message.substr(0,n),message:n+2<r-2?t.commit.message.substr(n+2,r-n-2):"",firstIndex:n,lastIndex:r})}))),a.commitsOverlay.loading=!1}))}}}},Pr=Sr,Or=(a("dd13"),a("8414")),Dr=a("1e06"),Vr=Object(y["a"])(Pr,Cr,kr,!1,null,"1dd55aa0",null),jr=Vr.exports;k()(Vr,{VBtn:x["a"],VCard:S["a"],VCardText:P["c"],VChip:Gn["a"],VCol:O["a"],VContainer:D["a"],VDialog:Pt["a"],VDivider:Ut["a"],VIcon:V["a"],VProgressLinear:Nt["a"],VRow:j["a"],VSpacer:Vt["a"],VTimeline:Or["a"],VTimelineItem:Dr["a"],VToolbar:T["a"],VToolbarTitle:$["b"],VTooltip:qt["a"]});var Tr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{attrs:{left:""}},[t._v("mdi-printer-3d")]),t._v("Remote Printers")],1)])],1),a("v-card-text",{staticClass:"py-3"},[a("v-container",[t._l(this["farm/getPrinters"],(function(e,i){return a("v-row",{key:i},[a("v-col",{staticClass:"rounded transition-swing secondary py-2 px-2 mb-6",staticStyle:{cursor:"pointer"}},[a("v-row",{attrs:{align:"center"}},[a("v-col",{staticClass:"col-auto pr-0"},[e.socket.isConnecting?a("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}):t._e(),e.socket.isConnecting?t._e():a("v-icon",{attrs:{color:e.socket.isConnected?"green":"red"}},[t._v("mdi-"+t._s(e.socket.isConnected?"checkbox-marked-circle":"cancel"))])],1),a("v-col",[t._v(t._s(e.socket.hostname)+t._s(80!==parseInt(e.socket.port)?":"+e.socket.port:""))]),a("v-col",{staticClass:"col-auto"},[a("v-btn",{staticClass:"minwidth-0",attrs:{small:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.editPrinter(i)}}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-pencil")])],1)],1)],1)],1)],1)})),a("v-row",[a("v-col",{staticClass:"text-center mt-0"},[a("v-btn",{on:{click:function(e){t.dialogAddPrinter.bool=!0}}},[t._v("add printer")])],1)],1)],2)],1)],1),a("v-dialog",{attrs:{persistent:"",width:400},model:{value:t.dialogAddPrinter.bool,callback:function(e){t.$set(t.dialogAddPrinter,"bool",e)},expression:"dialogAddPrinter.bool"}},[a("v-card",{attrs:{dark:""}},[a("v-toolbar",{attrs:{flat:"",dense:"",color:"primary"}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{staticClass:"mdi mdi-connection",attrs:{left:""}}),t._v(" Add Printer ")],1)]),a("v-spacer"),a("v-btn",{staticClass:"minwidth-0",attrs:{small:""},on:{click:function(e){t.dialogAddPrinter.bool=!1}}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-close-thick")])],1)],1),t.remoteMode?a("v-card-text",{staticClass:"pt-3"},[a("v-container",{staticClass:"px-0 py-0"},[a("v-row",[a("v-col",{staticClass:"col-8"},[a("v-text-field",{attrs:{rules:[function(t){return!!t||"Hostname is required"},function(t){return!t.startsWith("http:")||"invalid hostname/IP"},function(t){return!t.startsWith("https:")||"invalid hostname/IP"}],label:"Hostname/IP",required:""},model:{value:t.dialogAddPrinter.hostname,callback:function(e){t.$set(t.dialogAddPrinter,"hostname",e)},expression:"dialogAddPrinter.hostname"}})],1),a("v-col",{staticClass:"col-4"},[a("v-text-field",{attrs:{rules:[function(t){return!!t||"Port is required"}],label:"Port",required:""},model:{value:t.dialogAddPrinter.port,callback:function(e){t.$set(t.dialogAddPrinter,"port",e)},expression:"dialogAddPrinter.port"}})],1)],1),a("v-row",[a("v-col",{staticClass:"text-right"},[a("v-btn",{staticClass:"middle",attrs:{color:"white",outlined:""},on:{click:t.addPrinter}},[t._v(" add printer ")])],1)],1)],1)],1):t._e(),t.remoteMode?t._e():a("v-card-text",{staticClass:"pt-3"},[a("v-container",{staticClass:"px-0 py-0"},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-text-field",{attrs:{rules:[function(t){return!!t||"Hostname is required"},function(t){return!t.startsWith("http:")||"invalid hostname/IP"},function(t){return!t.startsWith("https:")||"invalid hostname/IP"}],label:"Hostname/IP",required:""},model:{value:t.dialogAddPrinter.hostname,callback:function(e){t.$set(t.dialogAddPrinter,"hostname",e)},expression:"dialogAddPrinter.hostname"}})],1)],1),a("v-row",[a("v-col",{staticClass:"col-6"},[a("v-text-field",{attrs:{rules:[function(t){return!!t||"Web-Port is required"}],label:"Web-Port",required:""},model:{value:t.dialogAddPrinter.webPort,callback:function(e){t.$set(t.dialogAddPrinter,"webPort",e)},expression:"dialogAddPrinter.webPort"}})],1),a("v-col",{staticClass:"col-6"},[a("v-text-field",{attrs:{rules:[function(t){return!!t||"API-Port is required"}],label:"API-Port",required:""},model:{value:t.dialogAddPrinter.port,callback:function(e){t.$set(t.dialogAddPrinter,"port",e)},expression:"dialogAddPrinter.port"}})],1)],1),a("v-row",[a("v-col",{staticClass:"text-right"},[a("v-btn",{staticClass:"middle",attrs:{color:"white",outlined:""},on:{click:t.addPrinter}},[t._v(" add printer ")])],1)],1)],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:400},model:{value:t.dialogEditPrinter.bool,callback:function(e){t.$set(t.dialogEditPrinter,"bool",e)},expression:"dialogEditPrinter.bool"}},[a("v-card",{attrs:{dark:""}},[a("v-toolbar",{attrs:{flat:"",dense:"",color:"primary"}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{staticClass:"mdi mdi-connection",attrs:{left:""}}),t._v(" Edit Printer ")],1)]),a("v-spacer"),a("v-btn",{staticClass:"minwidth-0",attrs:{small:""},on:{click:function(e){t.dialogEditPrinter.bool=!1}}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-close-thick")])],1)],1),t.remoteMode?a("v-card-text",{staticClass:"pt-3"},[a("v-container",{staticClass:"px-0 py-0"},[a("v-row",[a("v-col",{staticClass:"col-8"},[a("v-text-field",{attrs:{rules:[function(t){return!!t||"Hostname is required"},function(t){return!t.startsWith("http:")||"invalid hostname/IP"},function(t){return!t.startsWith("https:")||"invalid hostname/IP"}],label:"Hostname/IP",required:""},model:{value:t.dialogEditPrinter.hostname,callback:function(e){t.$set(t.dialogEditPrinter,"hostname",e)},expression:"dialogEditPrinter.hostname"}})],1),a("v-col",{staticClass:"col-4"},[a("v-text-field",{attrs:{rules:[function(t){return!!t||"Port is required"}],label:"Port",required:""},model:{value:t.dialogEditPrinter.port,callback:function(e){t.$set(t.dialogEditPrinter,"port",e)},expression:"dialogEditPrinter.port"}})],1)],1),a("v-row",[a("v-col",{},[a("v-btn",{staticClass:"middle minwidth-0",attrs:{color:"red",outlined:""},on:{click:t.delPrinter}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-delete")])],1)],1),a("v-col",{staticClass:"text-right"},[a("v-btn",{staticClass:"middle",attrs:{color:"white",outlined:""},on:{click:t.updatePrinter}},[t._v(" update printer ")])],1)],1)],1)],1):t._e(),t.remoteMode?t._e():a("v-card-text",{staticClass:"pt-3"},[a("v-container",{staticClass:"px-0 py-0"},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-text-field",{attrs:{rules:[function(t){return!!t||"Hostname is required"},function(t){return!t.startsWith("http:")||"invalid hostname/IP"},function(t){return!t.startsWith("https:")||"invalid hostname/IP"}],label:"Hostname/IP",required:""},model:{value:t.dialogEditPrinter.hostname,callback:function(e){t.$set(t.dialogEditPrinter,"hostname",e)},expression:"dialogEditPrinter.hostname"}})],1)],1),a("v-row",[a("v-col",{staticClass:"col-6"},[a("v-text-field",{attrs:{rules:[function(t){return!!t||"Web-Port is required"}],label:"Web-Port",required:""},model:{value:t.dialogEditPrinter.webPort,callback:function(e){t.$set(t.dialogEditPrinter,"webPort",e)},expression:"dialogEditPrinter.webPort"}})],1),a("v-col",{staticClass:"col-6"},[a("v-text-field",{attrs:{rules:[function(t){return!!t||"API-Port is required"}],label:"API-Port",required:""},model:{value:t.dialogEditPrinter.port,callback:function(e){t.$set(t.dialogEditPrinter,"port",e)},expression:"dialogEditPrinter.port"}})],1)],1),a("v-row",[a("v-col",{},[a("v-btn",{staticClass:"middle minwidth-0",attrs:{color:"red",outlined:""},on:{click:t.delPrinter}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-delete")])],1)],1),a("v-col",{staticClass:"text-right"},[a("v-btn",{staticClass:"middle",attrs:{color:"white",outlined:""},on:{click:t.updatePrinter}},[t._v(" update printer ")])],1)],1)],1)],1)],1)],1)],1)},$r=[],Mr={components:{},data:function(){return{dialogAddPrinter:{bool:!1,hostname:"",port:"7125",webPort:"80"},dialogEditPrinter:{bool:!1,hostname:"",port:"",webPort:"80",index:""}}},computed:Object(m["a"])(Object(m["a"])({},Object(h["e"])({remoteMode:function(t){return t.socket.remoteMode},protocol:function(t){return t.socket.protocol}})),Object(h["c"])(["farm/getPrinters"])),methods:{addPrinter:function(){this.$store.commit("farm/addPrinter",{hostname:this.dialogAddPrinter.hostname,port:this.dialogAddPrinter.port,webPort:this.dialogAddPrinter.webPort,protocol:this.protocol}),this.dialogAddPrinter.hostname="",this.dialogAddPrinter.port="7125",this.dialogAddPrinter.webPort="80",this.dialogAddPrinter.bool=!1,this.$store.dispatch("farm/savePrinters")},editPrinter:function(t){this.dialogEditPrinter.hostname=this["farm/getPrinters"][t].socket.hostname,this.dialogEditPrinter.port=this["farm/getPrinters"][t].socket.port,this.dialogEditPrinter.webPort=this["farm/getPrinters"][t].socket.webPort,this.dialogEditPrinter.index=t,this.dialogEditPrinter.bool=!0},updatePrinter:function(){this.$store.commit("farm/"+this.dialogEditPrinter.index+"/setSocketData",{hostname:this.dialogEditPrinter.hostname,port:this.dialogEditPrinter.port,webPort:this.dialogEditPrinter.webPort,isConnecting:!0}),this.$store.dispatch("farm/"+this.dialogEditPrinter.index+"/reconnect"),this.dialogEditPrinter.bool=!1,this.$store.dispatch("farm/savePrinters")},delPrinter:function(){this.$store.commit("farm/removePrinter",{name:this.dialogEditPrinter.index}),this.$store.dispatch("farm/savePrinters"),this.dialogEditPrinter.bool=!1,this.$store.dispatch("farm/savePrinters")}}},Fr=Mr,Er=Object(y["a"])(Fr,Tr,$r,!1,null,null,null),Rr=Er.exports;k()(Er,{VBtn:x["a"],VCard:S["a"],VCardText:P["c"],VCol:O["a"],VContainer:D["a"],VDialog:Pt["a"],VIcon:V["a"],VProgressCircular:Le["a"],VRow:j["a"],VSpacer:Vt["a"],VTextField:bt["a"],VToolbar:T["a"],VToolbarTitle:$["b"]});var Ar=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{attrs:{left:""}},[t._v("mdi-fire")]),t._v("Preheat Presets")],1)])],1),a("v-card-text",{staticClass:"py-3"},[a("v-container",[t._l(this["gui/getPreheatPresets"],(function(e,i){return a("v-row",{key:i},[a("v-col",{staticClass:"rounded transition-swing secondary py-2 px-2 mb-6",staticStyle:{cursor:"pointer"}},[a("v-row",{attrs:{align:"center"}},[a("v-col",{staticClass:"pl-6"},[a("strong",[t._v(t._s(e.name))])]),a("v-col",{staticClass:"col-6"},t._l(Object.entries(e.values),(function(e){var i=e[0],n=e[1];return a("div",{key:i},[n.bool?a("span",{staticClass:"text-no-wrap"},[t._v(t._s(t.convertPresetName(i,n))+": "+t._s(n.value)+"°C")]):t._e()])})),0),a("v-col",{staticClass:"col-auto text-right"},[a("v-btn",{staticClass:"minwidth-0 float-right",attrs:{small:""},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.editPreset(e)}}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-pencil")])],1)],1)],1)],1)],1)})),a("v-row",[a("v-col",{staticClass:"rounded transition-swing secondary py-2 px-2 mb-6",staticStyle:{cursor:"pointer"}},[a("v-row",{attrs:{align:"center"}},[a("v-col",{staticClass:"pl-6"},[a("strong",[t._v("Cooldown")])]),a("v-col",{staticClass:"col-auto text-right"},[a("v-btn",{staticClass:"minwidth-0 float-right",attrs:{small:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.editCooldown(e)}}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-pencil")])],1)],1)],1)],1)],1),a("v-row",[a("v-col",{staticClass:"text-center mt-0"},[a("v-btn",{on:{click:t.createPreset}},[t._v("add preset")])],1)],1)],2)],1)],1),a("v-dialog",{attrs:{persistent:"",width:600},model:{value:t.dialog.bool,callback:function(e){t.$set(t.dialog,"bool",e)},expression:"dialog.bool"}},[a("v-card",{attrs:{dark:""}},[a("v-toolbar",{attrs:{flat:"",dense:"",color:"primary"}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{staticClass:"mdi mdi-fire",attrs:{left:""}}),t._v(" "+t._s(null===t.dialog.index?"Create":"Edit")+" Preset ")],1)]),a("v-spacer"),a("v-btn",{staticClass:"minwidth-0",attrs:{small:""},on:{click:function(e){t.dialog.bool=!1}}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-close-thick")])],1)],1),a("v-card-text",{staticClass:"pt-3"},[a("v-container",{staticClass:"pb-0"},[a("v-form",{on:{submit:function(e){return e.preventDefault(),t.savePreset(e)}},model:{value:t.dialog.valid,callback:function(e){t.$set(t.dialog,"valid",e)},expression:"dialog.valid"}},[t.dialog.bool?[a("v-row",[a("v-col",{staticClass:"col-6"},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-text-field",{attrs:{label:"Name","hide-details":"auto",rules:[t.rules.required,t.rules.unique],dense:""},model:{value:t.dialog.name,callback:function(e){t.$set(t.dialog,"name",e)},expression:"dialog.name"}})],1)],1),t._l(this["printer/getHeaters"],(function(e){return a("v-row",{key:e.name,staticClass:"mt-2 mx-0 mb-2",attrs:{align:"center"}},[a("v-checkbox",{staticClass:"shrink mt-0",attrs:{"hide-details":""},model:{value:t.dialog.values[e.name].bool,callback:function(a){t.$set(t.dialog.values[e.name],"bool",a)},expression:"dialog.values[heater.name].bool"}}),a("v-text-field",{attrs:{label:t.convertName(e.name),"hide-details":"auto",type:"number",suffix:"°C"},model:{value:t.dialog.values[e.name].value,callback:function(a){t.$set(t.dialog.values[e.name],"value",a)},expression:"dialog.values[heater.name].value"}})],1)})),t._l(this["printer/getTemperatureFans"],(function(e){return a("v-row",{key:"temperature_fan "+e.name,staticClass:"mt-2 mx-0 mb-2",attrs:{align:"center"}},[a("v-checkbox",{staticClass:"shrink mt-0",attrs:{"hide-details":""},model:{value:t.dialog.values["temperature_fan "+e.name].bool,callback:function(a){t.$set(t.dialog.values["temperature_fan "+e.name],"bool",a)},expression:"dialog.values['temperature_fan '+fan.name].bool"}}),a("v-text-field",{attrs:{label:t.convertName(e.name),"hide-details":"auto",type:"number",suffix:"°C"},model:{value:t.dialog.values["temperature_fan "+e.name].value,callback:function(a){t.$set(t.dialog.values["temperature_fan "+e.name],"value",a)},expression:"dialog.values['temperature_fan '+fan.name].value"}})],1)}))],2),a("v-col",{staticClass:"col-6"},[a("v-textarea",{attrs:{outlined:"",name:"input-7-4",label:"Custom G-Code","hide-details":"auto"},model:{value:t.dialog.gcode,callback:function(e){t.$set(t.dialog,"gcode",e)},expression:"dialog.gcode"}})],1)],1),t.dialog.boolInvalidMin?a("v-row",{staticClass:"mt-3"},[a("v-col",{staticClass:"py-0"},[a("v-alert",{attrs:{dense:"",text:"",type:"error"}},[t._v("You have to set minimum a target temperature or a custom gcode.")])],1)],1):t._e(),a("v-row",{staticClass:"mt-3"},[a("v-col",{staticClass:"text-center"},[null!==this.dialog.index?a("v-btn",{staticClass:"float-left minwidth-0",attrs:{color:"red",outlined:""},on:{click:t.deletePreset}},[a("v-icon",[t._v("mdi-delete")])],1):t._e(),a("v-btn",{class:null!==t.dialog.index?"float-right":"",attrs:{color:"white",outlined:"",type:"submit"}},[t._v(" "+t._s(null===t.dialog.index?"store":"update")+" preset ")])],1)],1)]:t._e()],2)],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:300},model:{value:t.cooldownDialog.bool,callback:function(e){t.$set(t.cooldownDialog,"bool",e)},expression:"cooldownDialog.bool"}},[a("v-card",{attrs:{dark:""}},[a("v-toolbar",{attrs:{flat:"",dense:"",color:"primary"}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{staticClass:"mdi mdi-fire",attrs:{left:""}}),t._v(" Edit Cooldown ")],1)]),a("v-spacer"),a("v-btn",{staticClass:"minwidth-0",attrs:{small:""},on:{click:function(e){t.cooldownDialog.bool=!1}}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-close-thick")])],1)],1),a("v-card-text",{staticClass:"pt-3"},[a("v-container",{staticClass:"pb-0"},[a("v-form",{on:{submit:function(e){return e.preventDefault(),t.saveCooldown(e)}},model:{value:t.cooldownDialog.valid,callback:function(e){t.$set(t.cooldownDialog,"valid",e)},expression:"cooldownDialog.valid"}},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-textarea",{attrs:{outlined:"",name:"input-7-4",label:"Custom G-Code",rules:[t.rules.required]},model:{value:t.cooldownDialog.gcode,callback:function(e){t.$set(t.cooldownDialog,"gcode",e)},expression:"cooldownDialog.gcode"}})],1)],1),a("v-row",[a("v-col",{staticClass:"text-center"},[a("v-btn",{attrs:{color:"white",outlined:"",type:"submit"}},[t._v(" update cooldown ")])],1)],1)],1)],1)],1)],1)],1)],1)},Lr=[],Ir={components:{},data:function(){var t=this;return{dialog:{bool:!1,valid:!1,name:"",gcode:"",index:null,boolInvalidMin:!1,values:{}},rules:{required:function(t){return""!==t||"required"},unique:function(e){return!t.existsPresetName(e)||"Name already exists"}},cooldownDialog:{bool:!1,gcode:"",valid:!1}}},computed:Object(m["a"])(Object(m["a"])({},Object(h["e"])({orgState:function(t){return t.gui.presets},cooldownGcode:function(t){return t.gui.cooldownGcode}})),Object(h["c"])(["printer/getHeaters","printer/getTemperatureFans","gui/getPreheatPresets"])),mounted:function(){this.clearDialog()},methods:{convertName:dt,convertPresetName:function(t,e){return"temperature_fan"===e.type&&(t=t.replace("temperature_fan ","")),this.convertName(t)},existsPresetName:function(t){var e=this;return this["gui/getPreheatPresets"].findIndex((function(a){return a.name===t&&a.index!==e.dialog.index}))>=0},createPreset:function(){this.clearDialog(),this.dialog.bool=!0},clearDialog:function(){this.dialog.bool=!1,this.dialog.index=null,this.dialog.name="",this.dialog.gcode="",this.dialog.boolInvalidMin=!1,this.dialog.values={};var t,e=Object(d["a"])(this["printer/getHeaters"]);try{for(e.s();!(t=e.n()).done;){var a=t.value;this.dialog.values[a.name]={bool:!0,value:0,type:"heater"}}}catch(s){e.e(s)}finally{e.f()}var i,n=Object(d["a"])(this["printer/getTemperatureFans"]);try{for(n.s();!(i=n.n()).done;){var r=i.value;this.dialog.values["temperature_fan "+r.name]={bool:!0,value:0,type:"temperature_fan"}}}catch(s){n.e(s)}finally{n.f()}},editPreset:function(t){this.dialog.name=t.name,this.dialog.index=t.index,this.dialog.gcode=t.gcode,this.dialog.values={};var e,a=Object(d["a"])(this["printer/getHeaters"]);try{for(a.s();!(e=a.n()).done;){var i=e.value;i.name in t.values?this.dialog.values[i.name]=Object(m["a"])({},t.values[i.name]):this.dialog.values[i.name]={bool:!1,value:0,type:"heater"}}}catch(o){a.e(o)}finally{a.f()}var n,r=Object(d["a"])(this["printer/getTemperatureFans"]);try{for(r.s();!(n=r.n()).done;){var s=n.value;"temperature_fan "+s.name in t.values?this.dialog.values["temperature_fan "+s.name]=Object(m["a"])({},t.values["temperature_fan "+s.name]):this.dialog.values["temperature_fan "+s.name]={bool:!1,value:0,type:"temperature_fan"}}}catch(o){r.e(o)}finally{r.f()}this.dialog.bool=!0},savePreset:function(){for(var t=0,e=0,a=Object.keys(this.dialog.values);e<a.length;e++){var i=a[e];this.dialog.values[i].bool&&t++}if(this.dialog.gcode.length&&t++,0===t)this.dialog.boolInvalidMin=!0;else if(this.dialog.valid){for(var n=0,r=Object.keys(this.dialog.values);n<r.length;n++){var s=r[n];this.dialog.values[s].value=parseInt(this.dialog.values[s].value)}this.dialog.index?this.$store.dispatch("gui/updatePreset",this.dialog):this.$store.dispatch("gui/addPreset",this.dialog),this.clearDialog()}},deletePreset:function(){this.$store.dispatch("gui/deletePreset",this.dialog),this.clearDialog()},editCooldown:function(){this.cooldownDialog.gcode=this.cooldownGcode,this.cooldownDialog.bool=!0},saveCooldown:function(){this.cooldownDialog.valid&&(this.$store.dispatch("gui/setSettings",{cooldownGcode:this.cooldownDialog.gcode}),this.cooldownDialog.bool=!1)}}},Hr=Ir,Ur=a("0798"),Nr=Object(y["a"])(Hr,Ar,Lr,!1,null,null,null),Br=Nr.exports;k()(Nr,{VAlert:Ur["a"],VBtn:x["a"],VCard:S["a"],VCardText:P["c"],VCheckbox:pt["a"],VCol:O["a"],VContainer:D["a"],VDialog:Pt["a"],VForm:on["a"],VIcon:V["a"],VRow:j["a"],VSpacer:Vt["a"],VTextField:bt["a"],VTextarea:On["a"],VToolbar:T["a"],VToolbarTitle:$["b"]}),i["a"].component("settings-general-panel",en),i["a"].component("settings-control-panel",ln),i["a"].component("settings-webcam-panel",vn),i["a"].component("settings-dashboard-panel",kn),i["a"].component("settings-console-panel",Vn),i["a"].component("settings-macros-panel",Un),i["a"].component("settings-endstop-panel",Yn),i["a"].component("settings-limits-panel",tr),i["a"].component("settings-runout-panel",fr),i["a"].component("settings-logfiles-panel",yr),i["a"].component("settings-config-files-panel",cr),i["a"].component("settings-update-panel",jr),i["a"].component("settings-remote-printers-panel",Rr),i["a"].component("settings-presets-panel",Br);var qr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subheading"},[a("v-icon",{staticClass:"mdi mdi-power",attrs:{left:""}}),t._v("Power Control ")],1)])],1),t._l(t.devices,(function(e,i){return a("div",{key:i},[i>0?a("v-divider",{staticClass:"mt-0"}):t._e(),a("v-card-text",{staticClass:"py-2"},[a("v-row",[a("v-col",{staticClass:"py-0 pt-1"},[t._v(t._s(e.device))]),a("v-col",{staticClass:"py-0 text-right"},[a("v-btn-toggle",{model:{value:e.status,callback:function(a){t.$set(e,"status",a)},expression:"device.status"}},["error"===e.status?a("v-btn",{attrs:{small:"",disabled:""}},[t._v("Error")]):t._e(),"error"!==e.status?a("v-btn",{attrs:{small:"",disabled:"on"===e.status},on:{click:function(a){return t.setPower(e,1)}}},[t._v("On")]):t._e(),"error"!==e.status?a("v-btn",{attrs:{small:"",disabled:"off"===e.status},on:{click:function(a){return t.setPower(e,0)}}},[t._v("Off")]):t._e()],1)],1)],1)],1)],1)}))],2)],1)},Wr=[],Gr={components:{},computed:Object(m["a"])({},Object(h["e"])({devices:function(t){return t.server.power.devices}})),methods:{setPower:function(t,e){var a=1===e?"machine.device_power.on":"machine.device_power.off";i["a"].prototype.$socket.sendObj(a,Object(he["a"])({},t.device,null),"server/power/responseToggle")}}},zr=Gr,Yr=Object(y["a"])(zr,qr,Wr,!1,null,null,null),Zr=Yr.exports;k()(Yr,{VBtn:x["a"],VBtnToggle:w["a"],VCard:S["a"],VCardText:P["c"],VCol:O["a"],VDivider:Ut["a"],VIcon:V["a"],VRow:j["a"],VToolbar:T["a"],VToolbarTitle:$["b"]}),i["a"].component("status-panel",va),i["a"].component("klippy-state-panel",wa),i["a"].component("min-settings-panel",ja),i["a"].component("moonraker-failed-plugins-panel",Ra),i["a"].component("tools-panel",ni),i["a"].component("control-panel",ui),i["a"].component("extruder-panel",bi),i["a"].component("zoffset-panel",F),i["a"].component("miscellaneous-panel",Ai),i["a"].component("webcam-panel",Bi),i["a"].component("miniconsole-panel",Zi),i["a"].component("power-control-panel",Zr);var Xr={switchToDashboard:function(){We.push("/")},changePrinter:function(t,e){var a=t.dispatch,i=t.getters,n=t.state,r=n.socket.remoteMode;a("files/reset"),a("gui/reset"),a("printer/reset"),a("server/reset"),a("socket/reset");var s=i["farm/"+e.printer+"/getSocketData"];a("socket/setSocket",{hostname:s.hostname,port:s.port,remoteMode:r})}},Jr={reportError:function(t,e){window.console.error(e)},void:function(){}},Kr={getVersion:function(t){return t.packageVersion},getTitle:function(t,e){return t.socket.isConnected?"ready"!==t.server.klippy_state?"ERROR":"paused"===t.printer.print_stats.state?"Pause Print":"printing"===t.printer.print_stats.state?(100*e["printer/getPrintPercent"]).toFixed(0)+"% Printing - "+t.printer.print_stats.filename:"complete"===t.printer.print_stats.state?"Complete - "+t.printer.print_stats.filename:t.gui.general.printername?t.gui.general.printername:t.printer.hostname:"Mainsail"},is_printing:function(t){return["printing","paused"].includes(t.printer.print_stats.state)}},Qr={reset:function(t){var e=t.commit;e("reset")},setData:function(t,e){var a=t.commit;a("setData",e)},setSocket:function(t,e){var a=t.commit,n=t.state;a("setData",e),"$socket"in i["a"].prototype&&(i["a"].prototype.$socket.close(),i["a"].prototype.$socket.setUrl(n.protocol+"://"+e.hostname+":"+e.port+"/websocket"),i["a"].prototype.$socket.connect())},onOpen:function(t){var e=t.commit,a=t.dispatch;e("setConnected"),a("server/init",null,{root:!0}),e("server/updateManager/setStatus",{busy:!1},{root:!0})},onClose:function(t,e){var a=t.commit;a("setDisconnected"),e.wasClean&&window.console.log("Socket closed clear")},onMessage:function(t,e){var a=t.commit,i=t.state;switch(i.isConnected||a("setConnected"),e.method){case"notify_status_update":a("printer/setData",e.params[0],{root:!0});break;case"notify_gcode_response":a("server/addEvent",Object.assign({result:e.params[0]},{send:!1}),{root:!0});break;case"notify_klippy_ready":a("server/setKlippyReady",null,{root:!0});break;case"notify_klippy_disconnected":a("server/setKlippyDisconnected",null,{root:!0});break;case"notify_klippy_shutdown":a("server/setKlippyShutdown",null,{root:!0});break;case"notify_filelist_changed":switch(e.params[0].action){case"upload_file":a("files/setUploadFile",e.params[0],{root:!0});break;case"delete_file":a("files/setDeleteFile",e.params[0],{root:!0});break;case"move_item":a("files/setMoveItem",e.params[0],{root:!0});break;case"create_dir":a("files/setCreateDir",e.params[0],{root:!0});break;case"delete_dir":a("files/setDeleteDir",e.params[0],{root:!0});break;default:window.console.error("Unknown filelist_changed action: "+e.params[0].action);break}break;case"notify_metadata_update":a("files/setMetadata",e.params[0],{root:!0});break;case"notify_power_changed":a("server/power/setStatus",e.params[0],{root:!0});break;case"notify_update_response":a("server/updateManager/addUpdateResponse",e.params[0],{root:!0});break;case"notify_update_refreshed":a("server/updateManager/setStatus",e.params[0],{root:!0});break;default:"ok"!==e.result&&(e.error&&"Klippy Request Timed Out"!==e.error.message&&"Klippy Disconnected"!==e.error.message?window.console.error("JSON-RPC: "+e.error.message):e.error||window.console.log(e))}},removeLoading:function(t,e){var a=t.commit;a("removeLoading",e)},clearLoadings:function(t){var e=t.commit;e("clearLoadings")},reportDebug:function(t,e){var a=t.commit;window.console.log(e),a("void",{},{root:!0})}},ts={reset:function(t){Object.assign(t,as())},setConnected:function(t){t.isConnected=!0},setDisconnected:function(t){t.isConnected=!1},setData:function(t,e){"socket"in e&&(e=e.socket),Object.entries(e).forEach((function(e){var a=Object(l["a"])(e,2),n=a[0],r=a[1];i["a"].set(t,n,r)}))},addLoading:function(t,e){t.loadings.push(e.name)},removeLoading:function(t,e){var a=t.loadings.indexOf(e.name);a>-1&&t.loadings.splice(a,1)},clearLoadings:function(t){t.loadings.length&&t.loadings.splice(0,t.loadings.length)}},es={getUrl:function(t){return"//"+t.hostname+(80!==t.port?":"+t.port:"")}};function as(){return{remoteMode:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_REMOTE_MODE||"my.mainsail.xyz"===document.location.hostname,hostname:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_HOSTNAME||(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_REMOTE_MODE||"my.mainsail.xyz"===document.location.hostname?"":window.location.hostname),port:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_PORT||(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_REMOTE_MODE||"my.mainsail.xyz"===document.location.hostname?7125:window.location.port),protocol:"https:"===document.location.protocol?"wss":"ws",reconnectInterval:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_RECONNECT_INTERVAL||2e3,isConnected:!1,isConnecting:!1,connectingFailed:!1,loadings:[]}}var is=as(),ns={namespaced:!0,state:is,getters:es,actions:Qr,mutations:ts},rs={reset:function(t){var e=t.commit,a=t.dispatch;e("reset"),a("power/reset"),a("updateManager/reset")},init:function(){i["a"].prototype.$socket.sendObj("server.info",{},"server/getInfo"),i["a"].prototype.$socket.sendObj("server.config",{},"server/getConfig"),i["a"].prototype.$socket.sendObj("server.files.list",{root:"config"},"server/checkMainsailJson")},checkMainsailJson:function(t,e){var a=t.dispatch,i=t.rootState,n=!0;Object.entries(e).forEach((function(t){var e=Object(l["a"])(t,2),r=e[1];"filename"in r&&".mainsail.json"===r.filename&&(n=!1,fetch("//"+i.socket.hostname+":"+i.socket.port+"/server/files/config/.mainsail.json?time="+Date.now()).then((function(t){return t.json()})).then((function(t){a("gui/getData",t,{root:!0}),i.socket.remoteMode||a("farm/readStoredPrinters",{},{root:!0}),a("printer/init",null,{root:!0})})))})),n&&a("printer/init",null,{root:!0})},getInfo:function(t,e){var a=t.commit,n=t.state,r=t.rootState;if(0===n.plugins.length&&(!1!==e.plugins.includes("power")&&i["a"].prototype.$socket.sendObj("machine.device_power.devices",{},"server/power/getDevices"),!1!==e.plugins.includes("update_manager")&&i["a"].prototype.$socket.sendObj("machine.update.status",{},"server/updateManager/getStatus")),0===n.registered_directories.length&&"registered_directories"in e){var s,o=Object(d["a"])(e.registered_directories);try{var c=function(){var t=s.value;-1!==r.files.filetree.findIndex((function(e){return e.isDirectory&&e.filename===t}))&&i["a"].prototype.$socket.sendObj("server.files.get_directory",{path:t},"files/getDirectory")};for(o.s();!(s=o.n()).done;)c()}catch(l){o.e(l)}finally{o.f()}}a("setData",e),e.klippy_connected&&"startup"!==e.klippy_state||setTimeout((function(){i["a"].prototype.$socket.sendObj("server.info",{},"server/getInfo"),i["a"].prototype.$socket.sendObj("printer.info",{},"printer/getStateMessage")}),1e3)},getConfig:function(t,e){var a=t.commit;a("setConfig",e),i["a"].prototype.$socket.sendObj("server.gcode_store",{},"server/getGcodeStore")},getData:function(t,e){var a=t.commit;a("setData",e)},getGcodeStore:function(t,e){var a=t.commit;a("clearGcodeStore"),a("setGcodeStore",e)},getGcodeRespond:function(t,e){var a=t.commit;a("addEvent",e)}},ss={reset:function(t){Object.assign(t,ys())},setKlippyReady:function(){this.dispatch("printer/reset",null,{root:!0}),this.dispatch("printer/init",null,{root:!0})},setKlippyDisconnected:function(t){i["a"].set(t,"klippy_state","disconnected"),i["a"].set(t,"klippy_message","Disconnected..."),i["a"].prototype.$socket.sendObj("server.info",{},"server/getInfo")},setKlippyShutdown:function(t){i["a"].set(t,"klippy_state","shutdown"),i["a"].set(t,"klippy_message","Shutdown..."),i["a"].prototype.$socket.sendObj("server.info",{},"server/getInfo")},setData:function(t,e){"requestParams"in e&&delete e.requestParams,Object.entries(e).forEach((function(e){var a=Object(l["a"])(e,2),n=a[0],r=a[1];i["a"].set(t,n,r)}))},setConfig:function(t,e){Object.entries(e.config).forEach((function(e){var a=Object(l["a"])(e,2),n=a[0],r=a[1];i["a"].set(t.config,n,r)}))},clearGcodeStore:function(t){i["a"].set(t,"events",[])},setGcodeStore:function(t,e){"gcode_store"in e&&Array.isArray(e.gcode_store)&&e.gcode_store.forEach((function(e){t.events.push({date:new Date(1e3*e.time),message:e.message,type:e.type})}))},addEvent:function(t,e){var a=e,i="response";"object"===Object(Et["a"])(e)&&"type"in e&&(i=e.type),"message"in e?a=e.message:"result"in e?a=e.result:"error"in e&&(a=a.error.message),t.events.push({date:new Date,message:a,type:i})}},os=(a("4d63"),{getFilterdEvents:function(t,e,a){var i=t.events;if(a.gui.console.hideWaitTemperatures){var n=new RegExp("^(?:ok\\s+)?(B|C|T\\d*):");i=i.filter((function(t){return!n.test(t.message)}))}if(a.gui.console.boolCustomFilters){var r=a.gui.console.customFilters.split("\n");r.forEach((function(t){try{var e=new RegExp(t);i=i.filter((function(t){return!e.test(t.message)}))}catch(a){window.console.error("Custom console filter '"+t+"' doesn't work")}}))}return i},getConfig:function(t){return function(e,a){return e in t.config&&a in t.config[e]?t.config[e][a]:null}}}),cs={reset:function(t){var e=t.commit;e("reset")},getDevices:function(t,e){var a=t.commit;e.error?i["a"].$toast.error(e.error.message):a("setDevices",e.devices)},getStatus:function(t,e){var a=t.commit;e.error?i["a"].$toast.error(e.error.message):a("setStatus",e)},responseToggle:function(t,e){var a=t.commit;"requestParams"in e&&delete e.requestParams;for(var i=0,n=Object.entries(e);i<n.length;i++){var r=Object(l["a"])(n[i],2),s=r[0],o=r[1];a("setStatus",{device:s,status:o})}}},ls={reset:function(t){Object.assign(t,us())},setDevices:function(t,e){i["a"].set(t,"devices",e)},setStatus:function(t,e){var a=t.devices.findIndex((function(t){return t.device===e.device}));a>=0&&i["a"].set(t.devices[a],"status",e.status)}},ds={devices:function(t){return t.devices},count:function(t,e){return e.devices.length}};function us(){return{devices:[]}}var ms=us(),ps={namespaced:!0,state:ms,getters:ds,actions:cs,mutations:ls},fs={reset:function(t){var e=t.commit;e("reset")},getStatus:function(t,e){var a=t.commit;a("setStatus",e),a("socket/removeLoading",{name:"loadingBtnSyncUpdateManager"},{root:!0})}},hs={reset:function(t){Object.assign(t,gs())},setStatus:function(t,e){"version_info"in e&&Object.entries(e.version_info).forEach((function(e){var a=Object(l["a"])(e,2),n=a[0],r=a[1];i["a"].set(t.version_info,n,r)})),"busy"in e&&!1===e.busy&&i["a"].set(t.updateResponse,"complete",!0)},addUpdateResponse:function(t,e){t.updateResponse.application!==e.application&&i["a"].set(t.updateResponse,"application",e.application),t.updateResponse.complete!==e.complete&&i["a"].set(t.updateResponse,"complete",e.complete),"complete"in e&&e.complete&&i["a"].prototype.$socket.sendObj("machine.update.status",{refresh:!1},"server/updateManager/getStatus"),t.updateResponse.messages.push({date:new Date,message:e.message})},resetUpdateResponse:function(t){i["a"].set(t,"updateResponse",{application:"",complete:!0,messages:[]})}},vs={getUpdateableSoftwares:function(t){var e,a={},i=Object.keys(t.version_info).sort((function(e,a){return"klipper"===e?-1:"klipper"===a||"name"in t.version_info[e]&&"mainsail"===t.version_info[e].name?1:"name"in t.version_info[a]&&"mainsail"===t.version_info[a].name||e<a?-1:e>a?1:0})),n=Object(d["a"])(i);try{for(n.s();!(e=n.n()).done;){var r=e.value;"system"!==r&&(a[r]=t.version_info[r])}}catch(s){n.e(s)}finally{n.f()}return a},isUpdateAvailable:function(t){for(var e=0,a=Object.keys(t.version_info);e<a.length;e++){var i=a[e];if("version"in t.version_info[i]&&"remote_version"in t.version_info[i]&&t.version_info[i].version!==t.version_info[i].remote_version)return!0}return!1}};function gs(){return{version_info:{},updateResponse:{application:"",complete:!0,messages:[]}}}var bs=gs(),_s={namespaced:!0,state:bs,getters:vs,actions:fs,mutations:hs};function ys(){return{klippy_connected:!1,klippy_state:"",klippy_message:"",plugins:[],failed_plugins:[],registered_directories:[],events:[],config:{}}}var Cs=ys(),ks={namespaced:!0,state:Cs,getters:os,actions:rs,mutations:ss,modules:{power:ps,updateManager:_s}},xs={reset:function(t){var e=t.commit;e("reset"),e("tempHistory/reset")},init:function(){i["a"].prototype.$socket.sendObj("printer.info",{},"printer/getInfo")},getInfo:function(t,e){var a=t.commit;a("server/setData",{klippy_state:e.state,klippy_message:e.state_message},{root:!0}),a("setData",{hostname:e.hostname,software_version:e.software_version,cpu_info:e.cpu_info}),i["a"].prototype.$socket.sendObj("printer.objects.list",{},"printer/getObjectsList"),i["a"].prototype.$socket.sendObj("printer.gcode.help",{},"printer/getHelpList")},getStateMessage:function(t,e){var a=t.commit;a("server/setData",{klippy_message:e.state_message},{root:!0})},getObjectsList:function(t,e){var a,n=t.commit,r={},s=["gcode_macro","menu"],o=Object(d["a"])(e.objects);try{for(o.s();!(a=o.n()).done;){var c=a.value,l=c.split(" ");s.includes(l[0])||(r=Object(m["a"])(Object(m["a"])({},r),{},Object(he["a"])({},c,null)))}}catch(u){o.e(u)}finally{o.f()}r!=={}&&i["a"].prototype.$socket.sendObj("printer.objects.subscribe",{objects:r},"printer/getData"),i["a"].prototype.$socket.sendObj("server.temperature_store",{},"printer/tempHistory/getHistory"),n("void",null,{root:!0})},getData:function(t,e){var a=t.commit;a("setData",e)},getHelpList:function(t,e){var a=t.commit;a("setHelplist",e)},getEndstopStatus:function(t,e){var a=t.commit;a("socket/removeLoading",{name:"queryEndstops"},{root:!0}),a("setEndstopStatus",e)},removeBedMeshProfile:function(t,e){var a=t.commit;a("socket/removeLoading",{name:"bedMeshRemove_"+e.name},{root:!0}),a("removeBedMeshProfile",e)}},ws={reset:function(t){for(var e=Is(),a=0,n=Object.keys(t);a<n.length;a++){var r=n[a];r in e||"tempHistory"===r||delete t[r]}for(var s=0,o=Object.entries(e);s<o.length;s++){var c=Object(l["a"])(o[s],2),d=c[0],u=c[1];i["a"].set(t,d,u)}this.dispatch("socket/clearLoadings",null,{root:!0}),this.state.server.plugins.includes("update_manager")&&i["a"].prototype.$socket.sendObj("machine.update.status",{refresh:!1},"server/updateManager/getStatus")},setData:function(t,e){var a=this;"status"in e&&(e=e.status),"requestParams"in e&&delete e.requestParams,Object.entries(e).forEach((function(e){var n=Object(l["a"])(e,2),r=n[0],s=n[1];"webhooks"===r?a.dispatch("server/getData",{klippy_state:s.state,klippy_message:s.state_message},{root:!0}):"object"===Object(Et["a"])(s)?i["a"].set(t,r,Object(m["a"])(Object(m["a"])({},t[r]),s)):i["a"].set(t,r,s)}))},setHelplist:function(t,e){for(var a=[],n=0,r=Object.entries(e);n<r.length;n++){var s=Object(l["a"])(r[n],2),o=s[0],c=s[1];a.push({commandLow:o.toLowerCase(),command:o,description:c})}i["a"].set(t,"helplist",a)},clearCurrentFile:function(t){Object.assign(t.current_file,{})},setEndstopStatus:function(t,e){delete e.requestParams,i["a"].set(t,"endstops",e)},removeBedMeshProfile:function(t,e){"bed_mesh "+e.name in t.configfile.config&&Object.assign(t.configfile.config["bed_mesh "+e.name],{deleted:!0})}},Ss=["#F44336","#8e379d","#03DAC5","#3F51B5","#ffde03","#009688","#E91E63"],Ps="#2196F3",Os="#4CAF50",Ds=".theme",Vs=["temperature","target","power","speed"],js=["power","speed"],Ts=["bme280","htu21d"],$s={getPrintPercent:function(t){if("filename"in t.current_file&&"gcode_start_byte"in t.current_file&&"gcode_end_byte"in t.current_file&&t.current_file.filename===t.print_stats.filename){if(t.virtual_sdcard.file_position<=t.current_file.gcode_start_byte)return 0;if(t.virtual_sdcard.file_position>=t.current_file.gcode_end_byte)return 1;var e=t.virtual_sdcard.file_position-t.current_file.gcode_start_byte,a=t.current_file.gcode_end_byte-t.current_file.gcode_start_byte;if(e>0&&a>0)return 1/a*e}return t.virtual_sdcard.progress},getMacros:function(t,e,a){var i=[],n=[];for(var r in a.gui.dashboard.hiddenMacros.forEach((function(t,e){n[e]=t.toLowerCase()})),t.configfile.config)!r.startsWith("gcode_macro")||r.startsWith("gcode_macro _")||"rename_existing"in t.configfile.config[r]||n.indexOf(r.replace("gcode_macro ","").toLowerCase())>-1||i.push({name:r.replace("gcode_macro ",""),prop:t.configfile.config[r]});return i.sort(ot)},getHeaters:function(t,e,a,i){var n=[],r="grey darken-2",s="grey lighten-5";if(t.heaters.available_heaters)for(var o=0,c=Object.entries(t);o<c.length;o++){var d=Object(l["a"])(c[o],2),u=d[0],m=d[1];if(t.heaters.available_heaters.includes(u)){var p=u,f=u.split(" ");f.length>1&&"heater_generic"===f[0]&&(p=f[1]);var h="printer-3d-nozzle-alert",v=r;if(m.target&&(v=s),f[0].startsWith("extruder")){var g=u in t.configfile.config&&"min_extrude_temp"in t.configfile.config[u]?parseFloat(t.configfile.config[u].min_extrude_temp):170;m.temperature>=g&&(h="printer-3d-nozzle")}else"heater_bed"===f[0]?(h="radiator-disabled",(m.temperature>50||m.target&&m.temperature>m.target-5)&&(h="radiator")):f[0].startsWith("heater_generic")&&(h="fire");n.push({name:p,type:f[0],icon:h,color:v,target:m.target,temperature:m.temperature,additionValues:e.getAdditionSensors(f[1]),tempListAdditionValues:e.getTempListAdditionSensors(f[1]),power:"power"in m?m.power:null,presets:i["gui/getPresetsFromHeater"]({name:u}),chartColor:e["tempHistory/getDatasetColor"](p),chartTemperature:e["tempHistory/getSeries"](p),chartTarget:e["tempHistory/getSeries"](p+"_target"),chartPower:e["tempHistory/getSeries"](p+"_power"),chartSpeed:e["tempHistory/getSeries"](p+"_speed"),min_temp:void 0!==t.configfile.config[u]?parseFloat(t.configfile.config[u].min_temp):void 0,max_temp:void 0!==t.configfile.config[u]?parseFloat(t.configfile.config[u].max_temp):void 0})}}return n.sort(ot)},getTemperatureFans:function(t,e,a,i){for(var n=[],r=0,s=Object.entries(t);r<s.length;r++){var o=Object(l["a"])(s[r],2),c=o[0],d=o[1],u=c.split(" ");"temperature_fan"===u[0]&&n.push({name:u[1],target:d.target,temperature:d.temperature,additionValues:e.getAdditionSensors(u[1]),tempListAdditionValues:e.getTempListAdditionSensors(u[1]),speed:d.speed,presets:i["gui/getPresetsFromHeater"]({name:c}),chartColor:e["tempHistory/getDatasetColor"](u[1]),chartTemperature:e["tempHistory/getSeries"](u[1]),chartTarget:e["tempHistory/getSeries"](u[1]+"_target"),chartPower:e["tempHistory/getSeries"](u[1]+"_power"),chartSpeed:e["tempHistory/getSeries"](u[1]+"_speed")})}return n.sort(ot)},getTemperatureSensors:function(t,e){for(var a=[],i=0,n=Object.entries(t);i<n.length;i++){var r=Object(l["a"])(n[i],2),s=r[0],o=r[1],c=s.split(" ");if("temperature_sensor"===c[0]){var d="mdi-thermometer",u=t.configfile.config[s]&&t.configfile.config[s].min_temp?parseInt(t.configfile.config[s].min_temp):0,m=t.configfile.config[s]&&t.configfile.config[s].max_temp?parseInt(t.configfile.config[s].max_temp):210,p=(m-u)/3;o.temperature<=u+p&&(d="mdi-thermometer-low"),o.temperature>=m-p&&(d="mdi-thermometer-high"),a.push({name:c[1],temperature:o.temperature,additionValues:e.getAdditionSensors(c[1]),tempListAdditionValues:e.getTempListAdditionSensors(c[1]),icon:d,min_temp:u,max_temp:m,measured_min_temp:o.measured_min_temp,measured_max_temp:o.measured_max_temp,chartColor:e["tempHistory/getDatasetColor"](c[1]),chartTemperature:e["tempHistory/getSeries"](c[1])})}}return a.sort(ot)},getPartFanSpeed:function(t){return"fan"in t?t.fan.speed:0},getFans:function(t){for(var e=[],a=["temperature_fan","controller_fan","heater_fan","fan_generic","fan"],i=["fan_generic","fan"],n=0,r=Object.entries(t);n<r.length;n++){var s=Object(l["a"])(r[n],2),o=s[0],c=s[1],d=o.split(" ");if(a.includes(d[0])){var u=d.length>1?d[1]:d[0];e.push({name:u,type:d[0],speed:"speed"in c?c.speed:0,controllable:i.includes(d[0])})}}return e.sort((function(t,e){if(t.controllable<e.controllable)return 1;if(t.controllable>e.controllable)return-1;var a=t.name.toUpperCase(),i=e.name.toUpperCase();return a<i?-1:a>i?1:0}))},getMiscellaneous:function(t){for(var e=[],a=["controller_fan","heater_fan","fan_generic","fan","output_pin"],i=["fan_generic","fan"],n=0,r=Object.entries(t);n<r.length;n++){var s=Object(l["a"])(r[n],2),o=s[0],c=s[1],d=o.split(" ");if(a.includes(d[0])){var u=d.length>1?d[1]:d[0];if(!u.startsWith("_")){var m=i.includes(d[0].toLowerCase()),p="speed"in c?c.speed:"value"in c?c.value:0,f=m,h=1;"fan"===d[0].toLowerCase()&&(h=255),"output_pin"===d[0].toLowerCase()&&(m=!0,f=!1,"config"in t.configfile&&o in t.configfile.config&&("pwm"in t.configfile.config[o]&&"true"===t.configfile.config[o].pwm.toLowerCase()&&(f=!0),"scale"in t.configfile.config[o]&&(h=t.configfile.config[o].scale))),e.push({name:u,type:d[0],power:p,controllable:m,pwm:f,scale:h,object:c,config:t.configfile.config[o]})}}}return e.sort((function(t,e){if("fan"===t.type)return-1;if("fan"===e.type)return 1;if(t.pwm<e.pwm)return 1;if(t.pwm>e.pwm)return-1;if(t.controllable<e.controllable)return 1;if(t.controllable>e.controllable)return-1;var a=t.name.toUpperCase(),i=e.name.toUpperCase();return a<i?-1:a>i?1:0}))},getAdditionSensors:function(t,e,a,i){return function(e){var a={};return Ts.forEach((function(n){n+" "+e in t&&Object.keys(t[n+" "+e]).forEach((function(r){if("temperature"!==r){var s={};switch(s[r]={},s[r]["value"]=t[n+" "+e][r],s[r]["gui"]=i["gui/getDatasetAdditionalSensorValue"]({name:e,sensor:r}),r){case"pressure":s[r]["unit"]="hPa";break;case"humidity":s[r]["unit"]="%";break;default:s[r]["unit"]=""}a=Object.assign(a,s)}}))})),a}},getTempListAdditionSensors:function(t,e,a,i){return function(e){var a={};return Ts.forEach((function(n){n+" "+e in t&&Object.keys(t[n+" "+e]).forEach((function(r){if("temperature"!==r){var s=i["gui/getDatasetAdditionalSensorValue"]({name:e,sensor:r});if(s.boolList){var o={};switch(o[r]={},o[r]["value"]=t[n+" "+e][r],r){case"pressure":o[r]["unit"]="hPa";break;case"humidity":o[r]["unit"]="%";break;default:o[r]["unit"]=""}a=Object.assign(a,o)}}}))})),a}},getAllMacros:function(t){var e=[];for(var a in t.configfile.config)!a.startsWith("gcode_macro")||a.startsWith("gcode_macro _")||Object.hasOwnProperty.call(t.configfile.config[a],"rename_existing")||e.push({name:a.replace("gcode_macro ",""),prop:t.configfile.config[a]});return e.sort((function(t,e){var a=t.name.toUpperCase(),i=e.name.toUpperCase();return a<i?-1:a>i?1:0}))},getFilamentSwitchSensors:function(t){for(var e=[],a=0,i=Object.entries(t);a<i.length;a++){var n=Object(l["a"])(i[a],2),r=n[0],s=n[1],o=r.split(" ");"filament_switch_sensor"===o[0]&&e.push({name:o[1],enabled:s.enabled,filament_detected:s.filament_detected})}return e.sort(ot)},getBedMeshProfiles:function(t){var e=[],a="";t.bed_mesh&&(a=t.bed_mesh.profile_name);for(var i=0,n=Object.entries(t.configfile.config);i<n.length;i++){var r=Object(l["a"])(n[i],2),s=r[0],o=r[1],c=s.split(" ");c.length>1&&"bed_mesh"===c[0]&&void 0!==c[1]&&e.push({name:c[1],data:o,is_active:a===c[1]})}return e.sort(ot)},getExtrudePossible:function(t){if("toolhead"in t){var e=t.toolhead.extruder;if(e in t&&e in t.configfile.config){var a=t[e],i=t.configfile.config[e],n="min_extrude_temp"in i?i["min_extrude_temp"]:170;return n<=a["temperature"]}}return!0},getBedMeshProfileName:function(t){return"bed_mesh"in t&&"profile_name"in t.bed_mesh?t.bed_mesh.profile_name:""},getMaxTemp:function(t){var e=0;return Object.entries(t.configfile.config).forEach((function(a){var i=Object(l["a"])(a,2),n=i[0],r=i[1];if(Array.isArray(t.heaters.available_heaters)&&t.heaters.available_heaters.length){var s=n.split(" ");(t.heaters.available_heaters.includes(n)||"temperature_fan"===s[0]||"temperature_sensor"===s[0])&&"max_temp"in r&&e<parseInt(r.max_temp)&&(e=parseInt(r.max_temp))}})),e>0?e+10:300},existPrinterConfig:function(t){return"object"===Object(Et["a"])(t.configfile.config)&&Object.entries(t.configfile.config).length>1},checkConfigVirtualSdcard:function(t){return"virtual_sdcard"in t.configfile.config},checkConfigPauseResume:function(t){return"pause_resume"in t.configfile.config},checkConfigDisplayStatus:function(t){return"display_status"in t.configfile.config},checkConfigMacroPause:function(t){return-1!==Object.keys(t.configfile.config).findIndex((function(t){return"gcode_macro pause"===t.toLowerCase()}))},checkConfigMacroResume:function(t){return-1!==Object.keys(t.configfile.config).findIndex((function(t){return"gcode_macro resume"===t.toLowerCase()}))},checkConfigMacroCancel:function(t){return-1!==Object.keys(t.configfile.config).findIndex((function(t){return"gcode_macro cancel_print"===t.toLowerCase()}))}},Ms={reset:function(t){var e=t.commit;e("reset")},getHistory:function(t,e){var a=t.commit,i=t.state,n=t.rootGetters,r=new Date,s=n["server/getConfig"]("server","temperature_store_size")||1200;void 0!==e&&Object.entries(e).sort().forEach((function(t){var e=Object(l["a"])(t,2),o=e[0],c=e[1],d=o.split(" ");d.length>1&&(o=d[1]);var u=d[0];if("temperatures"in c){var m=i.series.find((function(t){return t.name===o}));if(void 0===m){var p="";switch(o){case"heater_bed":p=Ps;break;case"chamber":p=Os;break;default:p=Ss[i.series.filter((function(t){return"name"in t&&!t.name.endsWith("_target")&&"heater_bed"!==t.name&&"chamber"!==t.name})).length];break}m={type:"line",name:o,lineStyle:{color:n["gui/getDatasetValue"]({name:o,type:"color"})||p,width:2,opacity:n["gui/getDatasetValue"]({name:o,type:"temperature"})?.9:0},symbol:"none",emphasis:{lineStyle:{color:n["gui/getDatasetValue"]({name:o,type:"color"})||p,width:2,opacity:n["gui/getDatasetValue"]({name:o,type:"temperature"})?.9:0}},data:[]},a("addSeries",m)}else a("clearDataset",o);if(a("addValue",{name:o,value:c.temperatures,type:u,time:r,maxHistory:s}),"targets"in c&&(u.startsWith("extruder")||["heater_bed","temperature_fan"].includes(u))){var f=i.series.find((function(t){return t.name===o+"_target"}));void 0===f?(f={type:"line",name:o+"_target",lineStyle:{color:m.lineStyle.color,width:0},areaStyle:{color:m.lineStyle.color,opacity:n["gui/getDatasetValue"]({name:o,type:"target"})?.1:0},emphasis:{lineStyle:{color:m.lineStyle.color,width:0},areaStyle:{color:m.lineStyle.color,opacity:n["gui/getDatasetValue"]({name:o,type:"target"})?.1:0}},symbol:"none",data:[]},a("addSeries",f)):a("clearDataset",o+"_target"),a("addValue",{name:o+"_target",value:c.targets,type:u,time:r,maxHistory:s})}["power","speed"].forEach((function(t){if(t+"s"in c&&(u.startsWith("extruder")||["heater_bed","temperature_fan"].includes(u))){var e=i.series.find((function(e){return e.name===o+"_"+t}));void 0===e?(e={type:"line",name:o+"_"+t,yAxisIndex:1,lineStyle:{color:m.lineStyle.color,width:1,type:"dotted",opacity:n["gui/getDatasetValue"]({name:o,type:t})?.9:0},emphasis:{lineStyle:{color:m.lineStyle.color,width:1,type:"dotted",opacity:n["gui/getDatasetValue"]({name:o,type:t})?.9:0}},symbol:"none",data:[]},a("addSeries",e)):a("clearDataset",o+"_"+t),a("addValue",{name:o+"_"+t,value:c[t+"s"],type:u,time:r,maxHistory:s})}}))}}))},updateDatasets:function(t){var e=t.commit,a=t.rootState,i=t.rootGetters;if("heaters"in a.printer&&"available_sensors"in a.printer.heaters&&a.printer.heaters.available_sensors.length){var n=new Date,r=i["server/getConfig"]("server","temperature_store_size")||1200;a.printer.heaters.available_sensors.forEach((function(t){if(t in a.printer){var i=t.split(" "),s=i[0];["temperature_fan","temperature_sensor","heater_generic"].includes(i[0])&&(s=i[1]),Vs.forEach((function(o){o in a.printer[t]&&e("addValue",{name:"temperature"===o?s:s+"_"+o,value:a.printer[t][o],type:i[0],time:n,maxHistory:r})}))}}))}}},Fs={reset:function(t){Object.assign(t,Rs())},addSeries:function(t,e){t.series.push(e)},addValue:function(t,e){var a=1;js.forEach((function(t){e.name.endsWith("_"+t)&&(a=100)}));var i=t.series.find((function(t){return t.name===e.name}));if(void 0!==i&&void 0!==e.value)if(Array.isArray(e.value))for(var n=e.value.length;n>0;n--)i.data.push([e.time-1e3*n,Math.round(e.value[e.value.length-n]*a*100)/100]);else(function(){var t;i.data.push([e.time,Math.round(e.value*a*100)/100]);var n=(new Date).getTime()-1e3*e.maxHistory;while((t=i.data.findIndex((function(t){return n>t[0]})))>-1)i.data.splice(t,1)})()},clearDataset:function(t,e){var a=null,n=t.series.find((function(t){return t.name===e.name}));n&&(a=t.datasets[n.datasetIndex]),a&&i["a"].set(a,"source",[])},setVisible:function(t,e){var a="temperature"!==e.type?e.name+"_"+e.type:e.name,n=t.series.findIndex((function(t){return t.name===a}));-1!==n&&("target"===e.type&&"areaStyle"in t.series[n]?i["a"].set(t.series[n].areaStyle,"opacity",e.value?.1:0):"lineStyle"in t.series[n]&&i["a"].set(t.series[n].lineStyle,"opacity",e.value?.9:0))},setColor:function(t,e){t.series.forEach((function(t){!("lineStyle"in t)||t.name!==e.name&&t.name!==e.name+"_target"&&t.name!==e.name+"_power"||(t.lineStyle.color=e.value),t.name===e.name+"_target"&&"areaStyle"in t&&(t.areaStyle.color=e.value)}))}},Es={getDatasetColor:function(t){return function(e){var a=t.series.find((function(t){return t.name===e}));return a&&"lineStyle"in a?a.lineStyle.color:null}},getSeries:function(t){return function(e){return t.series.find((function(t){return t.name===e}))}},getCurrentMaxTemp:function(t){var e=0;return t.series.forEach((function(t){if((-1===t.name.lastIndexOf("_")||!["power","speed"].includes(t.name.substr(t.name.lastIndexOf("_")+1)))&&t.data.length&&("lineStyle"in t&&"opacity"in t.lineStyle&&t.lineStyle.opacity||"areaStyle"in t&&"opacity"in t.areaStyle&&t.areaStyle.opacity)){var a=Math.max.apply(Math,Object(oi["a"])(t.data.map((function(t){return t[1]}))));e<a&&(e=a)}})),10*Math.ceil((e+1)/10)}};function Rs(){return{series:[]}}var As=Rs(),Ls={namespaced:!0,state:As,getters:Es,actions:Ms,mutations:Fs,getDefaultState:Rs};function Is(){return{heaters:{available_heaters:[]},toolhead:{position:[],homed_axes:"",extruder:"",status:"",print_time:0,printing_time:0,estimated_print_time:0,max_velocity:0,max_accel:0,max_accel_to_decel:0,square_corner_velocity:0},pause_resume:{is_paused:!1},idle_timeout:{printing_time:0,state:""},display_status:{message:null,progress:0},virtual_sdcard:{progress:0,is_active:!1,file_position:0},print_stats:{print_duration:0,filament_used:0,total_duration:0,filename:"",state:"",message:""},current_file:{},gcode_move:{extrude_factor:1,speed_factor:1,homing_origin:[0,0,0,0],absolute_coordinates:!0,absolute_extrude:!0,speed:0},endstops:{},configfile:{config:{printer:{}},config_changed:!1},helplist:[]}}var Hs=Is(),Us={namespaced:!0,state:Hs,getters:$s,actions:xs,mutations:ws,modules:{tempHistory:Ls}},Ns={reset:function(t){var e=t.commit;e("reset")},getDirectory:function(t,e){var a=t.commit;a("setDirectory",e),"requestParams"in e&&"path"in e.requestParams&&"disk_usage"in e&&a("setDiskUsage",{disk_usage:e.disk_usage,path:e.requestParams.path})},getMetadata:function(t,e){var a=t.commit,i=t.rootState;void 0!==e&&""!==e.filename&&(e.filename===i.printer.print_stats.filename&&(a("printer/clearCurrentFile",null,{root:!0}),a("printer/setData",{current_file:e},{root:!0})),a("setMetadata",e))},getMetadataCurrentFile:function(t,e){var a=t.commit;a("printer/clearCurrentFile",null,{root:!0}),a("printer/setData",{current_file:e},{root:!0})},getMove:function(t,e){var a=t.commit;if(e.error)i["a"].$toast.error(e.error.message);else if("ok"===e.result){var n=e.requestParams.dest.substr(e.requestParams.dest.lastIndexOf("/")).replace("/",""),r=e.requestParams.dest.substr(0,e.requestParams.dest.lastIndexOf("/")),s=e.requestParams.dest.substr(0,e.requestParams.dest.lastIndexOf("/"));r===s?i["a"].$toast.success("Successfully renamed "+n):i["a"].$toast.success("Successfully moved "+n),a("void",null,{root:!0})}},getCreateDir:function(t,e){var a=t.commit;if(e.error)i["a"].$toast.error(e.error.message);else if("ok"===e.result){var n=e.requestParams.path.substr(e.requestParams.path.lastIndexOf("/")+1);i["a"].$toast.success("Successfully created "+n),a("void",null,{root:!0})}},getDeleteDir:function(t,e){var a=t.commit;if(e.error)i["a"].$toast.error(e.error.message);else if("ok"===e.result){var n=e.requestParams.path.substr(e.requestParams.path.lastIndexOf("/")+1);i["a"].$toast.success("Successfully deleted "+n),a("void",null,{root:!0})}},getDeleteFile:function(t,e){var a=t.commit;if(e.error)i["a"].$toast.error(e.error.message);else if("result"in e){var n=e.result.substr(e.result.lastIndexOf("/")+1);i["a"].$toast.success("Successfully deleted "+n),a("void",null,{root:!0})}}},Bs={reset:function(t){Object.assign(t,Ws())},setDirectory:function(t,e){var a=void 0;if(e&&e.requestParams&&e.requestParams.path){var n=e.requestParams.path.split("/");a=st(t.filetree,n)}if(void 0===a&&(a=t.filetree),Array.isArray(a)&&a.length)for(var r=function(){var t=Object(l["a"])(o[s],2),i=t[0],n=t[1];(n.isDirectory&&"dirs"in e&&e.dirs.length>0&&e.dirs.findIndex((function(t){return t.dirname===n.filename}))<0||!n.isDirectory&&e.files.findIndex((function(t){return t.filename===n.filename}))<0)&&a.splice(i,1)},s=0,o=Object.entries(a);s<o.length;s++)r();if(e.dirs&&e.dirs.length){var c,u=Object(d["a"])(e.dirs);try{var m=function(){var t=c.value;a.find((function(e){return!0===e.isDirectory&&e.filename===t.dirname}))||(a.push({isDirectory:!0,filename:t.dirname,modified:new Date(1e3*t.modified),childrens:[]}),i["a"].prototype.$socket.sendObj("server.files.get_directory",{path:e.requestParams.path+"/"+t.dirname},"files/getDirectory"))};for(u.s();!(c=u.n()).done;)m()}catch(v){u.e(v)}finally{u.f()}}if(e.files&&e.files.length){var p,f=Object(d["a"])(e.files);try{var h=function(){var t=p.value,n=a.find((function(e){return!1===e.isDirectory&&e.filename===t.filename}));!n||n.size===t.size&&n.modified.getTime()===new Date(1e3*t.modified).getTime()?n||a.push({isDirectory:!1,filename:t.filename,modified:new Date(1e3*t.modified),size:parseInt(t.size),metadataPulled:!1}):(i["a"].set(n,"modified",new Date(1e3*t.modified)),i["a"].set(n,"size",t.size),n.metadataPulled&&i["a"].prototype.$socket.sendObj("server.files.metadata",{filename:e.requestParams.path+"/"+t.filename},"files/getMetadata"))};for(f.s();!(p=f.n()).done;)h()}catch(v){f.e(v)}finally{f.f()}}},setMetadata:function(t,e){var a="gcodes/"+e.filename,n=a.split("/");a=n[n.length-1];var r=st(t.filetree,n),s=r.findIndex((function(t){return t.filename===a}));if(s>=0&&r[s]){var o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return t||e},c={estimated_time:o(e.estimated_time),filament_total:o(e.filament_total),first_layer_height:o(e.first_layer_height),first_layer_bed_temp:o(e.first_layer_bed_temp),first_layer_extr_temp:o(e.first_layer_extr_temp),gcode_start_byte:o(e.gcode_start_byte),gcode_end_byte:o(e.gcode_end_byte),layer_height:o(e.layer_height),object_height:o(e.object_height),slicer:o(e.slicer),slicer_version:o(e.slicer_version),thumbnails:o(e.thumbnails),metapayloadPulled:!0,modified:new Date(1e3*e.modified),size:parseInt(e.size)},l=Object.assign(r[s],c);i["a"].set(r,s,l)}},setUploadFile:function(t,e){var a=e.item.path;e.item.path.lastIndexOf("/")>=0&&(a=e.item.path.substr(e.item.path.lastIndexOf("/")).replace("/",""));var n=e.item.path.substr(0,e.item.path.lastIndexOf("/")),r=st(t.filetree,(e.item.root+"/"+n).split("/"));if(r)if(-1===r.findIndex((function(t){return!t.isDirectory&&t.filename===a}))){var s=new Date(1e3*e.item.modified);r.push({isDirectory:!1,filename:a,modified:s,size:e.item.size,metadataPulled:!1})}else i["a"].prototype.$socket.sendObj("server.files.metadata",{filename:e.item.path},"files/getMetadata")},setMoveItem:function(t,e){var a=e.source_item.path.substr(e.source_item.path.lastIndexOf("/")+1),i=e.source_item.path.substr(0,e.source_item.path.lastIndexOf("/")+1),n=e.item.path.substr(e.item.path.lastIndexOf("/")+1),r=e.item.path.substr(0,e.item.path.lastIndexOf("/")+1);i=st(t.filetree,(e.source_item.root+"/"+i).split("/"));var s=i.findIndex((function(t){return t.filename===a}));if(s>=0&&i[s]){var o=i.splice(s,1)[0];o.filename=n,r=st(t.filetree,(e.item.root+"/"+r).split("/")),r.push(o)}},setDeleteFile:function(t,e){var a=e.item.path.substr(0,e.item.path.lastIndexOf("/")),i=e.item.path.substr(e.item.path.lastIndexOf("/")+1);a=st(t.filetree,(e.item.root+"/"+a).split("/"));var n=a.findIndex((function(t){return t.filename===i}));n>=0&&a[n]&&a.splice(n,1)},setCreateDir:function(t,e){var a=e.item.path.substr(e.item.path.lastIndexOf("/")+1),i=e.item.path.substr(0,e.item.path.lastIndexOf("/")),n=st(t.filetree,(e.item.root+"/"+i).split("/"));n&&n.push({isDirectory:!0,filename:a,modified:new Date,childrens:[]})},setDeleteDir:function(t,e){var a=e.item.path.substr(0,e.item.path.lastIndexOf("/")),i=e.item.path.substr(e.item.path.lastIndexOf("/")+1);a=st(t.filetree,(e.item.root+"/"+a).split("/"));var n=a.findIndex((function(t){return t.filename===i}));n>=0&&a[n]&&a.splice(n,1)},setDiskUsage:function(t,e){var a=e.path;-1!==a.indexOf("/")&&(a=a.substr(0,a.indexOf("/")));var n=t.filetree.find((function(t){return t.filename===a}));n&&"disk_usage"in n&&i["a"].set(n,"disk_usage",e.disk_usage)}},qs={getSidebarLogo:function(t,e,a,i){var n=st(t.filetree,["config",Ds]),r=n.find((function(t){return void 0!==t.filename&&("sidebar-logo.svg"===t.filename||"sidebar-logo.jpg"===t.filename||"sidebar-logo.png"===t.filename||"sidebar-logo.gif"===t.filename)}));return r?i["socket/getUrl"]+"/server/files/config/"+Ds+"/"+r.filename:"/img/logo.svg"},getSidebarBackground:function(t,e,a,i){var n=st(t.filetree,["config",Ds]),r=n.find((function(t){return void 0!==t.filename&&("sidebar-background.jpg"===t.filename||"sidebar-background.png"===t.filename||"sidebar-background.gif"===t.filename)}));return r?i["socket/getUrl"]+"/server/files/config/"+Ds+"/"+r.filename:"/img/sidebar-background.png"},getCustomStylesheet:function(t,e,a,i){var n=st(t.filetree,["config",Ds]),r=n.find((function(t){return void 0!==t.filename&&"custom.css"===t.filename}));return r?i["socket/getUrl"]+"/server/files/config/"+Ds+"/"+r.filename:null},getFavicons:function(t,e,a,i){var n=st(t.filetree,["config",Ds]),r=n.find((function(t){return void 0!==t.filename&&"favicon-16x16.png"===t.filename}));r&&(r=i["socket/getUrl"]+"/server/files/config/"+Ds+"/"+r.filename);var s="/img/icons/favicon-16x16.png",o=n.find((function(t){return void 0!==t.filename&&"favicon-32x32.png"===t.filename}));o&&(o=i["socket/getUrl"]+"/server/files/config/"+Ds+"/"+o.filename);var c="/img/icons/favicon-32x32.png";return r&&o?[r,o]:r?[r,r]:o?[o,o]:[s,c]},getDiskUsage:function(t){return function(e){-1!==e.indexOf("/")&&(e=e.substr(0,e.indexOf("/")));var a=t.filetree.find((function(t){return t.filename===e}));return a&&"disk_usage"in a?a.disk_usage:{free:0,total:0,used:0}}}};function Ws(){return{filetree:[{isDirectory:!0,filename:"gcodes",modified:new Date,childrens:[],disk_usage:{}},{isDirectory:!0,filename:"config_examples",modified:new Date,childrens:[],disk_usage:{}},{isDirectory:!0,filename:"config",modified:new Date,childrens:[],disk_usage:{}},{isDirectory:!0,filename:"docs",modified:new Date,childrens:[],disk_usage:{}}]}}var Gs=Ws(),zs={namespaced:!0,state:Gs,getters:qs,actions:Ns,mutations:Bs},Ys={reset:function(t){var e=t.commit;e("reset")},getData:function(t,e){var a=t.commit,i=t.dispatch;if(a("setData",e),"state"in e&&"tempchart"in e.state&&"datasetSettings"in e.state.tempchart)for(var n=0,r=Object.keys(e.state.tempchart.datasetSettings);n<r.length;n++){var s=r[n];"color"in e.state.tempchart.datasetSettings[s]&&"object"===Object(Et["a"])(e.state.tempchart.datasetSettings[s].color)&&i("setTempchartDatasetSetting",{name:s,type:"color",value:e.state.tempchart.datasetSettings[s].color.hex})}},setSettings:function(t,e){var a=t.commit,i=t.dispatch;a("setSettings",e),"tempchart"in e&&"boolPowerDatasets"in e.tempchart&&(e.tempchart.boolPowerDatasets?a("printer/tempHistory/showPowerDatasets",{},{root:!0}):a("printer/tempHistory/hidePowerDatasets",{},{root:!0})),i("upload")},upload:function(t){var e=t.state,a=t.rootState,i=new File([JSON.stringify({state:e})],".mainsail.json"),n=new FormData;n.append("file",i),n.append("root","config"),At.a.post("//"+a.socket.hostname+":"+a.socket.port+"/server/files/upload",n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){})).catch((function(){window.console.error("Error save .mainsail.json!")}))},setGcodefilesMetadata:function(t,e){var a=t.commit,i=t.dispatch;a("setGcodefilesMetadata",e),i("upload")},setGcodefilesShowHiddenFiles:function(t,e){var a=t.commit,i=t.dispatch;a("setGcodefilesShowHiddenFiles",e),i("upload")},addPreset:function(t,e){var a=t.commit,i=t.dispatch;a("addPreset",e),i("upload")},updatePreset:function(t,e){var a=t.commit,i=t.dispatch;a("updatePreset",e),i("upload")},deletePreset:function(t,e){var a=t.commit,i=t.dispatch;a("deletePreset",e),i("upload")},setTempchartDatasetSetting:function(t,e){var a=t.commit,i=t.dispatch;a("setTempchartDatasetSetting",e),i("upload")},setTempchartDatasetAdditionalSensorSetting:function(t,e){var a=t.commit,i=t.dispatch;a("setTempchartDatasetAdditionalSensorSetting",e),i("upload")}},Zs=a("8365"),Xs={reset:function(t){Object.assign(t,Ks())},setData:function(t,e){"state"in e&&(e=e.state),"gui"in e&&(e=e.gui),Object.entries(e).forEach((function(e){var a=Object(l["a"])(e,2),n=a[0],r=a[1];"object"===Object(Et["a"])(r)&&!Array.isArray(r)&&n in t?Object.entries(r).forEach((function(e){var a=Object(l["a"])(e,2),r=a[0],s=a[1];r in t[n]&&i["a"].set(t[n],r,s)})):n in t&&i["a"].set(t,n,r)}))},setSettings:function(t,e){t=Zs(t,e)},setHeaterChartVisibility:function(t,e){var a=t.dashboard.hiddenTempChart.indexOf(e.name.toUpperCase());e.hidden&&-1===a?t.dashboard.hiddenTempChart.push(e.name.toUpperCase()):!0!==e.hidden&&a>-1&&t.dashboard.hiddenTempChart.splice(a,1)},setGcodefilesMetadata:function(t,e){e.value&&t.gcodefiles.hideMetadataColums.includes(e.name)?t.gcodefiles.hideMetadataColums.splice(t.gcodefiles.hideMetadataColums.indexOf(e.name),1):e.value||t.gcodefiles.hideMetadataColums.includes(e.name)||t.gcodefiles.hideMetadataColums.push(e.name)},setGcodefilesShowHiddenFiles:function(t,e){i["a"].set(t.gcodefiles,"showHiddenFiles",e)},addPreset:function(t,e){t.presets.push({name:e.name,gcode:e.gcode,values:e.values})},updatePreset:function(t,e){t.presets[e.index]&&(i["a"].set(t.presets[e.index],"name",e.name),i["a"].set(t.presets[e.index],"gcode",e.gcode),i["a"].set(t.presets[e.index],"values",e.values))},deletePreset:function(t,e){t.presets[e.index]&&t.presets.splice(e.index,1)},setTempchartDatasetSetting:function(t,e){e.name in t.tempchart.datasetSettings||i["a"].set(t.tempchart.datasetSettings,e.name,{}),i["a"].set(t.tempchart.datasetSettings[e.name],e.type,e.value)},setTempchartDatasetAdditionalSensorSetting:function(t,e){e.name in t.tempchart.datasetSettings||i["a"].set(t.tempchart.datasetSettings,e.name,{}),"additionalSensors"in t.tempchart.datasetSettings[e.name]||i["a"].set(t.tempchart.datasetSettings[e.name],"additionalSensors",{}),e.sensor in t.tempchart.datasetSettings[e.name]["additionalSensors"]||i["a"].set(t.tempchart.datasetSettings[e.name]["additionalSensors"],e.sensor,{}),i["a"].set(t.tempchart.datasetSettings[e.name]["additionalSensors"][e.sensor],"boolList",e.value)}},Js={getPreheatPresets:function(t){for(var e=[],a=0,i=Object.entries(t.presets);a<i.length;a++){var n=Object(l["a"])(i[a],2),r=n[0],s=n[1];e.push(Object(m["a"])(Object(m["a"])({},s),{},{index:r}))}return e.sort(ot)},getDatasetValue:function(t){return function(e){return e.name in t.tempchart.datasetSettings&&e.type in t.tempchart.datasetSettings[e.name]?t.tempchart.datasetSettings[e.name][e.type]:!!["temperature","target"].includes(e.type)}},getDatasetAdditionalSensorValue:function(t){return function(e){return e.name in t.tempchart.datasetSettings&&"additionalSensors"in t.tempchart.datasetSettings[e.name]&&e.sensor in t.tempchart.datasetSettings[e.name]["additionalSensors"]?t.tempchart.datasetSettings[e.name]["additionalSensors"][e.sensor]:{boolList:!0}}},getPresetsFromHeater:function(t){return function(e){var a=[];a.push({value:0});for(var i=function(){var t=Object(l["a"])(r[n],2),i=t[1];e.name in i.values&&i.values[e.name].bool&&-1===a.findIndex((function(t){return t.value===i.values[e.name].value}))&&a.push({value:i.values[e.name].value})},n=0,r=Object.entries(t.presets);n<r.length;n++)i();return a.sort((function(t,e){return t.value>e.value?-1:t.value<e.value?1:0}))}}};function Ks(){return{general:{printername:""},dashboard:{boolWebcam:!1,boolTempchart:!0,boolConsole:!0,hiddenMacros:[],hiddenTempChart:[],control:{feedrateXY:100,stepsXY:[100,10,1],feedrateZ:25,stepsZ:[25,1,.1]},extruder:{feedamount:25,feedamounts:[50,25,10,5,1],feedrate:5,feedrates:[60,30,15,5,1]}},webcam:{service:"mjpegstreamer",targetFps:25,url:"",rotate:!1,rotateDegrees:90,flipX:!1,flipY:!1,bool:!1},tempchart:{intervalChartUpdate:1e3,intervalDatasetUpdate:1e3,autoscale:!1,datasetSettings:{}},console:{hideWaitTemperatures:!0,boolCustomFilters:!1,customFilters:""},gcodefiles:{countPerPage:10,showHiddenFiles:!1,hideMetadataColums:[]},settings:{configfiles:{countPerPage:10,showHiddenFiles:!1}},remotePrinters:[],presets:[],cooldownGcode:"TURN_OFF_HEATERS"}}var Qs=Ks(),to={namespaced:!0,state:Qs,getters:Js,actions:Ys,mutations:Xs},eo={reset:function(t){var e=t.commit;e("reset")},connect:function(t){var e=t.state,a=t.commit,i=t.dispatch,n=t.getters;a("setSocketData",{isConnecting:!0});var r=new WebSocket(n.getSocketUrl);r.onopen=function(){a("setSocketData",{instance:r,reconnects:0,isConnecting:!1,isConnected:!0}),i("initPrinter")},r.onclose=function(t){!t.wasClean&&e.socket.reconnects<e.socket.maxReconnects?(a("setSocketData",{reconnects:e.socket.reconnects+1}),setTimeout((function(){i("connect")}),e.socket.reconnectInterval)):a("setSocketData",{isConnecting:!1,isConnected:!1,reconnects:0})},r.onerror=function(){},r.onmessage=function(t){var n=JSON.parse(t.data);if(n&&n.method)switch(n.method){case"notify_status_update":a("setData",n.params[0]);break;case"notify_filelist_changed":a("notifyFilelistChanged",n.params[0]);break;case"notify_klippy_disconnected":i("disconnectKlippy");break;case"notify_klippy_ready":i("initPrinter");break}else if("result"in n&&e.socket.wsData.filter((function(t){return t.id===n.id})).length>0&&void 0!==e.socket.wsData.filter((function(t){return t.id===n.id}))[0].action&&""!==e.socket.wsData.filter((function(t){return t.id===n.id}))[0].action){var r=n.result;"ok"===r&&(r={result:r}),"string"===typeof r&&(r={result:r});var s={},o=e.socket.wsData.filter((function(t){return t.id===n.id}))[0];o.actionPreload&&Object.assign(s,o.actionPreload),Object.assign(s,{requestParams:o.params}),Object.assign(s,r),i(o.action,s)}}},reconnect:function(t){var e=t.state,a=t.dispatch;e.socket.instance&&e.socket.instance.close(),a("connect")},sendObj:function(t,e){var a=t.state,i=t.commit;if(a.socket.instance&&a.socket.instance.readyState===WebSocket.OPEN){var n=Math.floor(1e4*Math.random())+1;i("addWsData",{id:n,action:e.action,params:e.params||{},actionPreload:e.actionPreload||null}),a.socket.instance.send(JSON.stringify({jsonrpc:"2.0",method:e.method,params:e.params||{},id:n}))}},disconnectKlippy:function(t){var e=t.commit;e("setData",{print_stats:{state:"error"}})},initPrinter:function(t){var e=t.commit,a=t.dispatch;e("resetData"),a("sendObj",{method:"printer.objects.list",action:"getObjectsList"}),a("sendObj",{method:"server.files.list",action:"getConfigDir",params:{root:"config"}})},getObjectsList:function(t,e){var a=t.dispatch,i=["webhooks","print_stats","virtual_sdcard","display_status","heaters","heater_bed","heater_fan","fan","temperature_fan","temperature_sensor","idle_timeout","toolhead"],n={};e.objects.forEach((function(t){var e=t.split(" "),a=e[0];(i.includes(a)||a.startsWith("extruder"))&&(n=Object(m["a"])(Object(m["a"])({},n),{},Object(he["a"])({},t,null)))})),n!=={}&&a("sendObj",{method:"printer.objects.subscribe",params:{objects:n},action:"getData"})},getData:function(t,e){var a=t.commit;a("setData",e)},getMetadataCurrentFile:function(t,e){var a=t.commit;a("setCurrentFile",e)},getConfigDir:function(t,e){var a=t.commit;a("setConfigDir",e)}},ao={reset:function(t){Object.assign(t,no())},resetData:function(t){Object.assign(t.data,no().data)},setSocketData:function(t,e){"status"in e&&(e=e.status),"requestParams"in e&&delete e.requestParams,"_namespace"in e&&(i["a"].set(t,"_namespace",e._namespace),delete e._namespace),Object.entries(e).forEach((function(e){var a=Object(l["a"])(e,2),n=a[0],r=a[1];i["a"].set(t.socket,n,r)}))},setData:function(t,e){var a=this;"status"in e&&(e=e.status),"requestParams"in e&&delete e.requestParams,Object.entries(e).forEach((function(e){var n=Object(l["a"])(e,2),r=n[0],s=n[1];"print_stats"===r&&"filename"in s&&a.dispatch("farm/"+t._namespace+"/sendObj",{method:"server.files.metadata",params:{filename:s.filename},action:"getMetadataCurrentFile"}),"object"===Object(Et["a"])(s)?i["a"].set(t.data,r,Object(m["a"])(Object(m["a"])({},t.data[r]),s)):i["a"].set(t.data,r,s)}))},addWsData:function(t,e){t.socket.wsData.push(e)},setCurrentFile:function(t,e){"requestParams"in e&&delete e.requestParams,i["a"].set(t,"current_file",e)},setConfigDir:function(t,e){for(var a=this,i=0,n=Object.entries(e);i<n.length;i++){var r=Object(l["a"])(n[i],2),s=r[1];"filename"in s&&(s.filename.startsWith(".theme/")?t.theme_files.push(s.filename):".mainsail.json"===s.filename&&fetch("//"+t.socket.hostname+":"+t.socket.port+"/server/files/config/.mainsail.json?time="+Date.now()).then((function(t){return t.json()})).then((function(e){a.commit("farm/"+t._namespace+"/setMainsailJson",e)})))}},setMainsailJson:function(t,e){i["a"].set(t.data,"gui",e.state)},notifyFilelistChanged:function(t,e){var a=this;"upload_file"===e.action&&"config"===e.item.root&&".mainsail.json"===e.item.path&&fetch("//"+t.socket.hostname+":"+t.socket.port+"/server/files/config/.mainsail.json?time="+Date.now()).then((function(t){return t.json()})).then((function(e){a.commit("farm/"+t._namespace+"/setMainsailJson",e)}))}},io={getSocketUrl:function(t){return t.socket.protocol+"://"+t.socket.hostname+":"+t.socket.port+"/websocket"},getSocketData:function(t){return t.socket},isCurrentPrinter:function(t,e,a){return a.socket.hostname===t.socket.hostname&&a.socket.port===t.socket.port},getPrinterName:function(t){return"gui"in t.data&&"general"in t.data.gui&&"printername"in t.data.gui.general&&""!==t.data.gui.general.printername?t.data.gui.general.printername:80!==parseInt(t.socket.port)?t.socket.hostname+":"+t.socket.port:t.socket.hostname},getStatus:function(t,e){if(!t.socket.isConnected)return t.socket.isConnecting?"Connecting...":"Disconnected";if(t.data.print_stats&&t.data.print_stats.state){if("printing"===t.data.print_stats.state){var a=e["getPrintPercent"];return Math.round(100*a)+"% Printing"}return t.data.print_stats.state.charAt(0).toUpperCase()+t.data.print_stats.state.slice(1)}return"Unknown"},getCurrentFilename:function(t){return"print_stats"in t.data&&"filename"in t.data.print_stats?t.data.print_stats.filename:""},getPrintPercent:function(t){if("filename"in t.current_file&&"gcode_start_byte"in t.current_file&&"gcode_end_byte"in t.current_file&&t.current_file.filename===t.data.print_stats.filename){if(t.data.virtual_sdcard.file_position<=t.current_file.gcode_start_byte)return 0;if(t.data.virtual_sdcard.file_position>=t.current_file.gcode_end_byte)return 1;var e=t.data.virtual_sdcard.file_position-t.current_file.gcode_start_byte,a=t.current_file.gcode_end_byte-t.current_file.gcode_start_byte;if(e>0&&a>0)return 1/a*e}return t.data.virtual_sdcard.progress},getImage:function(t){return"gui"in t.data&&"webcam"in t.data.gui.webcam&&"url"in t.data.gui.webcam&&""!==t.data.gui.webcam.url&&"bool"in t.data.gui.webcam&&t.data.gui.webcam.bool&&"dashbaord"in t.data.gui&&"boolWebcam"in t.data.gui.dashboard&&t.data.gui.dashboard.boolWebcam?t.data.gui.webcam.url:t.current_file&&"thumbnails"in t.current_file&&t.current_file.thumbnails.find((function(t){return 400===t.width&&300===t.height}))?"data:image/gif;base64,"+t.current_file.thumbnails.find((function(t){return 400===t.width&&300===t.height})).data:"/img/sidebar-background.png"},getLogo:function(t){var e=t.theme_files.find((function(t){return t===Ds+"/sidebar-logo.svg"||t===Ds+"/sidebar-logo.jpg"||t===Ds+"/sidebar-logo.png"||t===Ds+"/sidebar-logo.gif"}));return e?"//"+t.socket.hostname+":"+t.socket.port+"/server/files/config/"+e:"/img/logo.svg"},getPosition:function(t){return"toolhead"in t.data&&"position"in t.data.toolhead?t.data.toolhead.position:[]},getPrinterPreview:function(t,e){var a=[];if(Object.keys(t.data).filter((function(t){return t.startsWith("extruder")})).forEach((function(e){"temperature"in t.data[e]&&"target"in t.data[e]&&a.push({name:e,value:t.data[e].temperature.toFixed(0)+"° / "+t.data[e].target.toFixed(0)+"°"})})),"heater_bed"in t.data&&"temperature"in t.data.heater_bed&&"target"in t.data.heater_bed&&a.push({name:"heater_bed",value:t.data.heater_bed.temperature.toFixed(0)+"° / "+t.data.heater_bed.target.toFixed(0)+"°"}),"temperature_fan chamber"in t.data&&"temperature"in t.data["temperature_fan chamber"]&&"target"in t.data["temperature_fan chamber"]&&a.push({name:"chamber",value:t.data["temperature_fan chamber"].temperature.toFixed(0)+"° / "+t.data["temperature_fan chamber"].target.toFixed(0)+"°"}),"temperature_sensor chamber"in t.data&&a.push({name:"chamber",value:t.data["temperature_sensor chamber"].temperature.toFixed(0)+"°"}),"print_stats"in t.data&&"state"in t.data.print_stats&&"printing"===t.data.print_stats.state&&e["getPrintPercent"]>0){var i=new Date(e.estimated_time_eta),n=i.getHours()>=10?i.getHours():"0"+i.getHours(),r=i.getMinutes()>=10?i.getMinutes():"0"+i.getMinutes();a.push({name:"ETA",value:n+":"+r,file:e.estimated_time_file,filament:e.estimated_time_filament,slicer:e.estimated_time_slicer,eta:e.estimated_time_eta})}return a},estimated_time_file:function(t,e){return"print_stats"in t.data&&"print_duration"in t.data.print_stats&&t.data.print_stats.print_duration>0&&e.getPrintPercent>0?(t.data.print_stats.print_duration/e.getPrintPercent-t.data.print_stats.print_duration).toFixed(0):0},estimated_time_filament:function(t){return"print_stats"in t.data&&"print_duration"in t.data.print_stats&&"filament_used"in t.data.print_stats&&"filament_total"in t.current_file&&t.data.print_stats.filament_used>0&&t.current_file.filament_total>t.data.print_stats.filament_used?(t.data.print_stats.print_duration/(t.data.print_stats.filament_used/t.current_file.filament_total)-t.data.print_stats.print_duration).toFixed(0):0},estimated_time_slicer:function(t){return"print_stats"in t.data&&"print_duration"in t.data.print_stats&&"estimated_time"in t.current_file&&t.current_file.estimated_time>t.data.print_stats.print_duration?(t.current_file.estimated_time-t.data.print_stats.print_duration).toFixed(0):0},estimated_time_eta:function(t,e){var a=0,i=0;return e.estimated_time_file>0&&(a+=parseInt(e.estimated_time_file),i++),e.estimated_time_filament>0&&(a+=parseInt(e.estimated_time_filament),i++),e.estimated_time_slicer>0&&(a+=parseInt(e.estimated_time_slicer),i++),a&&i?Date.now()+a/i*1e3:0}};function no(){return{_namespace:"",socket:{instance:null,hostname:"",port:7125,webPort:80,protocol:"ws",isConnected:!1,isConnecting:!1,reconnects:0,maxReconnects:2,reconnectInterval:1e3,wsData:[]},data:{},current_file:{},theme_files:[]}}var ro=function(){return no()},so={namespaced:!0,state:ro,getters:io,actions:eo,mutations:ao},oo={namespaced:!0,state:function(){},getters:{countPrinters:function(t){return Object.keys(t).length},getPrinters:function(t){return t},getPrinterName:function(t){return function(e){return t[e+"/getPrinterName"]}}},actions:{readStoredPrinters:function(t){var e=t.rootState,a=t.commit;if(e.socket.remoteMode){if(localStorage.getItem("printers"))try{var i=JSON.parse(localStorage.getItem("printers"))||[];i.forEach((function(t){a("addPrinter",{hostname:t.hostname,port:t.port,protocol:e.socket.protocol})}))}catch(n){localStorage.removeItem("printers")}}else e.gui.remotePrinters.forEach((function(t){a("addPrinter",{hostname:t.hostname,port:t.port,webPort:t.webPort,protocol:e.socket.protocol})}))},savePrinters:function(t){var e=t.rootState,a=t.state,i=t.dispatch,n=[];if(e.socket.remoteMode){for(var r in a)n.push({hostname:a[r].socket.hostname,port:a[r].socket.port});localStorage.setItem("printers",JSON.stringify(n))}else{for(var s in a)n.push({hostname:a[s].socket.hostname,port:a[s].socket.port,webPort:a[s].socket.webPort});i("gui/setSettings",{remotePrinters:n},{root:!0})}}},mutations:{addPrinter:function(t,e){if("hostname"in e&&""!==e.hostname){var a=Object.entries(t).findIndex((function(t){return t.length>0&&"socket"in t[1]&&"hostname"in t[1].socket&&t[1].socket.hostname===e.hostname&&"port"in t[1].socket&&t[1].socket.port===e.port})),i="printer"+Object.entries(t).length;-1!==a||this.hasModule(["farm",i])||(this.registerModule(["farm",i],so),this.commit("farm/"+i+"/setSocketData",Object(m["a"])(Object(m["a"])({},e),{},{_namespace:i})),this.dispatch("farm/"+i+"/connect",{},{root:!0}))}},removePrinter:function(t,e){e.name in t&&(t[e.name].socket.instance&&t[e.name].socket.instance.close(),this.unregisterModule(["farm",e.name]))}}};i["a"].use(h["a"]),i["a"].use(ca.a);var co=new h["a"].Store({state:{packageVersion:"1.3.0"},modules:{socket:ns,server:ks,printer:Us,files:zs,gui:to,farm:oo},getters:Kr,mutations:Jr,actions:Xr}),lo=a("ec02"),uo=a.n(lo),mo=a("85fe");i["a"].config.productionTip=!1,i["a"].use(da["a"]),i["a"].use(mo["a"]),i["a"].http.headers.common["Content-Type"]="application/json",i["a"].http.headers.common["Access-Control-Allow-Origin"]="*",i["a"].http.headers.common["Accept"]="application/json, text/plain, */*",i["a"].http.headers.common["Access-Control-Allow-Headers"]="Origin, Accept, Content-Type, Authorization, Access-Control-Allow-Origin",i["a"].http.headers.common["Access-Control-Allow-Methods"]="POST, GET, PUT, OPTIONS, DELETE, OPTIONS",i["a"].component("vue-headful",uo.a),fetch("/config.json").then((function(t){return t.json()})).then((function(t){co.commit("socket/setData",t);var e=new s(co.state.socket.protocol+"://"+co.state.socket.hostname+":"+co.state.socket.port+"/websocket",{store:co,reconnectEnabled:!0,reconnectInterval:co.state.socket.reconnectInterval});co.state.socket.remoteMode||e.connect(),i["a"].prototype.$socket=e,new i["a"]({vuetify:la,router:We,store:co,render:function(t){return t(ra)}}).$mount("#app")})).catch((function(t){var e=document.createElement("p"),a=document.createTextNode("config.json not found or cannot be decoded!");e.appendChild(a),document.getElementById("app").append(e),window.console.error("Error:",t)}))},"58f7":function(t,e,a){"use strict";var i=a("5cbf"),n=a.n(i);n.a},"5cbf":function(t,e,a){},"5e1a":function(t,e,a){},"6aeb":function(t,e,a){},"6d5e":function(t,e,a){"use strict";var i=a("73be"),n=a.n(i);n.a},"6ed4":function(t,e,a){},"73be":function(t,e,a){},7821:function(t,e,a){},"79df":function(t,e,a){},"8e81":function(t,e,a){},9085:function(t,e,a){},"9fab":function(t,e,a){"use strict";var i=a("fa31"),n=a.n(i);n.a},a1c1:function(t,e,a){},b0a0:function(t,e,a){"use strict";var i=a("79df"),n=a.n(i);n.a},b0cf:function(t,e,a){},b5f2:function(t,e,a){"use strict";var i=a("2a78"),n=a.n(i);n.a},bb8a:function(t,e,a){},cff0:function(t,e,a){"use strict";var i=a("e9c2"),n=a.n(i);n.a},dc88:function(t,e,a){"use strict";var i=a("5e1a"),n=a.n(i);n.a},dcac:function(t,e,a){"use strict";var i=a("a1c1"),n=a.n(i);n.a},dd13:function(t,e,a){"use strict";var i=a("0fe4"),n=a.n(i);n.a},e04a:function(t,e,a){},e05b:function(t,e,a){"use strict";var i=a("7821"),n=a.n(i);n.a},e9c2:function(t,e,a){},f44e:function(t,e,a){"use strict";var i=a("24e8"),n=a.n(i);n.a},fa31:function(t,e,a){}});